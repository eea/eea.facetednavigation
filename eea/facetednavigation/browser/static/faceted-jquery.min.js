/*! For license information please see faceted-jquery.min.js.LICENSE.txt */
!function(){var e={507:function(){!function(e,t){var i,s,n,r,a,o,l,c,h,d,u,p,f,g=Array.prototype.slice,m=decodeURIComponent,v=e.param,_=e.bbq=e.bbq||{},b=e.event.special,y="querystring",C="fragment",w="href",x="src",S=/^.*\?|#.*$/g,E={};function k(e){return"string"==typeof e}function T(e){var t=g.call(arguments,1);return function(){return e.apply(this,t.concat(g.call(arguments)))}}function O(t,n,a,o,l){var c,p,g,v,_;return o!==i?(_=(g=a.match(t?d:/^([^#?]*)\??([^#]*)(#?.*)/))[3]||"",2===l&&k(o)?p=o.replace(t?h:S,""):(v=r(g[2]),o=k(o)?r[t?C:y](o):o,p=2===l?o:1===l?e.extend({},o,v):e.extend({},v,o),p=s(p),t&&(p=p.replace(u,m))),c=g[1]+(t?f:p||!g[1]?"?":"")+p+_):c=n(a!==i?a:location.href),c}function A(e,t,s){return t===i||"boolean"==typeof t?(s=t,t=v[e?C:y]()):t=k(t)?t.replace(e?h:S,""):t,r(t,s)}function D(t,s,n,r){return k(n)||"object"==typeof n||(r=n,n=s,s=i),this.each((function(){var i=e(this),a=s||c()[(this.nodeName||"").toLowerCase()]||"",o=a&&i.attr(a)||"";i.attr(a,v[t](o,n,r))}))}v.querystring=T(O,0,(function(e){return e.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")})),v.fragment=n=T(O,1,(function(e){return e.replace(d,"$2")})),v.sorted=s=function(t,i){var s=[],n={};return e.each(v(t,i).split("&"),(function(e,t){var i=t.replace(/(?:%5B|=).*$/,""),r=n[i];r||(r=n[i]=[],s.push(i)),r.push(t)})),e.map(s.sort(),(function(e){return n[e]})).join("&")},n.noEscape=function(t){t=t||"";var i=e.map(t.split(""),encodeURIComponent);u=new RegExp(i.join("|"),"g")},n.noEscape(",/"),n.ajaxCrawlable=function(e){return e!==i&&(e?(h=/^.*(?:#!|#)/,d=/^([^#]*)(?:#!|#)?(.*)$/,f="#!"):(h=/^.*#/,d=/^([^#]*)#?(.*)$/,f="#"),p=!!e),p},n.ajaxCrawlable(0),e.deparam=r=function(t,s){var n={},r={true:!0,false:!1,null:null};return e.each(t.replace(/\+/g," ").split("&"),(function(t,a){var o,l=a.split("="),c=m(l[0]),h=n,d=0,u=c.split("]["),p=u.length-1;if(/\[/.test(u[0])&&/\]$/.test(u[p])?(u[p]=u[p].replace(/\]$/,""),p=(u=u.shift().split("[").concat(u)).length-1):p=0,2===l.length)if(o=m(l[1]),s&&(o=o&&!isNaN(o)?+o:"undefined"===o?i:r[o]!==i?r[o]:o),p)for(;d<=p;d++)h=h[c=""===u[d]?h.length:u[d]]=d<p?h[c]||(u[d+1]&&isNaN(u[d+1])?{}:[]):o;else e.isArray(n[c])?n[c].push(o):n[c]!==i?n[c]=[n[c],o]:n[c]=o;else c&&(n[c]=s?i:"")})),n},r.querystring=T(A,0),r.fragment=a=T(A,1),e.elemUrlAttr||(e.elemUrlAttr=function(t){return e.extend(E,t)})({a:w,base:w,iframe:x,img:x,input:x,form:"action",link:w,script:x}),c=e.elemUrlAttr,e.fn.querystring=T(D,y),e.fn.fragment=T(D,C),_.pushState=o=function(e,t){k(e)&&/^#/.test(e)&&t===i&&(t=2);var s=e!==i,r=n(location.href,s?e:{},s?t:2);location.href=r},_.getState=l=function(e,t){return e===i||"boolean"==typeof e?a(e):a(t)[e]},_.removeState=function(t){var s={};t!==i&&(s=l(),e.each(e.isArray(t)?t:arguments,(function(e,t){delete s[t]}))),o(s,2)},b.hashchange=e.extend(b.hashchange,{add:function(t){var s;function a(e){var t=e.fragment=n();e.getState=function(e,s){return e===i||"boolean"==typeof e?r(t,e):r(t,s)[e]},s.apply(this,arguments)}if(e.isFunction(t))return s=t,a;s=t.handler,t.handler=a}})}(jQuery),function(e,t,i){var s,n="hashchange",r=document,a=e.event.special,o=r.documentMode,l="onhashchange"in t&&(o===i||o>7);function c(e){return"#"+(e=e||location.href).replace(/^[^#]*#?(.*)$/,"$1")}e.fn.hashchange=function(e){return e?this.bind(n,e):this.trigger(n)},e.fn.hashchange.delay=50,a.hashchange=e.extend(a.hashchange,{setup:function(){if(l)return!1;e(s.start)},teardown:function(){if(l)return!1;e(s.stop)}}),s=function(){var s,r={},a=c(),o=function(e){return e},l=o,h=o;function d(){var i=c(),r=h(a);i!==a?(l(a=i,r),e(t).trigger(n)):r!==a&&(location.href=location.href.replace(/#.*/,"")+r),s=setTimeout(d,e.fn.hashchange.delay)}return r.start=function(){s||d()},r.stop=function(){s&&clearTimeout(s),s=i},r}()}(jQuery,this)},210:function(){!function(){var e=document,t=window;function i(e,i,s){t.addEventListener?e.addEventListener(i,s,!1):t.attachEvent&&e.attachEvent("on"+i,(function(){s.call(e,t.event)}))}var s,n=(s=e.createElement("div"),function(e){s.innerHTML=e;var t=s.childNodes[0];return s.removeChild(t),t});function r(e,t){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(i," ")}if(document.documentElement.getBoundingClientRect)var a=function(e){var t=e.getBoundingClientRect(),i=e.ownerDocument,s=i.body,n=i.documentElement,r=n.clientTop||s.clientTop||0,a=n.clientLeft||s.clientLeft||0,o=1;if(s.getBoundingClientRect){var l=s.getBoundingClientRect();o=(l.right-l.left)/s.clientWidth}return o>1&&(r=0,a=0),{top:t.top/o+(window.pageYOffset||n&&n.scrollTop/o||s.scrollTop/o)-r,left:t.left/o+(window.pageXOffset||n&&n.scrollLeft/o||s.scrollLeft/o)-a}};else a=function(e){if(t.jQuery)return jQuery(e).offset();var i=0,s=0;do{i+=e.offsetTop||0,s+=e.offsetLeft||0}while(e=e.offsetParent);return{left:s,top:i}};var o,l=(o=0,function(){return"ValumsAjaxUpload"+o++});function c(e){return e.replace(/.*(\/|\\)/,"")}function h(e){return/[.]/.exec(e)?/[^.]+$/.exec(e.toLowerCase()):""}Ajax_upload=AjaxUpload=function(t,i){var s;if(t.jquery?t=t[0]:"string"==typeof t&&/^#.*/.test(t)&&(t=t.slice(1)),"string"==typeof(s=t)&&(s=e.getElementById(s)),t=s,this._input=null,this._button=t,this._disabled=!1,this._submitting=!1,this._justClicked=!1,this._parentDialog=e.body,window.jQuery&&jQuery.ui&&jQuery.ui.dialog){var n=jQuery(self._button).parents(".ui-dialog-content");n.length&&(this._parentDialog=n[0])}for(var r in this._settings={action:"upload.php",name:"userfile",data:{},autoSubmit:!0,responseType:!1,onChange:function(e,t){},onSubmit:function(e,t){},onComplete:function(e,t){}},i)this._settings[r]=i[r];this._createInput(),this._rerouteClicks()},AjaxUpload.prototype={setData:function(e){this._settings.data=e},disable:function(){this._disabled=!0},enable:function(){this._disabled=!1},destroy:function(){this._input&&(this._input.parentNode&&this._input.parentNode.removeChild(this._input),this._input=null)},_createInput:function(){var t=this,s=e.createElement("input");s.setAttribute("type","file"),s.setAttribute("name",this._settings.name);var n={position:"absolute",margin:"-5px 0 0 -175px",padding:0,width:"220px",height:"30px",fontSize:"14px",opacity:0,cursor:"pointer",display:"none",zIndex:2147483583};for(var r in n)s.style[r]=n[r];"0"!==s.style.opacity&&(s.style.filter="alpha(opacity=0)"),this._parentDialog.appendChild(s),i(s,"change",(function(){var e=c(this.value);0!=t._settings.onChange.call(t,e,h(e))&&t._settings.autoSubmit&&t.submit()})),i(s,"click",(function(){t.justClicked=!0,setTimeout((function(){t.justClicked=!1}),3e3)})),this._input=s},_rerouteClicks:function(){var t,s=this,n={top:0,left:0},o=!1;i(s._button,"mouseover",(function(i){var r,l,c,h;s._input&&!o&&(o=!0,r=s._button,l=(h=a(r)).left,c=h.top,t={left:l,right:l+r.offsetWidth,top:c,bottom:c+r.offsetHeight},s._parentDialog!=e.body&&(n=a(s._parentDialog)))})),i(document,"mousemove",(function(i){var a,l,c=s._input;if(c&&o){if(s._disabled)return r(s._button,"hover"),void(c.style.display="none");var h=function(t){if(!t.pageX&&t.clientX){var i=1,s=document.body;if(s.getBoundingClientRect){var n=s.getBoundingClientRect();i=(n.right-n.left)/s.clientWidth}return{x:t.clientX/i+e.body.scrollLeft+e.documentElement.scrollLeft,y:t.clientY/i+e.body.scrollTop+e.documentElement.scrollTop}}return{x:t.pageX,y:t.pageY}}(i);h.x>=t.left&&h.x<=t.right&&h.y>=t.top&&h.y<=t.bottom?(c.style.top=h.y-n.top+"px",c.style.left=h.x-n.left+"px",c.style.display="block",function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}(a=s._button,l="hover")||(a.className+=" "+l)):(o=!1,s.justClicked||(c.style.display="none"),r(s._button,"hover"))}}))},_createIframe:function(){var t=l(),i=n('<iframe src="javascript:false;" name="'+t+'" />');return i.id=t,i.style.display="none",e.body.appendChild(i),i},submit:function(){var t=this,s=this._settings;if(""!==this._input.value){var n=c(this._input.value);if(0!=s.onSubmit.call(this,n,h(n))){var r=this._createIframe(),a=this._createForm(r);a.appendChild(this._input),a.submit(),e.body.removeChild(a),a=null,this._input=null,this._createInput();var o=!1;i(r,"load",(function(i){if("about:blank"!=r.src){var a=r.contentDocument?r.contentDocument:frames[r.id].document;if(!(a.readyState&&"complete"!=a.readyState||a.body&&"false"==a.body.innerHTML)){if(a.XMLDocument)l=a.XMLDocument;else if(a.body)l=a.body.innerHTML,"json"==s.responseType&&(l=window.eval("("+l+")"));else var l=a;s.onComplete.call(t,n,l),o=!0,r.src="about:blank"}}else o&&setTimeout((function(){e.body.removeChild(r)}),0)}))}else e.body.removeChild(this._input),this._input=null,this._createInput()}},_createForm:function(t){var i=this._settings,s=n('<form method="post" enctype="multipart/form-data"></form>');for(var r in s.style.display="none",s.action=i.action,s.target=t.name,e.body.appendChild(s),i.data){var a=e.createElement("input");a.type="hidden",a.name=r,a.value=i.data[r],s.appendChild(a)}return s}}}()},973:function(){jQuery.cookie=function(e,t,i){if(void 0===t){var s=null;if(document.cookie&&""!=document.cookie)for(var n=document.cookie.split(";"),r=0;r<n.length;r++){var a=jQuery.trim(n[r]);if(a.substring(0,e.length+1)==e+"="){s=decodeURIComponent(a.substring(e.length+1));break}}return s}i=i||{},null===t&&(t="",i.expires=-1);var o,l="";i.expires&&("number"==typeof i.expires||i.expires.toUTCString)&&("number"==typeof i.expires?(o=new Date).setTime(o.getTime()+24*i.expires*60*60*1e3):o=i.expires,l="; expires="+o.toUTCString());var c=i.path?"; path="+i.path:"",h=i.domain?"; domain="+i.domain:"",d=i.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),l,c,h,d].join("")}},836:function(){var e;!function(e){function t(){return{cntr:++t.cntr,settings:e.extend({},e.jstree.defaults),init:function(i,s){var n=this;if(this.container=e(i),0==this.container.size)return!1;if(t.inst[this.cntr]=this,this.container.attr("id")||this.container.attr("id","jstree_"+this.cntr),t.inst[this.container.attr("id")]=t.inst[this.cntr],t.focused=this.cntr,this.settings=e.extend(!0,{},this.settings,s),this.settings.languages&&this.settings.languages.length){this.current_lang=this.settings.languages[0];for(var r=!1,a="#"+this.container.attr("id"),o=0;o<this.settings.languages.length;o++)!1!==(r=t.add_css(a+" ."+this.settings.languages[o]))&&(r.style.display=this.settings.languages[o]==this.current_lang?"":"none")}else this.current_lang=!1;this.container.addClass("tree"),!1!==this.settings.ui.theme_name&&(!1===this.settings.ui.theme_path&&e("script").each((function(){if(this.src.toString().match(/jquery\.tree.*?js$/))return n.settings.ui.theme_path=this.src.toString().replace(/jquery\.tree.*?js$/,"")+"themes/"+n.settings.ui.theme_name+"/style.css",!1})),""!=this.settings.ui.theme_path&&-1==e.inArray(this.settings.ui.theme_path,t.themes)&&(t.add_sheet({url:this.settings.ui.theme_path}),t.themes.push(this.settings.ui.theme_path)),this.container.addClass("tree-"+this.settings.ui.theme_name));var l="";for(var c in this.settings.types)this.settings.types.hasOwnProperty(c)&&this.settings.types[c].icon&&(this.settings.types[c].icon.image||this.settings.types[c].icon.position)&&(l+="default"==c?"#"+this.container.attr("id")+" li > a ins { ":"#"+this.container.attr("id")+" li[rel="+c+"] > a ins { ",this.settings.types[c].icon.image&&(l+=" background-image:url("+this.settings.types[c].icon.image+"); "),this.settings.types[c].icon.position&&(l+=" background-position:"+this.settings.types[c].icon.position+"; "),l+="} ");""!=l&&t.add_sheet({str:l}),this.settings.rules.multiple&&(this.selected_arr=[]),this.offset=!1,this.hovered=!1,this.locked=!1,!1===t.drag_drop.marker&&(t.drag_drop.marker=e("<div>").attr({id:"jstree-marker"}).hide().appendTo("body")),this.callback("oninit",[this]),this.refresh(),this.attach_events(),this.focus()},refresh:function(t){if(this.locked)return this.error("LOCKED");var i=this;if(t&&!this.settings.data.async&&(t=!1),this.is_partial_refresh=!!t,this.opened=Array(),0!=this.settings.opened?(e.each(this.settings.opened,(function(e,t){this.replace(/^#/,"").length>0&&i.opened.push("#"+this.replace(/^#/,""))})),this.settings.opened=!1):this.container.find("li.open").each((function(e){this.id&&i.opened.push("#"+this.id)})),this.selected)this.settings.selected=Array(),t?e(t).find("li:has(a.clicked)").each((function(){this.id&&i.settings.selected.push("#"+this.id)})):this.selected_arr?e.each(this.selected_arr,(function(){this.attr("id")&&i.settings.selected.push("#"+this.attr("id"))})):this.selected.attr("id")&&this.settings.selected.push("#"+this.selected.attr("id"));else if(!1!==this.settings.selected){var s=Array();"object"==(typeof this.settings.selected).toLowerCase()?e.each(this.settings.selected,(function(){this.replace(/^#/,"").length>0&&s.push("#"+this.replace(/^#/,""))})):this.settings.selected.replace(/^#/,"").length>0&&s.push("#"+this.settings.selected.replace(/^#/,"")),this.settings.selected=s}if(t&&this.settings.data.async)return this.opened=Array(),(t=this.get_node(t)).find("li.open").each((function(e){i.opened.push("#"+this.id)})),t.hasClass("open")&&t.removeClass("open").addClass("closed"),t.hasClass("leaf")&&t.removeClass("leaf"),t.children("ul:eq(0)").html(""),this.open_branch(t,!0,(function(){i.reselect.apply(i)}));i=this;var n=new e.jstree.datastores[this.settings.data.type];0==this.container.children("ul").size()&&this.container.html("<ul class='ltr' style='direction:ltr;'><li class='last'><a class='loading' href='#'><ins>&nbsp;</ins>"+(this.settings.lang.loading||"Loading ...")+"</a></li></ul>"),n.load(this.callback("beforedata",[!1,this]),this,this.settings.data.opts,(function(t){t=i.callback("ondata",[t,i]),n.parse(t,i,i.settings.data.opts,(function(t){t=i.callback("onparse",[t,i]),i.container.empty().append(e("<ul class='ltr'>").html(t)),i.container.find("li:last-child").addClass("last").end().find("li:has(ul)").not(".open").addClass("closed"),i.container.find("li").not(".open").not(".closed").addClass("leaf"),i.reselect()}))}))},reselect:function(t){var i=this;if(t?this.cl_count--:this.cl_count=0,this.opened&&this.opened.length){for(var s=!1,n=0;this.opened&&n<this.opened.length;n++)if(this.settings.data.async){if((r=this.get_node(this.opened[n])).size()&&r.hasClass("closed")>0){s=!0;var r=this.opened[n].toString().replace("/","\\/");delete this.opened[n],this.open_branch(r,!0,(function(){i.reselect.apply(i,[!0])})),this.cl_count++}}else this.open_branch(this.opened[n],!0);if(this.settings.data.async&&s)return;if(this.cl_count>0)return;delete this.opened}this.cl_count>0||(this.container.css("direction","ltr").children("ul:eq(0)").addClass("ltr"),0==this.settings.ui.dots&&this.container.children("ul:eq(0)").addClass("no_dots"),this.scrtop&&(this.container.scrollTop(i.scrtop),delete this.scrtop),!1!==this.settings.selected&&(e.each(this.settings.selected,(function(t){i.is_partial_refresh?i.select_branch(e(i.settings.selected[t].toString().replace("/","\\/"),i.container),!1!==i.settings.rules.multiple):i.select_branch(e(i.settings.selected[t].toString().replace("/","\\/"),i.container),!1!==i.settings.rules.multiple&&t>0)})),this.settings.selected=!1),this.callback("onload",[i]))},get:function(t,i,s){return i||(i=this.settings.data.type),s||(s=this.settings.data.opts),(new e.tree.datastores[i]).get(t,this,s)},attach_events:function(){var i=this;this.container.bind("mousedown.jstree",(function(e){if(t.drag_drop.isdown)return t.drag_drop.move_type=!1,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1})).bind("mouseup.jstree",(function(e){setTimeout((function(){i.focus.apply(i)}),5)})).bind("click.jstree",(function(e){return!0})),this.container.on("click","li",(function(t){return"LI"!=t.target.tagName||(i.off_height(),t.pageY-e(t.target).offset().top>i.li_height||(i.toggle_branch.apply(i,[t.target]),t.stopPropagation(),!1))})),this.container.on("click.jstree","li a",(function(e){return!(!e.which||3!=e.which)||(i.locked?(e.preventDefault(),e.target.blur(),i.error("LOCKED")):(i.select_branch.apply(i,[e.target,e.ctrlKey||"on"==i.settings.rules.multiple]),i.inp&&i.inp.blur(),e.preventDefault(),e.target.blur(),!1))})).on("dblclick.jstree","li a",(function(e){if(i.locked)return e.preventDefault(),e.stopPropagation(),e.target.blur(),i.error("LOCKED");i.callback("ondblclk",[i.get_node(e.target).get(0),i]),e.preventDefault(),e.stopPropagation(),e.target.blur()})).on("contextmenu.jstree","li a",(function(e){return i.locked?(e.target.blur(),i.error("LOCKED")):i.callback("onrgtclk",[i.get_node(e.target).get(0),i,e])})).on("mouseover.jstree","li a",(function(e){if(i.locked)return e.preventDefault(),e.stopPropagation(),i.error("LOCKED");!1===i.hovered||"A"!=e.target.tagName&&"INS"!=e.target.tagName||(i.hovered.children("a").removeClass("hover"),i.hovered=!1),i.callback("onhover",[i.get_node(e.target).get(0),i])})).on("mousedown.jstree","li a",(function(s){if("left"==i.settings.rules.drag_button&&s.which&&1!=s.which)return!0;if("right"==i.settings.rules.drag_button&&s.which&&3!=s.which)return!0;if(i.focus.apply(i),i.locked)return i.error("LOCKED");var n=i.get_node(s.target);if(0!=i.settings.rules.multiple&&i.selected_arr.length>1&&n.children("a:eq(0)").hasClass("clicked")){var r=0;for(var a in i.selected_arr)i.selected_arr.hasOwnProperty(a)&&i.check("draggable",i.selected_arr[a])&&(i.selected_arr[a].addClass("dragged"),t.drag_drop.origin_tree=i,r++);if(r>0){i.check("draggable",n)?t.drag_drop.drag_node=n:t.drag_drop.drag_node=i.container.find("li.dragged:eq(0)"),t.drag_drop.isdown=!0,t.drag_drop.drag_help=e("<div id='jstree-dragged' class='tree "+(""!=i.settings.ui.theme_name?" tree-"+i.settings.ui.theme_name:"")+"' />").append("<ul class='"+i.container.children("ul:eq(0)").get(0).className+"' />");var o=t.drag_drop.drag_node.clone();i.settings.languages.length>0&&o.find("a").not("."+i.current_lang).hide(),t.drag_drop.drag_help.children("ul:eq(0)").append(o),t.drag_drop.drag_help.find("li:eq(0)").removeClass("last").addClass("last").children("a").html("<ins>&nbsp;</ins>Multiple selection").end().children("ul").remove(),t.drag_drop.dragged=i.container.find("li.dragged")}}else i.check("draggable",n)&&(t.drag_drop.drag_node=n,t.drag_drop.drag_help=e("<div id='jstree-dragged' class='tree "+(""!=i.settings.ui.theme_name?" tree-"+i.settings.ui.theme_name:"")+"' />").append("<ul class='"+i.container.children("ul:eq(0)").get(0).className+"' />"),o=n.clone(),i.settings.languages.length>0&&o.find("a").not("."+i.current_lang).hide(),t.drag_drop.drag_help.children("ul:eq(0)").append(o),t.drag_drop.drag_help.find("li:eq(0)").removeClass("last").addClass("last"),t.drag_drop.isdown=!0,t.drag_drop.foreign=!1,t.drag_drop.origin_tree=i,n.addClass("dragged"),t.drag_drop.dragged=i.container.find("li.dragged"));return t.drag_drop.init_x=s.pageX,t.drag_drop.init_y=s.pageY,n.blur(),s.preventDefault(),s.stopPropagation(),!1}))},focus:function(){if(this.locked)return!1;t.focused!=this.cntr&&(t.focused=this.cntr,this.callback("onfocus",[this]))},off_height:function(){if(!1===this.offset){this.container.css({position:"relative"}),this.offset=this.container.offset();var t=0;(t=parseInt(e.curCSS(this.container.get(0),"paddingTop",!0),10))&&(this.offset.top+=t),(t=parseInt(e.curCSS(this.container.get(0),"borderTopWidth",!0),10))&&(this.offset.top+=t),this.container.css({position:""})}this.li_height||(t=this.container.find("ul li.closed, ul li.leaf").eq(0),this.li_height=t.height(),t.children("ul:eq(0)").size()&&(this.li_height-=t.children("ul:eq(0)").height()),this.li_height||(this.li_height=18))},scroll_check:function(e,i){var s=this,n=s.container,r=s.container.offset(),a=n.scrollTop(),o=n.scrollLeft(),l=n.get(0).scrollWidth>n.width()?40:20;i-r.top<20&&n.scrollTop(Math.max(a-s.settings.ui.scroll_spd,0)),n.height()-(i-r.top)<l&&n.scrollTop(a+s.settings.ui.scroll_spd),e-r.left<20&&n.scrollLeft(Math.max(o-s.settings.ui.scroll_spd,0)),n.width()-(e-r.left)<40&&n.scrollLeft(o+s.settings.ui.scroll_spd),n.scrollLeft()==o&&n.scrollTop()==a||(t.drag_drop.move_type=!1,t.drag_drop.ref_node=!1,t.drag_drop.marker.hide()),t.drag_drop.scroll_time=setTimeout((function(){s.scroll_check(e,i)}),50)},scroll_into_view:function(e){if(!(e=e?this.get_node(e):this.selected))return!1;var t=e.offset().top,i=this.container.offset().top,s=i+this.container.height(),n=this.container.get(0).scrollWidth>this.container.width()?40:20;t+5<i&&this.container.scrollTop(this.container.scrollTop()-(i-t+5)),t+n>s&&this.container.scrollTop(this.container.scrollTop()+(t+n-s))},get_node:function(t){return e(t).closest("li")},get_type:function(e){if(e=e?this.get_node(e):this.selected)return e.attr(this.settings.rules.type_attr)||"default"},set_type:function(e,t){(t=t?this.get_node(t):this.selected)&&e&&t.attr(this.settings.rules.type_attr,e)},get_text:function(e,t){if(!(e=this.get_node(e))||0==e.size())return"";this.settings.languages&&this.settings.languages.length?(t=t||this.current_lang,e=e.children("a."+t)):e=e.children("a:visible");var i="";return e.contents().each((function(){if(3==this.nodeType)return i=this.data,!1})),i},check:function(e,t){if(this.locked)return!1;var i=!1;if(-1===t)void 0!==this.settings.rules[e]&&(i=this.settings.rules[e]);else{if(!(t=t?this.get_node(t):this.selected))return;var s=this.get_type(t);void 0!==this.settings.types[s]&&void 0!==this.settings.types[s][e]?i=this.settings.types[s][e]:void 0!==this.settings.types.default&&void 0!==this.settings.types.default[e]&&(i=this.settings.types.default[e])}return"function"==typeof i&&(i=i.call(null,t,this)),this.callback("check",[e,t,i,this])},check_move:function(i,s,n){if(this.locked)return!1;if(e(s).closest("li.dragged").size())return!1;var r=i.parents(".tree:eq(0)").get(0),a=s.parents(".tree:eq(0)").get(0);if(r&&r!=a&&("none"==(f=e.jstree.reference(a.id).settings.rules.multitree)||e.isArray(f)&&-1==e.inArray(r.id,f)))return!1;var o="inside"!=n?this.parent(s):this.get_node(s);if(i=this.get_node(i),0==o)return!1;var l={max_depth:this.settings.rules.use_max_depth?this.check("max_depth",o):-1,max_children:this.settings.rules.use_max_children?this.check("max_children",o):-1,valid_children:this.check("valid_children",o)},c="string"==typeof i?i:this.get_type(i);if(void 0!==l.valid_children&&("none"==l.valid_children||"object"==typeof l.valid_children&&-1==e.inArray(c,e.makeArray(l.valid_children))))return!1;if(this.settings.rules.use_max_children&&void 0!==l.max_children&&-1!=l.max_children){if(0==l.max_children)return!1;var h=1;if(1==t.drag_drop.moving&&0==t.drag_drop.foreign&&(h=t.drag_drop.dragged.size(),h-=o.find("> ul > li.dragged").size()),l.max_children<o.find("> ul > li").size()+h)return!1}if(this.settings.rules.use_max_depth){if(void 0!==l.max_depth&&0===l.max_depth)return this.error("MOVE: MAX-DEPTH REACHED");for(var d=l.max_depth>0&&l.max_depth,u=0,p=o;-1!==p;){var f;if(p=this.parent(p),u++,(f=this.check("max_depth",p))>=0&&(d=!1===d?f-u:Math.min(d,f-u)),!1!==d&&d<=0)return this.error("MOVE: MAX-DEPTH REACHED")}if(!1!==d&&d<=0)return this.error("MOVE: MAX-DEPTH REACHED");if(!1!==d){var g=1;if("string"!=typeof i)for(p=i;p.size()>0;){if(d-g<0)return this.error("MOVE: MAX-DEPTH REACHED");p=p.children("ul").children("li"),g++}}}return 0!=this.callback("check_move",[i,s,n,this])},hover_branch:function(e){return this.locked?this.error("LOCKED"):(e=this.get_node(e)).size()?this.check("clickable",e)?(this.hovered&&this.hovered.children("A").removeClass("hover"),this.hovered=e,this.hovered.children("a").addClass("hover"),void this.scroll_into_view(this.hovered)):this.error("SELECT: NODE NOT SELECTABLE"):this.error("HOVER: NOT A VALID NODE")},select_branch:function(e,t){if(this.locked)return this.error("LOCKED");e||!1===this.hovered||(e=this.hovered);var i=this;if(!(e=i.get_node(e)).size())return this.error("SELECT: NOT A VALID NODE");if(e.children("a").removeClass("hover"),!i.check("clickable",e))return this.error("SELECT: NODE NOT SELECTABLE");if(!1===i.callback("beforechange",[e.get(0),i]))return this.error("SELECT: STOPPED BY USER");if(0!=this.settings.rules.multiple&&t&&e.children("a.clicked").size()>0)return this.deselect_branch(e);if(0!=this.settings.rules.multiple&&t&&this.selected_arr.push(e),0!=this.settings.rules.multiple&&!t){for(var s in this.selected_arr)this.selected_arr.hasOwnProperty(s)&&(this.selected_arr[s].children("A").removeClass("clicked"),this.callback("ondeselect",[this.selected_arr[s].get(0),i]));this.selected_arr=[],this.selected_arr.push(e),this.selected&&this.selected.children("A").hasClass("clicked")&&(this.selected.children("A").removeClass("clicked"),this.callback("ondeselect",[this.selected.get(0),i]))}this.settings.rules.multiple||this.selected&&(this.selected.children("A").removeClass("clicked"),this.callback("ondeselect",[this.selected.get(0),i])),this.selected=e,!1!==this.hovered&&(this.hovered.children("A").removeClass("hover"),this.hovered=e),this.selected.children("a").addClass("clicked").end().parents("li.closed").each((function(){i.open_branch(this,!0)})),this.scroll_into_view(this.selected),this.callback("onselect",[this.selected.get(0),i]),this.callback("onchange",[this.selected.get(0),i])},deselect_branch:function(t){if(this.locked)return this.error("LOCKED");var i=this;if(0==(t=this.get_node(t)).children("a.clicked").size())return this.error("DESELECT: NODE NOT SELECTED");t.children("a").removeClass("clicked"),this.callback("ondeselect",[t.get(0),i]),0!=this.settings.rules.multiple&&this.selected_arr.length>1?(this.selected_arr=[],this.container.find("a.clicked").filter(":first-child").parent().each((function(){i.selected_arr.push(e(this))})),t.get(0)==this.selected.get(0)&&(this.selected=this.selected_arr[0])):(0!=this.settings.rules.multiple&&(this.selected_arr=[]),this.selected=!1),this.callback("onchange",[t.get(0),i])},toggle_branch:function(e){return this.locked?this.error("LOCKED"):(e=this.get_node(e)).hasClass("closed")?this.open_branch(e):e.hasClass("open")?this.close_branch(e):void 0},open_branch:function(t,i,s){var n=this;if(this.locked)return this.error("LOCKED");if(!(t=this.get_node(t)).size())return this.error("OPEN: NO SUCH NODE");if(t.hasClass("leaf"))return this.error("OPEN: OPENING LEAF NODE");if(this.settings.data.async&&0==t.find("li").size()){if(!1===this.callback("beforeopen",[t.get(0),this]))return this.error("OPEN: STOPPED BY USER");t.children("ul:eq(0)").remove().end().append("<ul><li class='last'><a class='loading' href='#'><ins>&nbsp;</ins>"+(n.settings.lang.loading||"Loading ...")+"</a></li></ul>"),t.removeClass("closed").addClass("open");var r=new e.jstree.datastores[this.settings.data.type];return r.load(this.callback("beforedata",[t,this]),this,this.settings.data.opts,(function(i){if(!(i=n.callback("ondata",[i,n]))||0==i.length)return t.removeClass("closed").removeClass("open").addClass("leaf").children("ul").remove(),void(s&&s.call());r.parse(i,n,n.settings.data.opts,(function(i){i=n.callback("onparse",[i,n]),t.children("ul:eq(0)").replaceWith(e("<ul>").html(i)),t.find("li:last-child").addClass("last").end().find("li:has(ul)").not(".open").addClass("closed"),t.find("li").not(".open").not(".closed").addClass("leaf"),n.open_branch.apply(n,[t]),s&&s.call()}))})),!0}return this.settings.data.async||!1!==this.callback("beforeopen",[t.get(0),this])?(parseInt(this.settings.ui.animation)>0&&!i?(t.children("ul:eq(0)").css("display","none"),t.removeClass("closed").addClass("open"),t.children("ul:eq(0)").slideDown(parseInt(this.settings.ui.animation),(function(){e(this).css("display",""),s&&s.call()}))):(t.removeClass("closed").addClass("open"),s&&s.call()),this.callback("onopen",[t.get(0),this]),!0):this.error("OPEN: STOPPED BY USER")},close_branch:function(t,i){if(this.locked)return this.error("LOCKED");var s=this;return(t=this.get_node(t)).size()?!1===s.callback("beforeclose",[t.get(0),s])?this.error("CLOSE: STOPPED BY USER"):(parseInt(this.settings.ui.animation)>0&&!i&&1==t.children("ul:eq(0)").size()?t.children("ul:eq(0)").slideUp(parseInt(this.settings.ui.animation),(function(){t.hasClass("open")&&t.removeClass("open").addClass("closed"),e(this).css("display","")})):t.hasClass("open")&&t.removeClass("open").addClass("closed"),this.selected&&!1!==this.settings.ui.selected_parent_close&&t.children("ul:eq(0)").find("a.clicked").size()>0&&(t.find("li:has(a.clicked)").each((function(){s.deselect_branch(this)})),"select_parent"==this.settings.ui.selected_parent_close&&0==t.children("a.clicked").size()&&this.select_branch(t,0!=this.settings.rules.multiple&&this.selected_arr.length>0)),void this.callback("onclose",[t.get(0),this])):this.error("CLOSE: NO SUCH NODE")},open_all:function(e,t){if(this.locked)return this.error("LOCKED");var i=this,s=(e=e?this.get_node(e):this.container).find("li.closed").size();t?this.cl_count--:this.cl_count=0,s>0?(this.cl_count+=s,e.find("li.closed").each((function(){var e=this;i.open_branch.apply(i,[this,!0,function(){i.open_all.apply(i,[e,!0])}])}))):0==this.cl_count&&this.callback("onopen_all",[this])},close_all:function(e){if(this.locked)return this.error("LOCKED");var t=this;(e=e?this.get_node(e):this.container).find("li.open").each((function(){t.close_branch(this,!0)})),this.callback("onclose_all",[this])},set_lang:function(i){if(!e.isArray(this.settings.languages)||0==this.settings.languages.length)return!1;if(this.locked)return this.error("LOCKED");if(e.inArray(i,this.settings.languages)||void 0===this.settings.languages[i]||(i=this.settings.languages[i]),void 0===i)return!1;if(i==this.current_lang)return!0;var s=!1,n="#"+this.container.attr("id");return!1!==(s=t.get_css(n+" ."+this.current_lang))&&(s.style.display="none"),!1!==(s=t.get_css(n+" ."+i))&&(s.style.display=""),this.current_lang=i,!0},get_lang:function(){return!(!e.isArray(this.settings.languages)||0==this.settings.languages.length)&&this.current_lang},create:function(t,i,s){if(this.locked)return this.error("LOCKED");var n=!1;if(-1==i?(n=!0,i=this.container):i=i?this.get_node(i):this.selected,!(n||i&&i.size()))return this.error("CREATE: NO NODE SELECTED");var r=s,a=i;if("before"==s&&(s=i.parent().children().index(i),i=i.parents("li:eq(0)")),"after"==s&&(s=i.parent().children().index(i)+1,i=i.parents("li:eq(0)")),n||0!=i.size()||(n=!0,i=this.container),!n){if(!this.check("creatable",i))return this.error("CREATE: CANNOT CREATE IN NODE");if(i.hasClass("closed")){if(this.settings.data.async&&0==i.children("ul").size()){var o=this;return this.open_branch(i,!0,(function(){o.create.apply(o,[t,i,s])}))}this.open_branch(i,!0)}}var l=!1;if((t=t?e.extend(!0,{},t):{}).attributes||(t.attributes={}),t.attributes[this.settings.rules.type_attr]||(t.attributes[this.settings.rules.type_attr]=this.get_type(a)||"default"),this.settings.languages.length){t.data||(t.data={},l=!0);for(var c=0;c<this.settings.languages.length;c++)t.data[this.settings.languages[c]]||(t.data[this.settings.languages[c]]="string"!=(typeof this.settings.lang.new_node).toLowerCase()&&this.settings.lang.new_node[c]?this.settings.lang.new_node[c]:this.settings.lang.new_node)}else t.data||(t.data=this.settings.lang.new_node,l=!0);t=this.callback("ondata",[t,this]);var h=e.jstree.datastores.json().parse(t,this);h=this.callback("onparse",[h,this]);var d=e(h);d.children("ul").size()?d.is(".open")||d.addClass("closed"):d.addClass("leaf"),d.find("li:last-child").addClass("last").end().find("li:has(ul)").not(".open").addClass("closed"),d.find("li").not(".open").not(".closed").addClass("leaf");var u={max_depth:this.settings.rules.use_max_depth?this.check("max_depth",n?-1:i):-1,max_children:this.settings.rules.use_max_children?this.check("max_children",n?-1:i):-1,valid_children:this.check("valid_children",n?-1:i)},p=this.get_type(d);if(void 0!==u.valid_children&&("none"==u.valid_children||e.isArray(u.valid_children)&&-1==e.inArray(p,u.valid_children)))return this.error("CREATE: NODE NOT A VALID CHILD");if(this.settings.rules.use_max_children&&void 0!==u.max_children&&-1!=u.max_children&&u.max_children>=this.children(i).size())return this.error("CREATE: MAX_CHILDREN REACHED");if(this.settings.rules.use_max_depth){if(void 0!==u.max_depth&&0===u.max_depth)return this.error("CREATE: MAX-DEPTH REACHED");for(var f=u.max_depth>0&&u.max_depth,g=(c=0,i);-1!==g&&!n;){g=this.parent(g),c++;var m=this.check("max_depth",g);if(m>=0&&(f=!1===f?m-c:Math.min(f,m-c)),!1!==f&&f<=0)return this.error("CREATE: MAX-DEPTH REACHED")}if(!1!==f&&f<=0)return this.error("CREATE: MAX-DEPTH REACHED");if(!1!==f){var v=1;for(g=d;g.size()>0;){if(f-v<0)return this.error("CREATE: MAX-DEPTH REACHED");g=g.children("ul").children("li"),v++}}}if("undefined"!=(typeof s).toLowerCase()&&"inside"!=s||(s="top"==this.settings.rules.createat?0:i.children("ul:eq(0)").children("li").size()),0==i.children("ul").size()||1==n&&0==i.children("ul").children("li").size())if(n)_=this.moved(d,this.container.children("ul:eq(0)"),"inside",!0);else var _=this.moved(d,i.children("a:eq(0)"),"inside",!0);else _="before"==r&&i.children("ul:eq(0)").children("li:nth-child("+(s+1)+")").size()?this.moved(d,i.children("ul:eq(0)").children("li:nth-child("+(s+1)+")").children("a:eq(0)"),"before",!0):"after"==r&&i.children("ul:eq(0)").children("li:nth-child("+s+")").size()?this.moved(d,i.children("ul:eq(0)").children("li:nth-child("+s+")").children("a:eq(0)"),"after",!0):i.children("ul:eq(0)").children("li:nth-child("+(s+1)+")").size()?this.moved(d,i.children("ul:eq(0)").children("li:nth-child("+(s+1)+")").children("a:eq(0)"),"before",!0):this.moved(d,i.children("ul:eq(0)").children("li:last").children("a:eq(0)"),"after",!0);return!1===_?this.error("CREATE: ABORTED"):(l&&(this.select_branch(d.children("a:eq(0)")),this.rename()),d)},rename:function(t,i){if(this.locked)return this.error("LOCKED");t=t?this.get_node(t):this.selected;var s=this;if(!t||!t.size())return this.error("RENAME: NO NODE SELECTED");if(!this.check("renameable",t))return this.error("RENAME: NODE NOT RENAMABLE");if(!this.callback("beforerename",[t.get(0),s.current_lang,s]))return this.error("RENAME: STOPPED BY USER");t.parents("li.closed").each((function(){s.open_branch(this)})),t=this.current_lang?t.find("a."+this.current_lang):t.find("a:first");var n={};n[this.container.attr("id")]=this.get_rollback();var r=t.children("ins").clone();if("string"==(typeof i).toLowerCase())t.text(i).prepend(r),s.callback("onrename",[s.get_node(t).get(0),s,n]);else{var a="";t.contents().each((function(){if(3==this.nodeType)return a=this.data,!1})),s.inp=e("<input type='text' autocomplete='off' />"),s.inp.val(a.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<")).bind("mousedown",(function(e){e.stopPropagation()})).bind("mouseup",(function(e){e.stopPropagation()})).bind("click",(function(e){e.stopPropagation()})).bind("keyup",(function(e){var t=e.keyCode||e.which;if(27==t)return this.value=a,void this.blur();13!=t||this.blur()})),s.inp.blur((function(e){""==this.value&&(this.value=a),t.text(this.value).prepend(r),t.get(0).style.display="",t.prevAll("span").remove(),s.inp=!1,s.callback("onrename",[s.get_node(t).get(0),s,n])}));var o=e("<span />").addClass(t.attr("class")).append(r).append(s.inp);t.get(0).style.display="none",t.parent().prepend(o),s.inp.get(0).focus(),s.inp.get(0).select()}},remove:function(t){if(this.locked)return this.error("LOCKED");var i=this,s={};if(s[this.container.attr("id")]=this.get_rollback(),!t||this.selected&&this.get_node(t).get(0)==this.selected.get(0)){if(!this.selected)return this.error("DELETE: NO NODE SELECTED");if(!this.check("deletable",this.selected))return this.error("DELETE: NODE NOT DELETABLE");if(!this.callback("beforedelete",[this.selected.get(0),i]))return this.error("DELETE: STOPPED BY USER");if($parent=this.selected.parent(),t=this.selected,0==this.settings.rules.multiple||1==this.selected_arr.length)var n=!0,r="select_previous"==this.settings.ui.selected_delete&&this.prev(this.selected);t=t.remove(),$parent.children("li:last").addClass("last"),0==$parent.children("li").size()&&($li=$parent.parents("li:eq(0)"),$li.removeClass("open").removeClass("closed").addClass("leaf").children("ul").remove()),n||0==this.settings.rules.multiple||(i=this,this.selected_arr=[],this.container.find("a.clicked").filter(":first-child").parent().each((function(){i.selected_arr.push(e(this))})),this.selected_arr.length>0&&(this.selected=this.selected_arr[0],this.remove())),n&&r&&this.select_branch(r),this.callback("ondelete",[t.get(0),this,s])}else if((t=this.get_node(t)).size()){if(!this.check("deletable",t))return this.error("DELETE: NODE NOT DELETABLE");if(!this.callback("beforedelete",[t.get(0),i]))return this.error("DELETE: STOPPED BY USER");if($parent=t.parent(),t.find("a.clicked").size()){var a=!1;i.selected_arr=[],this.container.find("a.clicked").filter(":first-child").parent().each((function(){if(a||this!=i.selected.get(0)||(a=!0),-1!=e(this).parents().index(t))return!0;i.selected_arr.push(e(this))})),a&&(this.selected=this.selected_arr[0]||!1)}t=t.remove(),$parent.children("li:last").addClass("last"),0==$parent.children("li").size()&&($li=$parent.parents("li:eq(0)"),$li.removeClass("open").removeClass("closed").addClass("leaf").children("ul").remove()),this.callback("ondelete",[t.get(0),this,s])}},next:function(e,t){return!!(e=this.get_node(e)).size()&&(t?e.nextAll("li").size()>0&&e.nextAll("li:eq(0)"):e.hasClass("open")?e.find("li:eq(0)"):e.nextAll("li").size()>0?e.nextAll("li:eq(0)"):e.parents("li").next("li").eq(0))},prev:function(e,t){if(!(e=this.get_node(e)).size())return!1;if(t)return e.prevAll("li").size()>0&&e.prevAll("li:eq(0)");if(e.prev("li").size()){for(e=e.prev("li").eq(0);e.hasClass("open");)e=e.children("ul:eq(0)").children("li:last");return e}return!!e.parents("li:eq(0)").size()&&e.parents("li:eq(0)")},parent:function(e){return!!(e=this.get_node(e)).size()&&(e.parents("li:eq(0)").size()?e.parents("li:eq(0)"):-1)},children:function(e){return-1===e?this.container.children("ul:eq(0)").children("li"):!!(e=this.get_node(e)).size()&&e.children("ul:eq(0)").children("li")},toggle_dots:function(){this.settings.ui.dots?(this.settings.ui.dots=!1,this.container.children("ul:eq(0)").addClass("no_dots")):(this.settings.ui.dots=!0,this.container.children("ul:eq(0)").removeClass("no_dots"))},callback:function(t,i){var s=!1,n=null;for(var r in this.settings.plugins)if("object"==typeof e.jstree.plugins[r]&&((s=e.jstree.plugins[r]).callbacks&&"function"==typeof s.callbacks[t]&&(n=s.callbacks[t].apply(this,i)),null!=n)){if("ondata"!=t&&"onparse"!=t)return n;i[0]=n}if("function"==typeof(s=this.settings.callback[t]))return s.apply(null,i)},get_rollback:function(){var e={};return e.html=this.container.html(),e.selected=!!this.selected&&this.selected.attr("id"),e},moved:function(i,s,n,r,a,o){i=e(i);var l=e(i).parents("ul:eq(0)"),c=e(s);if(c.is("ins")&&(c=c.parent()),o||((o={})[this.container.attr("id")]=this.get_rollback(),r||((d=i.size()>1?i.eq(0).parents(".tree:eq(0)"):i.parents(".tree:eq(0)")).get(0)!=this.container.get(0)&&(d=t.inst[d.attr("id")],o[d.container.attr("id")]=d.get_rollback()),delete d)),"inside"==n&&this.settings.data.async){var h=this;if(this.get_node(c).hasClass("closed"))return this.open_branch(this.get_node(c),!0,(function(){h.moved.apply(h,[i,s,n,r,a,o])}));if(1==this.get_node(c).find("> ul > li > a.loading").size())return void setTimeout((function(){h.moved.apply(h,[i,s,n,r,a])}),200)}if(i.size()>1){h=this;var d=this.moved(i.eq(0),s,n,!1,a,o);return i.each((function(e){0!=e&&d&&(d=h.moved(this,d.children("a:eq(0)"),"after",!1,a,o))})),i}if(a?(_what=i.clone(),_what.each((function(t){this.id=this.id+"_copy",e(this).find("li").each((function(){this.id=this.id+"_copy"})),e(this).removeClass("dragged").find("a.clicked").removeClass("clicked").end().find("li.dragged").removeClass("dragged")}))):_what=i,r){if(!this.callback("beforecreate",[this.get_node(i).get(0),this.get_node(s).get(0),n,this]))return!1}else if(!this.callback("beforemove",[this.get_node(i).get(0),this.get_node(s).get(0),n,this]))return!1;if(!r&&(d=i.parents(".tree:eq(0)")).get(0)!=this.container.get(0)){if((d=t.inst[d.attr("id")]).settings.languages.length){var u=[];if(0==this.settings.languages.length)u.push("."+d.current_lang);else for(var p in this.settings.languages)if(this.settings.languages.hasOwnProperty(p))for(var f in d.settings.languages)d.settings.languages.hasOwnProperty(f)&&this.settings.languages[p]==d.settings.languages[f]&&u.push("."+this.settings.languages[p]);if(0==u.length)return this.error("MOVE: NO COMMON LANGUAGES");_what.find("a").not(u.join(",")).remove()}_what.find("a.clicked").removeClass("clicked")}switch(i=_what,n){case"before":c.parents("ul:eq(0)").children("li.last").removeClass("last"),c.parent().before(i.removeClass("last")),c.parents("ul:eq(0)").children("li:last").addClass("last");break;case"after":c.parents("ul:eq(0)").children("li.last").removeClass("last"),c.parent().after(i.removeClass("last")),c.parents("ul:eq(0)").children("li:last").addClass("last");break;case"inside":var g;c.parent().children("ul:first").size()?"top"==this.settings.rules.createat?(c.parent().children("ul:first").prepend(i.removeClass("last")).children("li:last").addClass("last"),(g=c.parent().children("ul:first").children("li:first")).size()&&(n="before",s=g)):((g=c.parent().children("ul:first").children(".last")).size()&&(n="after",s=g),c.parent().children("ul:first").children(".last").removeClass("last").end().append(i.removeClass("last")).children("li:last").addClass("last")):(i.addClass("last"),c.parent().removeClass("leaf").append("<ul/>"),c.parent().hasClass("open")||c.parent().addClass("closed"),c.parent().children("ul:first").prepend(i)),c.parent().hasClass("closed")&&this.open_branch(c)}if(0==l.find("li").size()){var m=l.parent();m.removeClass("open").removeClass("closed").addClass("leaf"),m.is(".tree")||m.children("ul").remove(),m.parents("ul:eq(0)").children("li.last").removeClass("last").end().children("li:last").addClass("last")}else l.children("li.last").removeClass("last"),l.children("li:last").addClass("last");return a?this.callback("oncopy",[this.get_node(i).get(0),this.get_node(s).get(0),n,this,o]):r?this.callback("oncreate",[this.get_node(i).get(0),c.is("ul")?-1:this.get_node(s).get(0),n,this,o]):this.callback("onmove",[this.get_node(i).get(0),this.get_node(s).get(0),n,this,o]),i},error:function(e){return this.callback("error",[e,this]),!1},lock:function(e){this.locked=e,this.locked?this.container.children("ul:eq(0)").addClass("locked"):this.container.children("ul:eq(0)").removeClass("locked")},cut:function(e){return this.locked?this.error("LOCKED"):(e=e?this.get_node(e):this.container.find("a.clicked").filter(":first-child").parent())&&e.size()?(t.cut_copy.copy_nodes=!1,void(t.cut_copy.cut_nodes=e)):this.error("CUT: NO NODE SELECTED")},copy:function(e){return this.locked?this.error("LOCKED"):(e=e?this.get_node(e):this.container.find("a.clicked").filter(":first-child").parent())&&e.size()?(t.cut_copy.copy_nodes=e,void(t.cut_copy.cut_nodes=!1)):this.error("COPY: NO NODE SELECTED")},paste:function(e,i){if(this.locked)return this.error("LOCKED");var s=!1;if(-1==e?(s=!0,e=this.container):e=e?this.get_node(e):this.selected,!(s||e&&e.size()))return this.error("PASTE: NO NODE SELECTED");if(!t.cut_copy.copy_nodes&&!t.cut_copy.cut_nodes)return this.error("PASTE: NOTHING TO DO");var n=i;if("before"==i?(i=e.parent().children().index(e),e=e.parents("li:eq(0)")):"after"==i?(i=e.parent().children().index(e)+1,e=e.parents("li:eq(0)")):"undefined"!=(typeof i).toLowerCase()&&"inside"!=i||(i="top"==this.settings.rules.createat?0:e.children("ul:eq(0)").children("li").size()),s||0!=e.size()||(s=!0,e=this.container),t.cut_copy.copy_nodes&&t.cut_copy.copy_nodes.size()){var r=!0;if(!s&&!this.check_move(t.cut_copy.copy_nodes,e.children("a:eq(0)"),"inside"))return!1;0==e.children("ul").size()||1==s&&0==e.children("ul").children("li").size()?s?this.moved(t.cut_copy.copy_nodes,this.container.children("ul:eq(0)"),"inside",!1,!0):this.moved(t.cut_copy.copy_nodes,e.children("a:eq(0)"),"inside",!1,!0):"before"==n&&e.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").size()?this.moved(t.cut_copy.copy_nodes,e.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").children("a:eq(0)"),"before",!1,!0):"after"==n&&e.children("ul:eq(0)").children("li:nth-child("+i+")").size()?this.moved(t.cut_copy.copy_nodes,e.children("ul:eq(0)").children("li:nth-child("+i+")").children("a:eq(0)"),"after",!1,!0):e.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").size()?this.moved(t.cut_copy.copy_nodes,e.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").children("a:eq(0)"),"before",!1,!0):this.moved(t.cut_copy.copy_nodes,e.children("ul:eq(0)").children("li:last").children("a:eq(0)"),"after",!1,!0),t.cut_copy.copy_nodes=!1}if(t.cut_copy.cut_nodes&&t.cut_copy.cut_nodes.size()){if(r=!0,e.parents().andSelf().each((function(){if(-1!=t.cut_copy.cut_nodes.index(this))return r=!1,!1})),!r)return this.error("Invalid paste");if(!s&&!this.check_move(t.cut_copy.cut_nodes,e.children("a:eq(0)"),"inside"))return!1;0==e.children("ul").size()||1==s&&0==e.children("ul").children("li").size()?s?this.moved(t.cut_copy.cut_nodes,this.container.children("ul:eq(0)"),"inside"):this.moved(t.cut_copy.cut_nodes,e.children("a:eq(0)"),"inside"):"before"==n&&e.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").size()?this.moved(t.cut_copy.cut_nodes,e.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").children("a:eq(0)"),"before"):"after"==n&&e.children("ul:eq(0)").children("li:nth-child("+i+")").size()?this.moved(t.cut_copy.cut_nodes,e.children("ul:eq(0)").children("li:nth-child("+i+")").children("a:eq(0)"),"after"):e.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").size()?this.moved(t.cut_copy.cut_nodes,e.children("ul:eq(0)").children("li:nth-child("+(i+1)+")").children("a:eq(0)"),"before"):this.moved(t.cut_copy.cut_nodes,e.children("ul:eq(0)").children("li:last").children("a:eq(0)"),"after"),t.cut_copy.cut_nodes=!1}},search:function(t,i){var s=this;if((!t||this.srch&&t!=this.srch)&&(this.srch="",this.srch_opn=!1,this.container.find("a.search").removeClass("search")),this.srch=t,t)if(i||(i="contains"),this.settings.data.async)if(this.srch_opn)if(this.srch_opn.length){if(this.srch_opn&&this.srch_opn.length){for(var n=!1,r=0;r<this.srch_opn.length;r++)if(this.get_node("#"+this.srch_opn[r]).size()>0){n=!0;var a="#"+this.srch_opn[r];delete this.srch_opn[r],this.open_branch(a,!0,(function(){s.search.apply(s,[t,i])}))}n||(this.srch_opn=[],s.search.apply(s,[t,i]))}}else{this.srch_opn=!1;var o="a";this.settings.languages.length&&(o+="."+this.current_lang),this.callback("onsearch",[this.container.find(o+":"+i+"('"+t+"')"),this])}else{var l=e.extend({search:t},this.callback("beforedata",[!1,this]));e.ajax({type:this.settings.data.opts.method,url:this.settings.data.opts.url,data:l,dataType:"text",success:function(n){s.srch_opn=e.unique(n.split(",")),s.search.apply(s,[t,i])}})}else{o="a",this.settings.languages.length&&(o+="."+this.current_lang);var c=this.container.find(o+":"+i+"('"+t+"')");c.parents("li.closed").each((function(){s.open_branch(this,!0)})),this.callback("onsearch",[c,this])}},add_sheet:t.add_sheet,destroy:function(){if(this.callback("ondestroy",[this]),this.container.unbind(".jstree"),e("#"+this.container.attr("id")).die("click.jstree").die("dblclick.jstree").die("mouseover.jstree").die("mouseout.jstree").die("mousedown.jstree"),this.container.removeClass("tree ui-widget ui-widget-content tree-default tree-"+this.settings.ui.theme_name).children("ul").removeClass("no_dots ltr locked").find("li").removeClass("leaf").removeClass("open").removeClass("closed").removeClass("last").children("a").removeClass("clicked hover search"),this.cntr==t.focused)for(var i in t.inst)if(i!=this.cntr&&i!=this.container.attr("id")){t.inst[i].focus();break}t.inst[this.cntr]=!1,t.inst[this.container.attr("id")]=!1,delete t.inst[this.cntr],delete t.inst[this.container.attr("id")],t.cntr--}}}e.jstree={datastores:{},plugins:{},defaults:{data:{async:!1,type:"html",opts:{method:"GET",url:!1}},selected:!1,opened:[],languages:[],ui:{dots:!0,animation:0,scroll_spd:4,theme_path:!1,theme_name:"default",selected_parent_close:"select_parent",selected_delete:"select_previous"},types:{default:{clickable:!0,renameable:!0,deletable:!0,creatable:!0,draggable:!0,max_children:-1,max_depth:-1,valid_children:"all",icon:{image:!1,position:!1}}},rules:{multiple:!1,multitree:"none",type_attr:"rel",createat:"bottom",drag_copy:"ctrl",drag_button:"left",use_max_children:!0,use_max_depth:!0,max_children:-1,max_depth:-1,valid_children:"all"},lang:{new_node:"New folder",loading:"Loading ..."},callback:{beforechange:function(e,t){return!0},beforeopen:function(e,t){return!0},beforeclose:function(e,t){return!0},beforemove:function(e,t,i,s){return!0},beforecreate:function(e,t,i,s){return!0},beforerename:function(e,t,i){return!0},beforedelete:function(e,t){return!0},beforedata:function(t,i){return{id:e(t).attr("id")||0}},ondata:function(e,t){return e},onparse:function(e,t){return e},onhover:function(e,t){},onselect:function(e,t){},ondeselect:function(e,t){},onchange:function(e,t){},onrename:function(e,t,i){},onmove:function(e,t,i,s,n){},oncopy:function(e,t,i,s,n){},oncreate:function(e,t,i,s,n){},ondelete:function(e,t,i){},onopen:function(e,t){},onopen_all:function(e){},onclose_all:function(e){},onclose:function(e,t){},error:function(e,t){},ondblclk:function(e,t){t.toggle_branch.call(t,e),t.select_branch.call(t,e)},onrgtclk:function(e,t,i){},onload:function(e){},oninit:function(e){},onfocus:function(e){},ondestroy:function(e){},onsearch:function(e,t){e.addClass("search")},ondrop:function(e,t,i,s){},check:function(e,t,i,s){return i},check_move:function(e,t,i,s){return!0}},plugins:{}},create:function(){return new t},focused:function(){return t.inst[t.focused]},reference:function(i){var s=e(i);return s.size()||(s=e("#"+i)),s.size()?(s=s.is(".tree")?s.attr("id"):s.parents(".tree:eq(0)").attr("id"),t.inst[s]||null):null},rollback:function(i){for(var s in i)if(i.hasOwnProperty(s)){var n=t.inst[s],r=!n.locked;r&&n.lock(!0),n.inp=!1,n.container.html(i[s].html).find(".dragged").removeClass("dragged").end().find(".hover").removeClass("hover"),i[s].selected&&(n.selected=e("#"+i[s].selected),n.selected_arr=[],n.container.find("a.clicked").each((function(){n.selected_arr.push(n.get_node(this))}))),r&&n.lock(!1),delete r,delete n}},drop_mode:function(i){i=e.extend(i,{show:!1,type:"default",str:"Foreign node"}),t.drag_drop.foreign=!0,t.drag_drop.isdown=!0,t.drag_drop.moving=!0,t.drag_drop.appended=!1,t.drag_drop.f_type=i.type,t.drag_drop.f_data=i,i.show?(t.drag_drop.drag_help=e("<div id='jstree-dragged' class='tree tree-default'><ul><li class='last dragged foreign'><a href='#'><ins>&nbsp;</ins>"+i.str+"</a></li></ul></div>"),t.drag_drop.drag_node=t.drag_drop.drag_help.find("li:eq(0)")):(t.drag_drop.drag_help=!1,t.drag_drop.drag_node=!1),!1!==e.jstree.drag_start&&e.jstree.drag_start.call(null,!1)},drag_start:!1,drag:!1,drag_end:!1},e.fn.jstree=function(i){return this.each((function(){var s=e.extend({},i);t.inst&&t.inst[e(this).attr("id")]&&t.inst[e(this).attr("id")].destroy(),!1!==s&&(new t).init(this,s)}))},t.cntr=0,t.inst={},t.themes=[],t.drag_drop={isdown:!1,drag_node:!1,drag_help:!1,dragged:!1,init_x:!1,init_y:!1,moving:!1,origin_tree:!1,marker:!1,move_type:!1,ref_node:!1,appended:!1,foreign:!1,droppable:[],open_time:!1,scroll_time:!1},t.mouseup=function(i){var s,n=t.drag_drop;(n.open_time&&clearTimeout(n.open_time),n.scroll_time&&clearTimeout(n.scroll_time),n.moving&&!1!==e.jstree.drag_end&&e.jstree.drag_end.call(null,i,n),!1===n.foreign&&n.drag_node&&n.drag_node.size()&&(n.drag_help.remove(),n.move_type&&(s=t.inst[n.ref_node.parents(".tree:eq(0)").attr("id")])&&s.moved(n.dragged,n.ref_node,n.move_type,!1,"on"==n.origin_tree.settings.rules.drag_copy||"ctrl"==n.origin_tree.settings.rules.drag_copy&&i.ctrlKey),n.move_type=!1,n.ref_node=!1),!1!==n.foreign)&&(n.drag_help&&n.drag_help.remove(),n.move_type&&(s=t.inst[n.ref_node.parents(".tree:eq(0)").attr("id")])&&s.callback("ondrop",[n.f_data,s.get_node(n.ref_node).get(0),n.move_type,s]),n.foreign=!1,n.move_type=!1,n.ref_node=!1);if(t.drag_drop.marker&&t.drag_drop.marker.hide(),n.dragged&&n.dragged.size()&&n.dragged.removeClass("dragged"),n.dragged=!1,n.drag_help=!1,n.drag_node=!1,n.f_type=!1,n.f_data=!1,n.init_x=!1,n.init_y=!1,n.moving=!1,n.appended=!1,n.origin_tree=!1,n.isdown)return n.isdown=!1,i.preventDefault(),i.stopPropagation(),!1},t.mousemove=function(i){var s=t.drag_drop,n=!1;if(s.isdown){if(!s.moving&&Math.abs(s.init_x-i.pageX)<5&&Math.abs(s.init_y-i.pageY)<5)return i.preventDefault(),i.stopPropagation(),!1;if(s.moving||(t.drag_drop.moving=!0,n=!0),s.open_time&&clearTimeout(s.open_time),!1!==s.drag_help&&(s.appended||(!1!==s.foreign&&(s.origin_tree=e.jstree.focused()),e("body").append(s.drag_help),s.w=s.drag_help.width(),s.appended=!0),s.drag_help.css({left:i.pageX+5,top:i.pageY+15})),n&&!1!==e.jstree.drag_start&&e.jstree.drag_start.call(null,i,s),!1!==e.jstree.drag&&e.jstree.drag.call(null,i,s),"DIV"==i.target.tagName&&"jstree-marker"==i.target.id)return!1;var r=e(i.target);r.is("ins")&&(r=r.parent());var a=r.is(".tree")?r:r.parents(".tree:eq(0)");if(0==a.size()||!t.inst[a.attr("id")])return s.scroll_time&&clearTimeout(s.scroll_time),!1!==s.drag_help&&s.drag_help.find("li:eq(0) ins").addClass("forbidden"),s.move_type=!1,s.ref_node=!1,t.drag_drop.marker.hide(),!1;var o=t.inst[a.attr("id")];o.off_height(),s.scroll_time&&clearTimeout(s.scroll_time),s.scroll_time=setTimeout((function(){o.scroll_check(i.pageX,i.pageY)}),50);var l=!1;if(a.scrollTop(),"A"==i.target.tagName||"INS"==i.target.tagName){if(r.is("#jstree-dragged"))return!1;o.get_node(i.target).hasClass("closed")&&(s.open_time=setTimeout((function(){o.open_branch(r)}),500));var c,h={x:(p=r.offset()).left-1,y:i.pageY-p.top};c=h.y<o.li_height/3+1?["before","inside","after"]:h.y>2*o.li_height/3-1?["after","inside","before"]:h.y<o.li_height/2?["inside","before","after"]:["inside","after","before"];var d=!1,u=0==s.foreign?s.origin_tree.container.find("li.dragged"):s.f_type;if(e.each(c,(function(e,t){if(o.check_move(u,r,t))return l=t,d=!0,!1})),d){switch(l){case"before":h.y=p.top-2,t.drag_drop.marker.attr("class","marker");break;case"after":h.y=p.top-2+o.li_height,t.drag_drop.marker.attr("class","marker");break;case"inside":h.x-=2,h.y=p.top-2+o.li_height/2,t.drag_drop.marker.attr("class","marker_plus")}s.move_type=l,s.ref_node=e(i.target),!1!==s.drag_help&&s.drag_help.find(".forbidden").removeClass("forbidden"),t.drag_drop.marker.css({left:h.x,top:h.y}).show()}}if((r.is(".tree")||r.is("ul"))&&0==r.find("li:eq(0)").size()){var p=r.offset();s.move_type="inside",s.ref_node=a.children("ul:eq(0)"),!1!==s.drag_help&&s.drag_help.find(".forbidden").removeClass("forbidden"),t.drag_drop.marker.attr("class","marker_plus"),t.drag_drop.marker.css({left:p.left+10,top:p.top+15}).show()}else("A"!=i.target.tagName&&"INS"!=i.target.tagName||!d)&&(!1!==s.drag_help&&s.drag_help.find("li:eq(0) ins").addClass("forbidden"),s.move_type=!1,s.ref_node=!1,t.drag_drop.marker.hide());return i.preventDefault(),i.stopPropagation(),!1}return!0},e((function(){e(document).bind("mousemove.jstree",t.mousemove),e(document).bind("mouseup.jstree",t.mouseup)})),t.cut_copy={copy_nodes:!1,cut_nodes:!1},t.css=!1,t.get_css=function(e,s){e=e.toLowerCase();var n=t.css.cssRules||t.css.rules,r=0;do{if(n.length&&r>n.length+5)return!1;if(n[r].selectorText&&n[r].selectorText.toLowerCase()==e)return 1==s?(t.css.removeRule&&document.styleSheets[i].removeRule(r),t.css.deleteRule&&document.styleSheets[i].deleteRule(r),!0):n[r]}while(n[++r]);return!1},t.add_css=function(e){return!t.get_css(e)&&(t.css.insertRule?t.css.insertRule(e+" { }",0):t.css.addRule(e,null,0),t.get_css(e))},t.remove_css=function(e){return t.get_css(e,!0)},t.add_sheet=function(e){if(e.str){var t=document.createElement("style");return t.type="text/css",t.styleSheet?t.styleSheet.cssText=e.str:t.appendChild(document.createTextNode(e.str)),document.getElementsByTagName("head")[0].appendChild(t),t.sheet}if(e.url){if(!document.createStyleSheet){var i=document.createElement("link");return i.rel="stylesheet",i.type="text/css",i.media="all",i.href=e.url,document.getElementsByTagName("head")[0].appendChild(i),i.styleSheet}try{document.createStyleSheet(e.url)}catch(e){}}},e((function(){var e=navigator.userAgent.toLowerCase(),i=(e.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],s='/* TREE LAYOUT */ .tree ul { margin:0 0 0 5px; padding:0 0 0 0; list-style-type:none; } .tree li { display:block; min-height:18px; line-height:18px; padding:0 0 0 15px; margin:0 0 0 0; /* Background fix */ clear:both; } .tree li ul { display:none; } .tree li a, .tree li span { display:inline-block;line-height:16px;height:16px;color:black;white-space:nowrap;text-decoration:none;padding:1px 4px 1px 4px;margin:0; } .tree li a:focus { outline: none; } .tree li a input, .tree li span input { margin:0;padding:0 0;display:inline-block;height:12px !important;border:1px solid white;background:white;font-size:10px;font-family:Verdana; } .tree li a input:not([class="xxx"]), .tree li span input:not([class="xxx"]) { padding:1px 0; } /* FOR DOTS */ .tree .ltr li.last { float:left; } .tree > ul li.last { overflow:visible; } /* OPEN OR CLOSE */ .tree li.open ul { display:block; } .tree li.closed ul { display:none !important; } /* FOR DRAGGING */ #jstree-dragged { position:absolute; top:-10px; left:-10px; margin:0; padding:0; } #jstree-dragged ul ul ul { display:none; } #jstree-marker { padding:0; margin:0; line-height:5px; font-size:1px; overflow:hidden; height:5px; position:absolute; left:-45px; top:-30px; z-index:1000; background-color:transparent; background-repeat:no-repeat; display:none; } #jstree-marker.marker { width:45px; background-position:-32px top; } #jstree-marker.marker_plus { width:5px; background-position:right top; } /* BACKGROUND DOTS */ .tree li li { overflow:hidden; } .tree > .ltr > li { display:table; } /* ICONS */ .tree ul ins { display:inline-block; text-decoration:none; width:16px; height:16px; } .tree .ltr ins { margin:0 4px 0 0px; } ';/msie/.test(e)&&!/opera/.test(e)&&(6==parseInt(i)&&(s+='.tree li { height:18px; zoom:1; } .tree li li { overflow:visible; } .tree .ltr li.last { margin-top: expression( (this.previousSibling && /open/.test(this.previousSibling.className) ) ? "-2px" : "0"); } .marker { width:45px; background-position:-32px top; } .marker_plus { width:5px; background-position:right top; }'),7==parseInt(i)&&(s+='.tree li li { overflow:visible; } .tree .ltr li.last { margin-top: expression( (this.previousSibling && /open/.test(this.previousSibling.className) ) ? "-2px" : "0"); }')),/opera/.test(e)&&(s+='.tree > ul > li.last:after { content:"."; display: block; height:1px; clear:both; visibility:hidden; }'),/mozilla/.test(e)&&!/(compatible|webkit)/.test(e)&&0==i.indexOf("1.8")&&(s+=".tree .ltr li a { display:inline; float:left; } .tree li ul { clear:both; }"),t.css=t.add_sheet({str:s})}))}(jQuery),(e=jQuery).extend(e.jstree.datastores,{html:function(){return{get:function(t,i,s){return t&&e(t).size()?e("<div>").append(i.get_node(t).clone()).html():i.container.children("ul:eq(0)").html()},parse:function(e,t,i,s){return s&&s.call(null,e),e},load:function(t,i,s,n){s.url?e.ajax({type:s.method,url:s.url,data:t,dataType:"html",success:function(e,t){n.call(null,e)},error:function(e,t,s){n.call(null,!1),i.error(s+" "+t)}}):n.call(null,s.static||i.container.children("ul:eq(0)").html())}}},json:function(){return{get:function(t,i,s){var n=this;if(t=t&&0!=e(t).size()?e(t):i.container.children("ul").children("li"),s||(s={}),s.outer_attrib||(s.outer_attrib=["id","rel","class"]),s.inner_attrib||(s.inner_attrib=[]),t.size()>1){var r=[];return t.each((function(){r.push(n.get(this,i,s))})),r}if(0==t.size())return[];var a={attributes:{},data:{}};for(var o in t.hasClass("open")&&(a.data.state="open"),t.hasClass("closed")&&(a.data.state="closed"),s.outer_attrib)s.outer_attrib.hasOwnProperty(o)&&(void 0!==(h="class"==s.outer_attrib[o]?t.attr(s.outer_attrib[o]).replace(/(^| )last( |$)/gi," ").replace(/(^| )(leaf|closed|open)( |$)/gi," "):t.attr(s.outer_attrib[o]))&&h.toString().replace(" ","").length>0&&(a.attributes[s.outer_attrib[o]]=h),delete h);if(i.settings.languages.length){for(var o in i.settings.languages)if(i.settings.languages.hasOwnProperty(o)){var l=t.children("a."+i.settings.languages[o]);if(s.force||s.inner_attrib.length||l.children("ins").get(0).style.backgroundImage.toString().length||l.children("ins").get(0).className.length){if(a.data[i.settings.languages[o]]={},a.data[i.settings.languages[o]].title=i.get_text(t,i.settings.languages[o]),l.children("ins").get(0).style.className.length&&(a.data[i.settings.languages[o]].icon=l.children("ins").get(0).style.className),l.children("ins").get(0).style.backgroundImage.length&&(a.data[i.settings.languages[o]].icon=l.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")),s.inner_attrib.length)for(var c in a.data[i.settings.languages[o]].attributes={},s.inner_attrib)s.inner_attrib.hasOwnProperty(c)&&(void 0!==(h=l.attr(s.inner_attrib[c]))&&h.toString().replace(" ","").length>0&&(a.data[i.settings.languages[o]].attributes[s.inner_attrib[c]]=h),delete h)}else a.data[i.settings.languages[o]]=i.get_text(t,i.settings.languages[o])}}else if(l=t.children("a"),a.data.title=i.get_text(t),l.children("ins").size()&&l.children("ins").get(0).className.length&&(a.data.icon=l.children("ins").get(0).className),l.children("ins").size()&&l.children("ins").get(0).style.backgroundImage.length&&(a.data.icon=l.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","")),s.inner_attrib.length)for(var c in a.data.attributes={},s.inner_attrib){var h;s.inner_attrib.hasOwnProperty(c)&&(void 0!==(h=l.attr(s.inner_attrib[c]))&&h.toString().replace(" ","").length>0&&(a.data.attributes[s.inner_attrib[c]]=h),delete h)}return t.children("ul").size()>0&&(a.children=[],t.children("ul").children("li").each((function(){a.children.push(n.get(this,i,s))}))),a},parse:function(e,t,i,s){if("[object Array]"===Object.prototype.toString.apply(e)){for(var n="",r=0;r<e.length;r++)"function"!=typeof e[r]&&(n+=this.parse(e[r],t,i));return s&&s.call(null,n),n}if(!e||!e.data)return s&&s.call(null,!1),"";n="",n+="<li ";var a=!1;if(e.attributes)for(var r in e.attributes)e.attributes.hasOwnProperty(r)&&("class"==r?(n+=" class='"+e.attributes[r]+" ","closed"!=e.state&&"open"!=e.state||(n+=" "+e.state+" "),n+="' ",a=!0):n+=" "+r+"='"+e.attributes[r]+"' ");if(a||"closed"!=e.state&&"open"!=e.state||(n+=" class='"+e.state+"' "),n+=">",t.settings.languages.length)for(r=0;r<t.settings.languages.length;r++){if((l={href:"",style:""}).class=t.settings.languages[r],e.data[t.settings.languages[r]]&&"undefined"!=(typeof e.data[t.settings.languages[r]].attributes).toLowerCase())for(var o in e.data[t.settings.languages[r]].attributes)e.data[t.settings.languages[r]].attributes.hasOwnProperty(o)&&("style"==o||"class"==o?l[o]+=" "+e.data[t.settings.languages[r]].attributes[o]:l[o]=e.data[t.settings.languages[r]].attributes[o]);for(var o in n+="<a",l)l.hasOwnProperty(o)&&(n+=" "+o+'="'+l[o]+'" ');n+=">",e.data[t.settings.languages[r]]&&e.data[t.settings.languages[r]].icon?n+="<ins "+(-1==e.data[t.settings.languages[r]].icon.indexOf("/")?" class='"+e.data[t.settings.languages[r]].icon+"' ":" style='background-image:url(\""+e.data[t.settings.languages[r]].icon+"\");' ")+">&nbsp;</ins>":n+="<ins>&nbsp;</ins>",n+=("undefined"!=(typeof e.data[t.settings.languages[r]].title).toLowerCase()?e.data[t.settings.languages[r]].title:e.data[t.settings.languages[r]])+"</a>"}else{var l={href:"",style:"",class:""};if("undefined"!=(typeof e.data.attributes).toLowerCase())for(var r in e.data.attributes)e.data.attributes.hasOwnProperty(r)&&("style"==r||"class"==r?l[r]+=" "+e.data.attributes[r]:l[r]=e.data.attributes[r]);for(var r in n+="<a",l)l.hasOwnProperty(r)&&(n+=" "+r+'="'+l[r]+'" ');n+=">",e.data.icon?n+="<ins "+(-1==e.data.icon.indexOf("/")?" class='"+e.data.icon+"' ":" style='background-image:url(\""+e.data.icon+"\");' ")+">&nbsp;</ins>":n+="<ins>&nbsp;</ins>",n+=("undefined"!=(typeof e.data.title).toLowerCase()?e.data.title:e.data)+"</a>"}if(e.children&&e.children.length){for(n+="<ul>",r=0;r<e.children.length;r++)n+=this.parse(e.children[r],t,i);n+="</ul>"}return n+="</li>",s&&s.call(null,n),n},load:function(t,i,s,n){s.static?n.call(null,s.static):e.ajax({type:s.method,url:s.url,data:t,dataType:"json",success:function(e,t){n.call(null,e)},error:function(e,t,s){n.call(null,!1),i.error(s+" "+t)}})}}}})},993:function(){var e;void 0===(e=jQuery).fn.each2&&e.extend(e.fn,{each2:function(t){for(var i=e([0]),s=-1,n=this.length;++s<n&&(i.context=i[0]=this[s])&&!1!==t.call(i[0],s,i););return this}}),function(e,t){"use strict";if(window.Select2===t){var i,s,n,r,a,o,l,c,h={x:0,y:0},d={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case d.LEFT:case d.RIGHT:case d.UP:case d.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case d.SHIFT:case d.CTRL:case d.ALT:return!0}return!!e.metaKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&e<=123}},u={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};o=e(document),c=1,r=function(){return c++},i=L(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(i){var s,n,a,o,c=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==t&&null!==i.element.data("select2")&&i.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+r()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",i.element.attr("title")),this.body=e(document.body),w(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",i.element.attr("style")),this.container.css(A(i.containerCss,this.opts.element)),this.container.addClass(A(i.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",C),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),w(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(A(i.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",C),this.results=s=this.container.find(c),this.search=n=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",C),this.results.on("mousemove",(function(i){var s=h;s!==t&&s.x===i.pageX&&s.y===i.pageY||e(i.target).trigger("mousemove-filtered",i)})),this.dropdown.on("mousemove-filtered",c,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",c,this.bind((function(e){this._touchEvent=!0,this.highlightUnderEvent(e)}))),this.dropdown.on("touchmove",c,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",c,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind((function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())}))),a=this.results,o=y(80,(function(e){a.trigger("scroll-debounced",e)})),a.on("scroll",(function(e){g(e.target,a.get())>=0&&o(e)})),this.dropdown.on("scroll-debounced",c,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",(function(e){e.stopPropagation()})),e(this.dropdown).on("change",".select2-input",(function(e){e.stopPropagation()})),e.fn.mousewheel&&s.mousewheel((function(e,t,i,n){var r=s.scrollTop();n>0&&r-n<=0?(s.scrollTop(0),C(e)):n<0&&s.get(0).scrollHeight-s.scrollTop()+n<=s.height()&&(s.scrollTop(s.get(0).scrollHeight-s.height()),C(e))})),b(n),n.on("keyup-change input paste",this.bind(this.updateResults)),n.on("focus",(function(){n.addClass("select2-focused")})),n.on("blur",(function(){n.removeClass("select2-focused")})),this.dropdown.on("mouseup",c,this.bind((function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))}))),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",(function(e){e.stopPropagation()})),this.lastSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var d=i.element.prop("disabled");d===t&&(d=!1),this.enable(!d);var u=i.element.prop("readonly");u===t&&(u=!1),this.readonly(u),l=l||function(){var t=e("<div class='select2-measure-scrollbar'></div>");t.appendTo(document.body);var i={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),i}(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",i.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,i=e.data("select2"),s=this;this.close(),e.length&&e[0].detachEvent&&s._sync&&e.each((function(){s._sync&&this.detachEvent("onpropertychange",s._sync)})),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,i!==t&&(i.container.remove(),i.liveRegion.remove(),i.dropdown.remove(),e.removeData("select2").off(".select2"),e.is("input[type='hidden']")?e.css("display",""):(e.show().prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())),j.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:m(e.attr("locked"),"locked")||m(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(i){var s,n,a,o,l=this;if("select"===(s=i.element).get(0).tagName.toLowerCase()&&(this.select=n=i.element),n&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],(function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")})),i.debug=i.debug||e.fn.select2.defaults.debug,i.debug&&console&&console.warn&&(null!=i.id&&console.warn("Select2: The `id` option has been removed in Select2 4.0.0, consider renaming your `id` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=i.text&&console.warn("Select2: The `text` option has been removed in Select2 4.0.0, consider renaming your `text` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=i.sortResults&&console.warn("Select2: the `sortResults` option has been renamed to `sorter` in Select2 4.0.0. "),null!=i.selectOnBlur&&console.warn("Select2: The `selectOnBlur` option has been renamed to `selectOnClose` in Select2 4.0.0."),null!=i.ajax&&null!=i.ajax.results&&console.warn("Select2: The `ajax.results` option has been renamed to `ajax.processResults` in Select2 4.0.0."),null!=i.formatNoResults&&console.warn("Select2: The `formatNoResults` option has been renamed to `language.noResults` in Select2 4.0.0."),null!=i.formatSearching&&console.warn("Select2: The `formatSearching` option has been renamed to `language.searching` in Select2 4.0.0."),null!=i.formatInputTooShort&&console.warn("Select2: The `formatInputTooShort` option has been renamed to `language.inputTooShort` in Select2 4.0.0."),null!=i.formatInputTooLong&&console.warn("Select2: The `formatInputTooLong` option has been renamed to `language.inputTooLong` in Select2 4.0.0."),null!=i.formatLoading&&console.warn("Select2: The `formatLoading` option has been renamed to `language.loadingMore` in Select2 4.0.0."),null!=i.formatSelectionTooBig&&console.warn("Select2: The `formatSelectionTooBig` option has been renamed to `language.maximumSelected` in Select2 4.0.0."),i.element.data("select2Tags")&&console.warn("Select2: The `data-select2-tags` attribute has been renamed to `data-tags` in Select2 4.0.0.")),null!=i.element.data("tags")){var c=i.element.data("tags");e.isArray(c)||(c=[]),i.element.data("select2Tags",c)}if(null!=i.sorter&&(i.sortResults=i.sorter),null!=i.selectOnClose&&(i.selectOnBlur=i.selectOnClose),null!=i.ajax&&e.isFunction(i.ajax.processResults)&&(i.ajax.results=i.ajax.processResults),null!=i.language){var h=i.language;e.isFunction(h.noMatches)&&(i.formatNoMatches=h.noMatches),e.isFunction(h.searching)&&(i.formatSearching=h.searching),e.isFunction(h.inputTooShort)&&(i.formatInputTooShort=h.inputTooShort),e.isFunction(h.inputTooLong)&&(i.formatInputTooLong=h.inputTooLong),e.isFunction(h.loadingMore)&&(i.formatLoading=h.loadingMore),e.isFunction(h.maximumSelected)&&(i.formatSelectionTooBig=h.maximumSelected)}if("function"!=typeof(i=e.extend({},{populateResults:function(s,n,a){var o,c=this.opts.id,h=this.liveRegion;o=function(s,n,d){var u,p,f,g,m,v,_,b,y,C,w=[];for(u=0,p=(s=i.sortResults(s,n,a)).length;u<p;u+=1)g=!(m=!0===(f=s[u]).disabled)&&c(f)!==t,v=f.children&&f.children.length>0,(_=e("<li></li>")).addClass("select2-results-dept-"+d),_.addClass("select2-result"),_.addClass(g?"select2-result-selectable":"select2-result-unselectable"),m&&_.addClass("select2-disabled"),v&&_.addClass("select2-result-with-children"),_.addClass(l.opts.formatResultCssClass(f)),_.attr("role","presentation"),(b=e(document.createElement("div"))).addClass("select2-result-label"),b.attr("id","select2-result-label-"+r()),b.attr("role","option"),(C=i.formatResult(f,b,a,l.opts.escapeMarkup))!==t&&(b.html(C),_.append(b)),v&&((y=e("<ul></ul>")).addClass("select2-result-sub"),o(f.children,y,d+1),_.append(y)),_.data("select2-data",f),w.push(_[0]);n.append(w),h.text(i.formatMatches(s.length))},o(n,s,0)}},e.fn.select2.defaults,i)).id&&(a=i.id,i.id=function(e){return e[a]}),e.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(n?(i.query=this.bind((function(e){var i,n,r,a={results:[],more:!1},o=e.term;r=function(t,i){var s;t.is("option")?e.matcher(o,t.text(),t)&&i.push(l.optionToData(t)):t.is("optgroup")&&(s=l.optionToData(t),t.children().each2((function(e,t){r(t,s.children)})),s.children.length>0&&i.push(s))},i=s.children(),this.getPlaceholder()!==t&&i.length>0&&(n=this.getPlaceholderOption())&&(i=i.not(n)),i.each2((function(e,t){r(t,a.results)})),e.callback(a)})),i.id=function(e){return e.id}):"query"in i||("ajax"in i?((o=i.element.data("ajax-url"))&&o.length>0&&(i.ajax.url=o),i.query=E.call(i.element,i.ajax)):"data"in i?i.query=k(i.data):"tags"in i&&(i.query=T(i.tags),i.createSearchChoice===t&&(i.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),i.initSelection===t&&(i.initSelection=function(t,s){var n=[];e(v(t.val(),i.separator,i.transformVal)).each((function(){var t={id:this,text:this},s=i.tags;e.isFunction(s)&&(s=s()),e(s).each((function(){if(m(this.id,t.id))return t=this,!1})),n.push(t)})),s(n)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");if("top"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof i.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return i},monitorSource:function(){var i,s=this.opts.element,n=this;s.on("change.select2",this.bind((function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}))),this._sync=this.bind((function(){var e=s.prop("disabled");e===t&&(e=!1),this.enable(!e);var i=s.prop("readonly");i===t&&(i=!1),this.readonly(i),this.container&&(w(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(A(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(w(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(A(this.opts.dropdownCssClass,this.opts.element)))})),s.length&&s[0].attachEvent&&s.each((function(){this.attachEvent("onpropertychange",n._sync)})),(i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new i((function(t){e.each(t,n._sync)})),this.propertyObserver.observe(s.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var i=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,i,s,n,r,a=this.dropdown,o=this.container,c=o.offset(),h=o.outerHeight(!1),d=o.outerWidth(!1),u=a.outerHeight(!1),p=e(window),f=p.width(),g=p.height(),m=p.scrollLeft()+f,v=p.scrollTop()+g,_=c.top+h,b=c.left,y=_+u<=v,C=c.top-u>=p.scrollTop(),w=a.outerWidth(!1);a.hasClass("select2-drop-above")?(i=!0,!C&&y&&(s=!0,i=!1)):(i=!1,!y&&C&&(s=!0,i=!0)),s&&(a.hide(),c=this.container.offset(),h=this.container.outerHeight(!1),d=this.container.outerWidth(!1),u=a.outerHeight(!1),m=p.scrollLeft()+f,v=p.scrollTop()+g,_=c.top+h,b=c.left,w=a.outerWidth(!1),a.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(r=e(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),(w=a.outerWidth(!1)+(r.scrollHeight===r.clientHeight?0:l.width))>d?d=w:w=d,u=a.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(_-=(t=this.body.offset()).top,b-=t.left),!(b+w<=m)&&c.left+m+o.outerWidth(!1)>w&&(b=c.left+this.container.outerWidth(!1)-w),n={left:b,width:d},i?(this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above"),u=a.outerHeight(!1),n.top=c.top-u,n.bottom="auto"):(n.top=_,n.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above")),n=e.extend(n,A(this.opts.dropdownCss,this.opts.element)),a.css(n)},shouldOpen:function(){var t;return!this.opened()&&!1!==this._enabled&&!0!==this._readonly&&(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),o.on("mousemove.select2Event",(function(e){h.x=e.pageX,h.y=e.pageY})),!0)},opening:function(){var t,i=this.containerEventName,s="scroll."+i,n="resize."+i,r="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0===(t=e("#select2-drop-mask")).length&&((t=e(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",(function(i){p(t);var s,n=e("#select2-drop");n.length>0&&((s=n.data("select2")).opts.selectOnBlur&&s.selectHighlighted({noFocus:!0}),s.close(),i.preventDefault(),i.stopPropagation())}))),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each((function(){e(this).on(n+" "+s+" "+r,(function(e){a.opened()&&a.positionDropdown()}))}))},close:function(){if(this.opened()){var t=this.containerEventName,i="scroll."+t,s="resize."+t,n="orientationchange."+t;this.container.parents().add(window).each((function(){e(this).off(i).off(s).off(n)})),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),o.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.search.removeAttr("aria-activedescendant"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},prefillNextSearchTerm:function(){if(""!==this.search.val())return!1;var e=this.opts.nextSearchTerm(this.data(),this.lastSearchTerm);return e!==t&&(this.search.val(e),this.search.select(),!0)},getMaximumSelectionSize:function(){return A(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,i,s,n,r,a,o,l,c=this.results;(i=this.highlight())<0||(0!=i?(t=this.findHighlightableChoices().find(".select2-result-label"),n=(l=((s=e(t[i])).offset()||{}).top||0)+s.outerHeight(!0),i===t.length-1&&(o=c.find("li.select2-more-results")).length>0&&(n=o.offset().top+o.outerHeight(!0)),n>(r=c.offset().top+c.outerHeight(!1))&&c.scrollTop(c.scrollTop()+(n-r)),(a=l-c.offset().top)<0&&"none"!=s.css("display")&&c.scrollTop(c.scrollTop()+a)):c.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var i=this.findHighlightableChoices(),s=this.highlight();s>-1&&s<i.length;){var n=e(i[s+=t]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")&&!n.hasClass("select2-selected")){this.highlight(s);break}}},highlight:function(t){var i,s,n=this.findHighlightableChoices();if(0===arguments.length)return g(n.filter(".select2-highlighted")[0],n.get());t>=n.length&&(t=n.length-1),t<0&&(t=0),this.removeHighlight(),(i=e(n[t])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",i.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(i.text()),(s=i.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(s),choice:s})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=e(t.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var s=this.findHighlightableChoices();this.highlight(s.index(i))}else 0==i.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),i=this.resultsPage+1,s=this,n=this.search.val(),r=this.context;0!==t.length&&t.offset().top-e.offset().top-e.height()<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:n,page:i,context:r,matcher:this.opts.matcher,callback:this.bind((function(a){s.opened()&&(s.opts.populateResults.call(this,e,a.results,{term:n,page:i,context:r}),s.postprocessResults(a,!1,!1),!0===a.more?(t.detach().appendTo(e).html(s.opts.escapeMarkup(A(s.opts.formatLoadMore,s.opts.element,i+1))),window.setTimeout((function(){s.loadMoreIfNeeded()}),10)):t.remove(),s.positionDropdown(),s.resultsPage=i,s.context=a.context,this.opts.element.trigger({type:"select2-loaded",items:a}))}))}))},tokenize:function(){},updateResults:function(i){var s,n,r,a=this.search,o=this.results,l=this.opts,c=this,h=a.val(),d=e.data(this.container,"select2-last-term");if((!0===i||!d||!m(h,d))&&(e.data(this.container,"select2-last-term",h),!0===i||!1!==this.showSearchInput&&this.opened())){r=++this.queryCount;var u=this.getMaximumSelectionSize();if(!(u>=1&&(s=this.data(),e.isArray(s)&&s.length>=u&&O(l.formatSelectionTooBig,"formatSelectionTooBig"))))return a.val().length<l.minimumInputLength?(O(l.formatInputTooShort,"formatInputTooShort")?f("<li class='select2-no-results'>"+A(l.formatInputTooShort,l.element,a.val(),l.minimumInputLength)+"</li>"):f(""),void(i&&this.showSearch&&this.showSearch(!0))):void(l.maximumInputLength&&a.val().length>l.maximumInputLength?O(l.formatInputTooLong,"formatInputTooLong")?f("<li class='select2-no-results'>"+A(l.formatInputTooLong,l.element,a.val(),l.maximumInputLength)+"</li>"):f(""):(l.formatSearching&&0===this.findHighlightableChoices().length&&f("<li class='select2-searching'>"+A(l.formatSearching,l.element)+"</li>"),a.addClass("select2-active"),this.removeHighlight(),(n=this.tokenize())!=t&&null!=n&&a.val(n),this.resultsPage=1,l.query({element:l.element,term:a.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind((function(s){var n;if(r==this.queryCount)if(this.opened())if(s.hasError!==t&&O(l.formatAjaxError,"formatAjaxError"))f("<li class='select2-ajax-error'>"+A(l.formatAjaxError,l.element,s.jqXHR,s.textStatus,s.errorThrown)+"</li>");else{if(this.context=s.context===t?null:s.context,this.opts.createSearchChoice&&""!==a.val()&&(n=this.opts.createSearchChoice.call(c,a.val(),s.results))!==t&&null!==n&&c.id(n)!==t&&null!==c.id(n)&&0===e(s.results).filter((function(){return m(c.id(this),c.id(n))})).length&&this.opts.createSearchChoicePosition(s.results,n),0===s.results.length&&O(l.formatNoMatches,"formatNoMatches"))return f("<li class='select2-no-results'>"+A(l.formatNoMatches,l.element,a.val())+"</li>"),void(this.showSearch&&this.showSearch(a.val()));o.empty(),c.opts.populateResults.call(this,o,s.results,{term:a.val(),page:this.resultsPage,context:null}),!0===s.more&&O(l.formatLoadMore,"formatLoadMore")&&(o.append("<li class='select2-more-results'>"+l.escapeMarkup(A(l.formatLoadMore,l.element,this.resultsPage))+"</li>"),window.setTimeout((function(){c.loadMoreIfNeeded()}),10)),this.postprocessResults(s,i),p(),this.opts.element.trigger({type:"select2-loaded",items:s})}else this.search.removeClass("select2-active")}))})));f("<li class='select2-selection-limit'>"+A(l.formatSelectionTooBig,l.element,u)+"</li>")}function p(){a.removeClass("select2-active"),c.positionDropdown(),o.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?c.liveRegion.text(o.text()):c.liveRegion.text(c.opts.formatMatches(o.find('.select2-result-selectable:not(".select2-selected")').length))}function f(e){o.html(e),p()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var e;(e=this.search)[0]!==document.activeElement&&window.setTimeout((function(){var t,i=e[0],s=e.val().length;e.focus(),(i.offsetWidth>0||i.offsetHeight>0)&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(s,s):i.createTextRange&&((t=i.createTextRange()).collapse(!1),t.select()))}),0)},selectHighlighted:function(e){if(this._touchMoved)this.clearTouchMoved();else{var t=this.highlight(),i=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");i?(this.highlight(t),this.onSelect(i,e)):e&&e.noFocus&&this.close()}},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var i=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&i||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(i.text())&&""===i.val())return i}},initContainerWidth:function(){var t=function(){var t,i,s,n,r;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if("string"==typeof(t=this.opts.element.attr("style")))for(n=0,r=(i=t.split(";")).length;n<r;n+=1)if(null!==(s=i[n].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&s.length>=1)return s[1];return"resolve"===this.opts.width?(t=this.opts.element.css("width")).indexOf("%")>0?t:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==t&&this.container.css("width",t)}}),s=L(i,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,i,s;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(t=this.search.get(0)).createTextRange?((i=t.createTextRange()).collapse(!1),i.select()):t.setSelectionRange&&(s=this.search.val().length,t.setSelectionRange(s,s))),this.prefillNextSearchTerm(),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),j.call(this,"selection","focusser")},initContainer:function(){var t,i,s=this.container,n=this.dropdown,a=r();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=s.find(".select2-choice"),this.focusser=s.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+a),this.focusser.attr("aria-labelledby","select2-chosen-"+a),this.results.attr("id","select2-results-"+a),this.search.attr("aria-owns","select2-results-"+a),this.focusser.attr("id","s2id_autogen"+a),i=e("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.on("focus.select2",this.bind((function(){this.focus()}))),this.focusser.prev().text(i.text()).attr("for",this.focusser.attr("id"));var o=this.opts.element.attr("title");this.opts.element.attr("title",o||i.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind((function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode)if(e.which!==d.PAGE_UP&&e.which!==d.PAGE_DOWN)switch(e.which){case d.UP:case d.DOWN:return this.moveHighlight(e.which===d.UP?-1:1),void C(e);case d.ENTER:return this.selectHighlighted(),void C(e);case d.TAB:return void this.selectHighlighted({noFocus:!0});case d.ESC:return this.cancel(e),void C(e)}else C(e)}))),this.search.on("blur",this.bind((function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind((function(){this.opened()&&this.results&&this.results.length>1&&this.search.focus()})),0)}))),this.focusser.on("keydown",this.bind((function(e){if(this.isInterfaceEnabled()&&e.which!==d.TAB&&!d.isControl(e)&&!d.isFunctionKey(e)&&e.which!==d.ESC){if(!1!==this.opts.openOnEnter||e.which!==d.ENTER){if(e.which==d.DOWN||e.which==d.UP||e.which==d.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void C(e)}return e.which==d.DELETE||e.which==d.BACKSPACE?(this.opts.allowClear&&this.clear(),void C(e)):void 0}C(e)}}))),b(this.focusser),this.focusser.on("keyup-change input",this.bind((function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}}))),t.on("mousedown touchstart","abbr",this.bind((function(e){var t;this.isInterfaceEnabled()&&(this.clear(),(t=e).preventDefault(),t.stopImmediatePropagation(),this.close(),this.selection&&this.selection.focus())}))),t.on("mousedown touchstart",this.bind((function(i){p(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),C(i)}))),n.on("mousedown touchstart",this.bind((function(){this.opts.shouldFocusInput(this)&&this.search.focus()}))),t.on("focus",this.bind((function(e){C(e)}))),this.focusser.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")}))).on("blur",this.bind((function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))}))),this.search.on("focus",this.bind((function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")}))),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(t){var i=this.selection.data("select2-data");if(i){var s=e.Event("select2-clearing");if(this.opts.element.trigger(s),s.isDefaultPrevented())return;var n=this.getPlaceholderOption();this.opts.element.val(n?n.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==t&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,(function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.setPlaceholder(),e.lastSearchTerm=e.search.val())}))}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()!==t&&((e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val())},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var s=e.find("option").filter((function(){return this.selected&&!this.disabled}));t(i.optionToData(s))}:"data"in t&&(t.initSelection=t.initSelection||function(i,s){var n=i.val(),r=null;t.query({matcher:function(e,i,s){var a=m(n,t.id(s));return a&&(r=s),a},callback:e.isFunction(s)?function(){s(r)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,i){var s=0,n=this;if(this.findHighlightableChoices().each2((function(e,t){if(m(n.id(t.data("select2-data")),n.opts.element.val()))return s=e,!1})),!1!==i&&(!0===t&&s>=0?this.highlight(s):this.highlight(0)),!0===t){var r=this.opts.minimumResultsForSearch;r>=0&&this.showSearch(D(e.results)>=r)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var i=this.opts.element.val(),s=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.lastSearchTerm=this.search.val(),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),m(i,this.id(e))||this.triggerChange({added:e,removed:s})}},updateSelection:function(e){var i,s,n=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),n.empty(),null!==e&&(i=this.opts.formatSelection(e,n,this.opts.escapeMarkup)),i!==t&&n.append(i),(s=this.opts.formatSelectionCssClass(e,n))!==t&&n.addClass(s),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,i=!1,s=null,n=this,r=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(i=arguments[1],this.opts.debug&&console&&console.warn&&console.warn('Select2: The second option to `select2("val")` is not supported in Select2 4.0.0. The `change` event will always be triggered in 4.0.0.')),this.select)this.opts.debug&&console&&console.warn&&console.warn('Select2: Setting the value on a <select> using `select2("val")` is no longer supported in 4.0.0. You can use the `.val(newValue).trigger("change")` method provided by jQuery instead.'),this.select.val(e).find("option").filter((function(){return this.selected})).each2((function(e,t){return s=n.optionToData(t),!1})),this.updateSelection(s),this.setPlaceholder(),i&&this.triggerChange({added:s,removed:r});else{if(!e&&0!==e)return void this.clear(i);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,(function(e){n.opts.element.val(e?n.id(e):""),n.updateSelection(e),n.setPlaceholder(),i&&n.triggerChange({added:e,removed:r})}))}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var i,s=!1;if(0===arguments.length)return(i=this.selection.data("select2-data"))==t&&(i=null),i;this.opts.debug&&console&&console.warn&&console.warn('Select2: The `select2("data")` method can no longer set selected values in 4.0.0, consider using the `.val()` method instead.'),arguments.length>1&&(s=arguments[1]),e?(i=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),s&&this.triggerChange({added:e,removed:i})):this.clear(s)}}),n=L(i,{createContainer:function(){return e(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var s=[];e.find("option").filter((function(){return this.selected&&!this.disabled})).each2((function(e,t){s.push(i.optionToData(t))})),t(s)}:"data"in t&&(t.initSelection=t.initSelection||function(i,s){var n=v(i.val(),t.separator,t.transformVal),r=[];t.query({matcher:function(i,s,a){var o=e.grep(n,(function(e){return m(e,t.id(a))})).length;return o&&r.push(a),o},callback:e.isFunction(s)?function(){for(var e=[],i=0;i<n.length;i++)for(var a=n[i],o=0;o<r.length;o++){var l=r[o];if(m(a,t.id(l))){e.push(l),r.splice(o,1);break}}s(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),j.call(this,"searchContainer","selection")},initContainer:function(){var t,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(i);var s=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",(function(t){s.search[0].focus(),s.selectChoice(e(this))})),this.search.attr("id","s2id_autogen"+r()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.on("focus.select2",this.bind((function(){this.focus()}))),this.search.on("input paste",this.bind((function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())}))),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind((function(i){if(this.isInterfaceEnabled()){++this.keydowns;var s=t.find(".select2-search-choice-focus"),n=s.prev(".select2-search-choice:not(.select2-locked)"),r=s.next(".select2-search-choice:not(.select2-locked)"),a=function(t){var i=0,s=0;if("selectionStart"in(t=e(t)[0]))i=t.selectionStart,s=t.selectionEnd-i;else if("selection"in document){t.focus();var n=document.selection.createRange();s=document.selection.createRange().text.length,n.moveStart("character",-t.value.length),i=n.text.length-s}return{offset:i,length:s}}(this.search);if(s.length&&(i.which==d.LEFT||i.which==d.RIGHT||i.which==d.BACKSPACE||i.which==d.DELETE||i.which==d.ENTER)){var o=s;return i.which==d.LEFT&&n.length?o=n:i.which==d.RIGHT?o=r.length?r:null:i.which===d.BACKSPACE?this.unselect(s.first())&&(this.search.width(10),o=n.length?n:r):i.which==d.DELETE?this.unselect(s.first())&&(this.search.width(10),o=r.length?r:null):i.which==d.ENTER&&(o=null),this.selectChoice(o),C(i),void(o&&o.length||this.open())}if((i.which===d.BACKSPACE&&1==this.keydowns||i.which==d.LEFT)&&0==a.offset&&!a.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void C(i);if(this.selectChoice(null),this.opened())switch(i.which){case d.UP:case d.DOWN:return this.moveHighlight(i.which===d.UP?-1:1),void C(i);case d.ENTER:return this.selectHighlighted(),void C(i);case d.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case d.ESC:return this.cancel(i),void C(i)}if(i.which!==d.TAB&&!d.isControl(i)&&!d.isFunctionKey(i)&&i.which!==d.BACKSPACE&&i.which!==d.ESC){if(i.which===d.ENTER){if(!1===this.opts.openOnEnter)return;if(i.altKey||i.ctrlKey||i.shiftKey||i.metaKey)return}this.open(),i.which!==d.PAGE_UP&&i.which!==d.PAGE_DOWN||C(i),i.which===d.ENTER&&C(i)}}}))),this.search.on("keyup",this.bind((function(e){this.keydowns=0,this.resizeSearch()}))),this.search.on("blur",this.bind((function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))}))),this.container.on("click",i,this.bind((function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))}))),this.container.on("focus",i,this.bind((function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}))),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,(function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.clearSearch())}))}},clearSearch:function(){var e=this.getPlaceholder(),i=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(e).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.prefillNextSearchTerm(),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var i={},s=[],n=this;e(t).each((function(){n.id(this)in i||(i[n.id(this)]=0,s.push(this))})),this.selection.find(".select2-search-choice").remove(),this.addSelectedChoice(s),n.postprocessResults()},tokenize:function(){var e=this.search.val();null!=(e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts))&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.lastSearchTerm=this.search.val(),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.prefillNextSearchTerm()&&this.updateResults(),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(t){var i=this.getVal(),s=this;e(t).each((function(){i.push(s.createChoice(this))})),this.setVal(i)},createChoice:function(i){var s,n,r=!i.locked,a=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),o=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=r?a:o,c=this.id(i);return(s=this.opts.formatSelection(i,l.find("div"),this.opts.escapeMarkup))!=t&&l.find("div").replaceWith(e("<div></div>").html(s)),(n=this.opts.formatSelectionCssClass(i,l.find("div")))!=t&&l.addClass(n),r&&l.find(".select2-search-choice-close").on("mousedown",C).on("click dblclick",this.bind((function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),C(t),this.close(),this.focusSearch())}))).on("focus",this.bind((function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}))),l.data("select2-data",i),l.insertBefore(this.searchContainer),c},unselect:function(t){var i,s,n=this.getVal();if(0===(t=t.closest(".select2-search-choice")).length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(i=t.data("select2-data")){var r=e.Event("select2-removing");if(r.val=this.id(i),r.choice=i,this.opts.element.trigger(r),r.isDefaultPrevented())return!1;for(;(s=g(this.id(i),n))>=0;)n.splice(s,1),this.setVal(n),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}),!0}},postprocessResults:function(e,t,i){var s=this.getVal(),n=this.results.find(".select2-result"),r=this.results.find(".select2-result-with-children"),a=this;n.each2((function(e,t){g(a.id(t.data("select2-data")),s)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))})),r.each2((function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")})),-1==this.highlight()&&!1!==i&&!0===this.opts.closeOnSelect&&a.highlight(0),!this.opts.createSearchChoice&&!n.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&O(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+A(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-_(this.search)},resizeSearch:function(){var t,i,s,n,r=_(this.search);t=function(t){if(!a){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);(a=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),e(document.body).append(a)}return a.text(t.val()),a.width()}(this.search)+10,i=this.search.offset().left,(n=(s=this.selection.width())-(i-this.selection.offset().left)-r)<t&&(n=s-r),n<40&&(n=s-r),n<=0&&(n=t),this.search.width(Math.floor(n))},getVal:function(){var e;return this.select?null===(e=this.select.val())?[]:e:v(e=this.opts.element.val(),this.opts.separator,this.opts.transformVal)},setVal:function(t){if(this.select)this.select.val(t);else{var i=[],s={};e(t).each((function(){this in s||(i.push(this),s[this]=0)})),this.opts.element.val(0===i.length?"":i.join(this.opts.separator))}},buildChangeDetails:function(e,t){t=t.slice(0),e=e.slice(0);for(var i=0;i<t.length;i++)for(var s=0;s<e.length;s++)if(m(this.opts.id(t[i]),this.opts.id(e[s]))){t.splice(i,1),i--,e.splice(s,1);break}return{added:t,removed:e}},val:function(i,s){var n,r=this;if(0===arguments.length)return this.getVal();if((n=this.data()).length||(n=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(s&&this.triggerChange({added:this.data(),removed:n}));if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),s&&this.triggerChange(this.buildChangeDetails(n,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,(function(t){var i=e.map(t,r.id);r.setVal(i),r.updateSelection(t),r.clearSearch(),s&&r.triggerChange(r.buildChangeDetails(n,r.data()))}))}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each((function(){t.push(i.opts.id(e(this).data("select2-data")))})),this.setVal(t),this.triggerChange()},data:function(t,i){var s,n,r=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map((function(){return e(this).data("select2-data")})).get();n=this.data(),t||(t=[]),s=e.map(t,(function(e){return r.opts.id(e)})),this.setVal(s),this.updateSelection(t),this.clearSearch(),i&&this.triggerChange(this.buildChangeDetails(n,this.data()))}}),e.fn.select2=function(){var i,s,n,r,a,o=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],c=["opened","isFocused","container","dropdown"],h=["val","data"],d={search:"externalSearch"};return this.each((function(){if(0===o.length||"object"==typeof o[0])(i=0===o.length?{}:e.extend({},o[0])).element=e(this),"select"===i.element.get(0).tagName.toLowerCase()?a=i.element.prop("multiple"):(a=i.multiple||!1,"tags"in i&&(i.multiple=a=!0)),(s=a?new window.Select2.class.multi:new window.Select2.class.single).init(i);else{if("string"!=typeof o[0])throw"Invalid arguments to select2 plugin: "+o;if(g(o[0],l)<0)throw"Unknown method: "+o[0];if(r=t,(s=e(this).data("select2"))===t)return;if("container"===(n=o[0])?r=s.container:"dropdown"===n?r=s.dropdown:(d[n]&&(n=d[n]),r=s[n].apply(s,o.slice(1))),g(o[0],c)>=0||g(o[0],h)>=0&&1==o.length)return!1}})),r===t?this:r},e.fn.select2.defaults={debug:!1,width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,s){var n=[];return x(this.text(e),i.term,n,s),n.join("")},transformVal:function(t){return e.trim(t)},formatSelection:function(e,i,s){return e?s(this.text(e)):t},sortResults:function(e,t,i){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,i){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},text:function(t){return t&&this.data&&this.data.text?e.isFunction(this.data.text)?this.data.text(t):t[this.data.text]:t.text},matcher:function(e,t){return f(""+t).toUpperCase().indexOf(f(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:function(e,i,s,n){var r,a,o,l,c,h=e,d=!1;if(!n.createSearchChoice||!n.tokenSeparators||n.tokenSeparators.length<1)return t;for(;;){for(a=-1,o=0,l=n.tokenSeparators.length;o<l&&(c=n.tokenSeparators[o],!((a=e.indexOf(c))>=0));o++);if(a<0)break;if(r=e.substring(0,a),e=e.substring(a+c.length),r.length>0&&(r=n.createSearchChoice.call(this,r,i))!==t&&null!==r&&n.id(r)!==t&&null!==n.id(r)){for(d=!1,o=0,l=i.length;o<l;o++)if(m(n.id(r),n.id(i[o]))){d=!0;break}d||s(r)}}return h!==e?e:void 0},escapeMarkup:S,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,i){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){return!(("ontouchstart"in window||navigator.msMaxTouchPoints>0)&&e.opts.minimumResultsForSearch<0)}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,i){return"Loading failed"},formatInputTooShort:function(e,t){var i=t-e.length;return"Please enter "+i+" or more character"+(1==i?"":"s")},formatInputTooLong:function(e,t){var i=e.length-t;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(e){return"Loading more results"},formatSearching:function(){return"Searching"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:E,local:k,tags:T},util:{debounce:y,markMatch:x,escapeMarkup:S,stripDiacritics:f},class:{abstract:i,single:s,multi:n}}}function p(t){var i=e(document.createTextNode(""));t.before(i),i.before(t),i.remove()}function f(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return u[e]||e}))}function g(e,t){for(var i=0,s=t.length;i<s;i+=1)if(m(e,t[i]))return i;return-1}function m(e,i){return e===i||e!==t&&i!==t&&null!==e&&null!==i&&(e.constructor===String?e+""==i+"":i.constructor===String&&i+""==e+"")}function v(e,t,i){var s,n,r;if(null===e||e.length<1)return[];for(n=0,r=(s=e.split(t)).length;n<r;n+=1)s[n]=i(s[n]);return s}function _(e){return e.outerWidth(!1)-e.width()}function b(i){var s="keyup-change-value";i.on("keydown",(function(){e.data(i,s)===t&&e.data(i,s,i.val())})),i.on("keyup",(function(){var n=e.data(i,s);n!==t&&i.val()!==n&&(e.removeData(i,s),i.trigger("keyup-change"))}))}function y(e,i,s){var n;return s=s||t,function(){var t=arguments;window.clearTimeout(n),n=window.setTimeout((function(){i.apply(s,t)}),e)}}function C(e){e.preventDefault(),e.stopPropagation()}function w(t,i,s){var n,r,a=[];(n=e.trim(t.attr("class")))&&e((n=""+n).split(/\s+/)).each2((function(){0===this.indexOf("select2-")&&a.push(this)})),(n=e.trim(i.attr("class")))&&e((n=""+n).split(/\s+/)).each2((function(){0!==this.indexOf("select2-")&&(r=s(this))&&a.push(r)})),t.attr("class",a.join(" "))}function x(e,t,i,s){var n=f(e.toUpperCase()).indexOf(f(t.toUpperCase())),r=t.length;n<0?i.push(s(e)):(i.push(s(e.substring(0,n))),i.push("<span class='select2-match'>"),i.push(s(e.substring(n,n+r))),i.push("</span>"),i.push(s(e.substring(n+r,e.length))))}function S(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,(function(e){return t[e]}))}function E(i){var s,n=null,r=i.quietMillis||100,a=i.url,o=this;return function(l){window.clearTimeout(s),s=window.setTimeout((function(){var s=i.data,r=a,c=i.transport||e.fn.select2.ajaxDefaults.transport,h={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||t,dataType:i.dataType||"json"},d=e.extend({},e.fn.select2.ajaxDefaults.params,h);s=s?s.call(o,l.term,l.page,l.context):null,r="function"==typeof r?r.call(o,l.term,l.page,l.context):r,n&&"function"==typeof n.abort&&n.abort(),i.params&&(e.isFunction(i.params)?e.extend(d,i.params.call(o)):e.extend(d,i.params)),e.extend(d,{url:r,dataType:i.dataType,data:s,success:function(e){var t=i.results(e,l.page,l);l.callback(t)},error:function(e,t,i){var s={hasError:!0,jqXHR:e,textStatus:t,errorThrown:i};l.callback(s)}}),n=c.call(o,d)}),r)}}function k(t){var i,s,n=t,r=function(e){return""+e.text};e.isArray(n)&&(n={results:s=n}),!1===e.isFunction(n)&&(s=n,n=function(){return s});var a=n();return a.text&&(r=a.text,e.isFunction(r)||(i=a.text,r=function(e){return e[i]})),function(t){var i,s=t.term,a={results:[]};""!==s?(i=function(n,a){var o,l;if((n=n[0]).children){for(l in o={},n)n.hasOwnProperty(l)&&(o[l]=n[l]);o.children=[],e(n.children).each2((function(e,t){i(t,o.children)})),(o.children.length||t.matcher(s,r(o),n))&&a.push(o)}else t.matcher(s,r(n),n)&&a.push(n)},e(n().results).each2((function(e,t){i(t,a.results)})),t.callback(a)):t.callback(n())}}function T(i){var s=e.isFunction(i);return function(n){var r=n.term,a={results:[]},o=s?i(n):i;e.isArray(o)&&(e(o).each((function(){var e=this.text!==t,i=e?this.text:this;(""===r||n.matcher(r,i))&&a.results.push(e?this:{id:this,text:this})})),n.callback(a))}}function O(t,i){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(i+" must be a string, function, or falsy value")}function A(t,i){if(e.isFunction(t)){var s=Array.prototype.slice.call(arguments,2);return t.apply(i,s)}return t}function D(t){var i=0;return e.each(t,(function(e,t){t.children?i+=D(t.children):i++})),i}function j(){var t=this;e.each(arguments,(function(e,i){t[i].remove(),t[i]=null}))}function L(t,i){var s=function(){};return(s.prototype=new t).constructor=s,s.prototype.parent=t.prototype,s.prototype=e.extend(s.prototype,i),s}}(jQuery)},497:function(){jQuery.fn.selectToUISlider=function(e){var t,i,s=jQuery(this),n=jQuery.extend({labels:3,tooltip:!0,tooltipSrc:"text",labelSrc:"value",sliderOptions:null},e),r=(t=[],s.each((function(){t.push("handle_"+jQuery(this).attr("id"))})),t),a=(i=[],s.eq(0).find("option").each((function(){i.push({value:jQuery(this).attr("value"),text:jQuery(this).text()})})),i),o=function(){if(s.eq(0).find("optgroup").size()>0){var e=[];return s.eq(0).find("optgroup").each((function(t){e[t]={},e[t].label=jQuery(this).attr("label"),e[t].options=[],jQuery(this).find("option").each((function(){e[t].options.push({text:jQuery(this).text(),value:jQuery(this).attr("value")})}))})),e}return null}();function l(e){return"text"==n.tooltipSrc?a[e].text:a[e].value}var c={step:1,min:0,orientation:"horizontal",max:a.length-1,range:s.length>1,slide:function(e,t){var i=jQuery(t.handle),s=l(t.value);i.attr("aria-valuetext",s).attr("aria-valuenow",t.value).find(".ui-slider-tooltip .ttContent").text(s);var n=jQuery("#"+i.attr("id").split("handle_")[1]);n.find("option").not(t.value).prop("selected",!1),n.find("option").eq(t.value).prop("selected",!0)},values:function(){var e=[];return s.each((function(){e.push(jQuery(this).get(0).selectedIndex)})),e}()};n.sliderOptions=e?jQuery.extend(c,e.sliderOptions):c,s.bind("change keyup click",(function(){var e=jQuery(this).get(0).selectedIndex,t=jQuery("#handle_"+jQuery(this).attr("id")),i=t.data("handleNum");t.parents(".ui-slider:eq(0)").slider("values",i,e)}));var h=jQuery("<div></div>");if(s.each((function(e){var t="",i=jQuery("label[for="+jQuery(this).attr("id")+"]"),s=i.size()>0?"Slider control for "+i.text():"",a=i.attr("id")||i.attr("id","label_"+r[e]).attr("id");!1===n.tooltip&&(t=' style="display: none;"'),jQuery('<a href="#" tabindex="0" id="'+r[e]+'" class="ui-slider-handle" role="slider" aria-labelledby="'+a+'" aria-valuemin="'+n.sliderOptions.min+'" aria-valuemax="'+n.sliderOptions.max+'" aria-valuenow="'+n.sliderOptions.values[e]+'" aria-valuetext="'+l(n.sliderOptions.values[e])+'" ><span class="screenReaderContext">'+s+'</span><span class="ui-slider-tooltip ui-widget-content ui-corner-all"'+t+'><span class="ttContent"></span><span class="ui-tooltip-pointer-down ui-widget-content"><span class="ui-tooltip-pointer-down-inner"></span></span></span></a>').data("handleNum",e).appendTo(h)})),o){var d=0,u=h.append('<dl class="ui-slider-scale ui-helper-reset" role="presentation"></dl>').find(".ui-slider-scale:eq(0)");jQuery(o).each((function(e){u.append('<dt style="width: '+(100/o.length).toFixed(2)+"%; left:"+(e/(o.length-1)*100).toFixed(2)+'%"><span>'+this.label+"</span></dt>");var t=this.options;jQuery(this.options).each((function(e){var i=d==a.length-1||0===d?'style="display: none;"':"",s="text"==n.labelSrc?t[e].text:t[e].value;u.append('<dd style="left:'+p(d)+'"><span class="ui-slider-label">'+s+'</span><span class="ui-slider-tic ui-widget-content"'+i+"></span></dd>"),d++}))}))}else u=h.append('<ol class="ui-slider-scale ui-helper-reset" role="presentation"></ol>').find(".ui-slider-scale:eq(0)"),jQuery(a).each((function(e){var t=e==a.length-1||0===e?'style="display: none;"':"",i="text"==n.labelSrc?this.text:this.value;u.append('<li style="left:'+p(e)+'"><span class="ui-slider-label">'+i+'</span><span class="ui-slider-tic ui-widget-content"'+t+"></span></li>")}));function p(e){return(e/(a.length-1)*100).toFixed(2)+"%"}n.labels>1&&h.find(".ui-slider-scale li:last span.ui-slider-label, .ui-slider-scale dd:last span.ui-slider-label").addClass("ui-slider-label-show");for(var f=Math.max(1,Math.round(a.length/n.labels)),g=0;g<a.length;g+=f)a.length-g>f&&h.find(".ui-slider-scale li:eq("+g+") span.ui-slider-label, .ui-slider-scale dd:eq("+g+") span.ui-slider-label").addClass("ui-slider-label-show");h.find(".ui-slider-scale dt").each((function(e){jQuery(this).css({left:(100/o.length*e).toFixed(2)+"%"})})),h.insertAfter(jQuery(this).eq(this.length-1)).slider(n.sliderOptions).attr("role","application").find(".ui-slider-label").each((function(){jQuery(this).css("marginLeft",-jQuery(this).width()/2)})),h.find(".ui-tooltip-pointer-down-inner").each((function(){var e=jQuery(".ui-tooltip-pointer-down-inner").css("borderTopWidth"),t=jQuery(this).parents(".ui-slider-tooltip").css("backgroundColor");jQuery(this).css("border-top",e+" solid "+t)}));var m=h.slider("values");return m.constructor==Array?jQuery(m).each((function(e){h.find(".ui-slider-tooltip .ttContent").eq(e).text(l(this))})):h.find(".ui-slider-tooltip .ttContent").eq(0).text(l(m)),this}},305:function(){!function(e){var t,i={},s={};e.tagcloud={id:"TagCloud",version:"0.5.0",defaults:{height:null,type:"cloud",sizemax:20,sizemin:10,colormax:"00F",colormin:"B4D2FF",seed:null,power:.5}},e.fn.extend({tagcloud:function(r){switch(null===(t=e.extend({},e.tagcloud.defaults,r)).seed&&(t.seed=Math.ceil(45309714203*Math.random())),t.type){case"sphere":case"cloud":i={position:"relative"},s={position:"absolute",display:"block"};break;case"list":i={height:"auto"},s={position:"static",display:"inline"}}return n.setSeed(t.seed+123456),this.each((function(r,o){var l=e(o),c=l.find(">li"),h=c.length,d=l.width(),u=null===t.height?.004*d*h:t.height;l.css({width:d,height:u,listStyle:"none",margin:0,padding:0}),l.css(i);for(var p=-2147483647,f=2147483648,g=-1,m=0;m<h;m++)(w=-1==(C=e(c[m])).attr("value")?g++:C.attr("value"))>p&&(p=w),w<f&&(f=w),g=w;var v=p-f,_=new Array;for(m=0;m<h;m++)_[m]=m;for(var b,y=_.length;y;m=parseInt(n.rand(0,1e3)/1e3*y),b=_[--y],_[y]=_[m],_[m]=b);for(g=-1,m=0;m<h;m++){var C,w=-1==(C=e(c[m])).attr("value")?g++:C.attr("value");g=w;var x=(w-f)/v,S=t.sizemin+x*(t.sizemax-t.sizemin),E=a(t.colormin,t.colormax,x);C.css({fontSize:S,position:"absolute",color:"#"+E,margin:0,padding:0}).children().css({color:"#"+E});var k=C.width(),T=C.height(),O={};if("list"!=t.type){if("cloud"==t.type)var A=n.rand(0,d-k),D=_[m]*(u/h)-T/2;else{var j=Math.pow(m/h,t.power),L=2.399963*(m+Math.PI/2);A=d/2-k/2+.5*d*j*Math.sin(L),D=u/2-T/2+.5*u*j*Math.cos(L)}O.left=A,O.top=D}for(var P in s)O[P]=s[P];C.css(O)}}))}});var n=new function(){this.seed=23145678901,this.A=48271,this.M=2147483647,this.Q=this.M/this.A,this.R=this.M%this.A,this.oneOverM=1/this.M};function r(e){for(var t=3==e.length,i=[],s=0;s<3;s++){var n=e.substring(s*(t?1:2),(s+1)*(t?1:2));i.push(parseInt(t?n+n:n,16))}return i}function a(e,t,i){for(var s=r(e),n=r(t),a=[],o=0;o<3;o++)a.push(s[o]+Math.floor(i*(n[o]-s[o])));return function(e){for(var t="",i=0;i<3;i++){var s=e[i].toString(16);1==s.length&&(s="0"+s),t+=s}return t}(a)}n.setSeed=function(e){this.seed=e},n.next=function(){var e=this.seed/this.Q,t=this.seed%this.Q,i=this.A*t-this.R*e;return this.seed=i+(i>0?0:this.M),this.seed*this.oneOverM},n.rand=function(e,t){return Math.floor((t-e+1)*this.next()+e)},e.fn.TagCloud=e.fn.Tagcloud=e.fn.tagcloud}(jQuery)}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,s),r.exports}s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";s(507),s(973),s(210),s(836),s(497),s(305),s(993)}()}();