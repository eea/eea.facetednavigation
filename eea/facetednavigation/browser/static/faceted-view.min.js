!function(){var e={603:function(){!function(e){e.fn.collapsible=function(t){var i=this;i.colapsed=!1;var r={maxitems:0,elements:"li",more:"More",less:"Less",events:{refresh:"widget-refresh",expand:"widget-expand",colapse:"widget-colapse"},handle_refresh:function(){if(e(r.elements,i).show(),i.button.hide(),r.maxitems){var t=e(r.elements,i);t.length<r.maxitems||(i.colapsed?e("a",i.button).text(r.more):e("a",i.button).text(r.less),i.button.show(),i.colapsed&&t.each((function(t){t<r.maxitems?e(this).show():e(this).hide()})))}},handle_expand:function(){i.colapsed=!1,i.trigger(r.events.refresh)},handle_colapse:function(){i.colapsed=!0,i.trigger(r.events.refresh)},initialize:function(){i.bind(r.events.refresh,(function(e,t){r.handle_refresh(e,t)})),i.bind(r.events.expand,(function(e,t){r.handle_expand(e,t)})),i.bind(r.events.colapse,(function(e,t){r.handle_colapse(e,t)}));var t=e("<a>").attr("href","#").text("More");i.button=e("<div>").addClass("faceted-checkbox-more").append(t).hide(),i.append(i.button),t.click((function(){return i.colapsed?i.trigger(r.events.expand):i.trigger(r.events.colapse),!1})),r.maxitems&&t.click()}};return t&&e.extend(r,t),r.initialize(),this}}(jQuery)},293:function(){jQuery(document).ready((function(){jQuery("form.faceted-external-search").submit((function(e){e.preventDefault();var t=jQuery(this),i=t.attr("action"),r=t.serialize();window.location.href=i+"#"+r}))}))},739:function(){var e=window.Faceted={version:"15.0"};e.Events={},e.Events.INITIALIZE="FACETED-INITIALIZE",e.Events.AJAX_QUERY_START="FACETED-AJAX-QUERY-START",e.Events.AJAX_QUERY_SUCCESS="FACETED-AJAX-QUERY-SUCCESS",e.Events.QUERY_INITIALIZED="FACETED-QUERY-INITIALIZED",e.Events.QUERY_CHANGED="FACETED-QUERY-CHANGED",e.Events.RESET="FACETED-RESET",e.Events.FORM_DO_QUERY="FACETED-FORM-DO-QUERY",e.Events.WINDOW_WIDTH_CHANGED="FACETED-WINDOW-WIDTH-CHANGED",e.Events.WINDOW_HEIGHT_CHANGED="FACETED-WINDOW-HEIGHT-CHANGED",e.Events.AJAX_START="FACETED-AJAX-START",e.Events.AJAX_STOP="FACETED-AJAX-STOP",e.Events.AJAX_ERROR="FACETED-AJAX-ERROR",e.Events.REDRAW="FACETED-REDRAW",e.Events.HASHCHANGE="hashchange.FACETED-HASHCHANGE",e.Events.DO_UPDATE="FACETED-DO_UPDATE",e.Events.CLEANUP_COMPLETED="FACETED-CLEANUP-COMPLETED",e.Events.cleanup=function(){jQuery(e.Events).unbind(e.Events.AJAX_QUERY_START),jQuery(e.Events).unbind(e.Events.AJAX_QUERY_SUCCESS),jQuery(e.Events).unbind(e.Events.QUERY_INITIALIZED),jQuery(e.Events).unbind(e.Events.QUERY_CHANGED),jQuery(e.Events).unbind(e.Events.RESET),jQuery(e.Events).unbind(e.Events.FORM_DO_QUERY),jQuery(e.Events).unbind(e.Events.WINDOW_WIDTH_CHANGED),jQuery(e.Events).unbind(e.Events.WINDOW_HEIGHT_CHANGED),jQuery(e.Events).unbind(e.Events.AJAX_START),jQuery(e.Events).unbind(e.Events.AJAX_STOP),jQuery(e.Events).unbind(e.Events.AJAX_ERROR),jQuery(e.Events).unbind(e.Events.REDRAW),jQuery(e.Events).unbind(e.Events.DO_UPDATE),window.removeEventListener("hashchange",e.hash_changed),jQuery(e.Events).trigger(e.Events.CLEANUP_COMPLETED)},e.Widgets={},e.Query={},e.BASEURL="",e.Options={},e.Options.SHOW_SPINNER=!0,e.Options.FADE_SPEED="fast",e.SortedQuery=function(t){t||(t=e.Query);var i=[];jQuery.each(t,(function(e){this&&"all"!=this&&i.push(e)})),i.sort();var r={};return jQuery.each(i,(function(){r[this]=t[this]})),r},e.Window={initialize:function(){this.width=jQuery(window).width(),this.height=jQuery(window).height();var e=this;jQuery(window).resize((function(){e.width_change(),e.height_change()}));var t=jQuery("a:has(img#icon-full_screen)");t.length&&e.toggle_fullscreen(t)},width_change:function(){var t=jQuery(window).width();t!=this.width&&(this.width=t,jQuery(e.Events).trigger(e.Events.WINDOW_WIDTH_CHANGED,{width:t}))},height_change:function(){var t=jQuery(window).height();t!=this.height&&(this.height=t,jQuery(e.Events).trigger(e.Events.WINDOW_HEIGHT_CHANGED,{height:t}))},toggle_fullscreen:function(t){t.attr("href","#"),t.click((function(){var t=window.toggleFullScreenMode;return t&&(t(),jQuery(e.Events).trigger(e.Events.WINDOW_WIDTH_CHANGED)),!1}))}},e.Form={initialize:function(){this.form=jQuery("#faceted-form"),this.area=jQuery("#faceted-results"),this.mode=this.form.data("mode")||"view",this.version="";var t=jQuery("#faceted-version",this.form);t&&(this.version=t.text());var i=this.area;jQuery(document).ajaxError((function(){jQuery(i).html("<h3>This site encountered an error trying to fulfill your request</h3><p>If the error persists please contact the site maintainer. Thank you for your patience.</p>"),jQuery(e.Events).trigger(e.Events.AJAX_ERROR)}));var r=e.URLHandler.get(),a=!jQuery.isEmptyObject(r);a&&(e.Query=r),void 0===e.Query.b_start&&(e.Query.b_start=0),("search"!==this.mode||a)&&(jQuery(e.Events).trigger(e.Events.QUERY_INITIALIZED),a?e.URLHandler.hash_changed():e.URLHandler.set())},initialize_paginator:function(){var t=this;e.b_start_changed=!1,jQuery(".pagination a").each((function(){jQuery(this).click((function(){var i=jQuery(this).attr("href"),r=new RegExp("b_start\\:int=(\\d+)").exec(i)[1];return e.b_start_changed=!0,t.do_query("b_start",r),!1}))}))},reset:function(){e.Query={}},do_query:function(t,i){"b_start"==t||e.b_start_changed||(e.Query.b_start=0),i||(i=[]),t&&(e.Query[t]=i),jQuery(e.Events).trigger(e.Events.FORM_DO_QUERY,{wid:t}),e.URLHandler.set()},do_form_query:function(){var t=this;void 0===e.Query.b_start&&(e.Query.b_start=0),jQuery(e.Events).trigger(e.Events.AJAX_QUERY_START),t.area.fadeOut("fast",(function(){e.Options.SHOW_SPINNER&&(t.area.html('<div class="faceted_loading"></div>'),t.area.fadeIn(e.Options.FADE_SPEED));var i=e.SortedQuery();i.b_start=i.b_start[0],t.version&&(i.version=t.version),jQuery.get(e.BASEURL+"@@faceted_query",i,(function(i){t.area.fadeOut("fast",(function(){t.area.html(i),t.area.fadeIn(e.Options.FADE_SPEED),jQuery(e.Events).trigger(e.Events.AJAX_QUERY_SUCCESS)}))}))}))},highlight:function(e,t,i){for(var r=0;r<e.length;r++){var a=jQuery("#"+e[r]);i?jQuery(a).removeClass(t):jQuery(a).addClass(t)}},raise_error:function(e,t,i){e='<div class="portalMessage">'+e+"</div>",jQuery("#"+t).html(e),this.highlight(i,"error")},clear_errors:function(e,t){jQuery("#"+e).html(""),this.highlight(t,"error",!0)}},e.hash_changed=function(){return e.URLHandler.hash_changed()},e.URLHandler={initialize:function(){},hash_changed:function(){e.Query=this.get(),jQuery(e.Events).trigger(e.Events.QUERY_CHANGED),e.Form.do_form_query()},document_hash:function(){var e=window.location.href,t=e.indexOf("#");return t>=0?e.substr(t+1):""},get:function(){var e=jQuery.bbq.getState(),t={},i=["number","boolean","string"];return jQuery.each(e,(function(e,r){var a=typeof r;-1!==jQuery.inArray(a,i)&&(r=[r]),t[e]=r})),t},set:function(t){t||(t=e.Query),t=jQuery.param(t,!0),jQuery.bbq.pushState(t,2)}},e.Sections={initialize:function(){var e=this;e.form=jQuery(".faceted-form"),e.advanced=jQuery(".faceted-advanced-widgets",e.form).hide(),e.buttons=jQuery(".faceted-sections-buttons",e.form),e.advanced.length?(e.more=jQuery(".faceted-sections-buttons-more",e.form).show(),e.less=jQuery(".faceted-sections-buttons-less",e.form).hide(),jQuery("a",e.buttons).click((function(t){return e.toggle(jQuery(this),t),!1}))):e.buttons.remove()},toggle:function(){this.more.toggle(),this.less.toggle(),this.advanced.toggle("blind"),jQuery(".faceted-tagscloud-widget:visible",this.form).length&&jQuery(e.Events).trigger(e.Events.WINDOW_WIDTH_CHANGED)}},e.AjaxLook={initialize:function(){this.slaves=[],this.locked=!1;var t=this;jQuery(e.Events).bind(e.Events.AJAX_START,(function(e,i){t.add(i.wid)})),jQuery(e.Events).bind(e.Events.AJAX_STOP,(function(e,i){t.remove(i.wid)})),jQuery(e.Events).bind(e.Events.AJAX_QUERY_START,(function(){t.add("faceted-results")})),jQuery(e.Events).bind(e.Events.AJAX_QUERY_SUCCESS,(function(){t.remove("faceted-results")})),jQuery(e.Events).bind(e.Events.AJAX_ERROR,(function(){jQuery(this.slaves).each((function(e){t.remove(t.slaves[e])}))}))},add:function(e){this.lock(),this.slaves.push(e);var t=jQuery("#"+e+"_widget");t.length&&t.addClass("faceted-widget-loading")},remove:function(e){this.slaves.length&&(this.slaves=jQuery.map(this.slaves,(function(t){return t==e?null:t})));var t=jQuery("#"+e+"_widget");t.length&&t.removeClass("faceted-widget-loading"),this.unlock()},lock:function(){if(!this.locked){this.locked=!0,jQuery.each(e.Widgets,(function(){this.widget.addClass("faceted-widget-locked")}));var t=jQuery("<div>");t.addClass("faceted-lock-overlay"),t.addClass("ui-widget-overlay"),t.css("z-index",1001),jQuery("#faceted-form").append(t)}},unlock:function(){this.slaves.length||(this.locked=!1,jQuery.each(e.Widgets,(function(){this.widget.removeClass("faceted-widget-locked")})),jQuery(".faceted-lock-overlay").remove())}},e.Load=function(t,i){i&&(e.BASEURL=i),jQuery(".faceted-widget:has(div.faceted-widget-error)").remove(),jQuery(e.Events).bind(e.Events.REDRAW,(function(){jQuery("#faceted-left-column:has(div.faceted-widget)").length?jQuery("#center-content-area").addClass("left-area-js"):jQuery("#center-content-area").removeClass("left-area-js"),jQuery("#faceted-right-column:has(div.faceted-widget)").length?jQuery("#center-content-area").addClass("right-area-js"):jQuery("#center-content-area").removeClass("right-area-js")})),jQuery(e.Events).trigger(e.Events.REDRAW),jQuery(e.Events).trigger(e.Events.INITIALIZE),window.addEventListener("hashchange",e.hash_changed,!1),jQuery(e.Events).bind(e.Events.AJAX_QUERY_SUCCESS,(function(){e.Form.initialize_paginator()})),jQuery(e.Events).bind(e.Events.RESET,(function(){e.Form.reset()})),e.Window.initialize(),e.Sections.initialize(),e.AjaxLook.initialize(),e.Form.initialize(),window.Calendar&&(window.Calendar.prototype.callCloseHandler=function(){this.onClose&&this.onClose(this),this.hideShowCovered();var t=this.params.inputField.id;return!!(t=t.split("_")[2])&&(e.Widgets[t].do_query(),!1)})},e.Unload=function(){},e.Cleanup=function(){e.Events.cleanup(),e.Widgets={},e.Query={},e.URLHandler.set()},jQuery(window).on("load",(function(t){var i=jQuery("body").find(".faceted-form");i.length&&e.Load(t,i.data("baseurl"))})),jQuery(window).on("unload",(function(){jQuery("body").find(".faceted-form").length&&e.Unload()}))},383:function(){Faceted.AlphabeticalWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.letters=jQuery("#"+e+" span"),this.selected=[],this.version="";var t=jQuery("#faceted-version");t&&(this.version=t.text());var i=jQuery(".faceted_letter_selected");i.length&&(Faceted.Query[this.wid]=[i.attr("id").split("-")[1]],this.synchronize());var r=this;if(this.letters.click((function(e){r.letter_click(this,e)})),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,(function(){r.synchronize()})),jQuery(Faceted.Events).bind(Faceted.Events.RESET,(function(){r.reset()})),this.widget.hasClass("faceted-count")){var a=this.widget.hasClass("faceted-sortcountable");jQuery(Faceted.Events).bind(Faceted.Events.QUERY_INITIALIZED,(function(){r.count(a)})),jQuery(Faceted.Events).bind(Faceted.Events.FORM_DO_QUERY,(function(e,t){t.wid!=r.wid&&"b_start"!=t.wid&&r.count(a)}))}},Faceted.AlphabeticalWidget.prototype={letter_click:function(e){this.do_query(e)},letter_unselect:function(e){jQuery(e).removeClass("faceted_letter_selected"),this.widget.removeClass("faceted-widget-active"),this.selected=[]},letter_select:function(e){this.letter_unselect(this.letters),jQuery(e).addClass("faceted_letter_selected"),"all"!=jQuery(e).attr("id").split("-")[1]&&(this.widget.addClass("faceted-widget-active"),this.selected=[e])},do_query:function(e){var t=jQuery(e).attr("id").split("-")[1],i="";this.selected.length&&(i=jQuery(this.selected[0]).attr("id").split("-")[1]),t==i?(this.letter_select(jQuery("#"+this.wid+"-all"),this.widget),t=[]):this.letter_select(e),Faceted.Form.do_query(this.wid,t)},reset:function(){this.letter_select(jQuery("#"+this.wid+"-all",this.widget))},synchronize:function(){var e=Faceted.Query[this.wid];if(e){var t=jQuery("#"+this.wid+"-"+e[0]);t.length?this.letter_select(t[0]):this.reset()}else this.reset()},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){if(!this.selected.length)return"";var e=jQuery('<a href="#" class="faceted-remove">remove</a>');e.attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters");var t=this;e.click((function(e){return t.criteria_remove(this,e),!1}));var i=jQuery("<dt>");return i.attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i},criteria_body:function(){if(!this.selected.length)return"";var e=jQuery(this.selected[0]).attr("id").split("-")[1],t=jQuery('<a href="#" class="faceted-remove">remove</a>');t.attr("id","criteria_"+this.wid+"_"+e),t.attr("title","Remove "+e+" filter");var i=this;t.click((function(e){return i.criteria_remove(this,e),!1}));var r=jQuery("<dd>");r.attr("id","criteria_"+this.wid+"_entries");var a=jQuery('<span class="faceted-alphabetic-criterion">');return a.append(t),jQuery("<span>").text(e).appendTo(a),r.append(a),r},criteria_remove:function(){this.do_query(this.selected[0])},count:function(e){var t=Faceted.SortedQuery();t.cid=this.wid,this.version&&(t.version=this.version);var i=this;jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_START,{wid:i.wid}),jQuery.getJSON(Faceted.BASEURL+"@@faceted_counter",t,(function(t){i.count_update(t,e),jQuery(Faceted.Events).trigger(Faceted.Events.DO_UPDATE),jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_STOP,{wid:i.wid})}))},count_update:function(e,t){var i=this;i.letters.each((function(){var r=jQuery(this);r.removeClass("faceted-alphabetic-letter-disabled"),r.unbind();var a=r.attr("id").split("-")[1],s=e[a];s=s||0,r.attr("title",s),t&&r.data("count",s),s?r.click((function(e){i.letter_click(this,e)})):r.addClass("faceted-alphabetic-letter-disabled")})),t&&i.letters.detach().sort((function(e,t){var i=jQuery(e).data("count");return jQuery(t).data("count")-i})),jQuery("#"+i.wid,i.widget).append(i.letters)}},Faceted.initializeAlphabeticalWidget=function(){jQuery("div.faceted-alphabetic-widget").each((function(){var e=jQuery(this).attr("id");e=e.split("_")[0],Faceted.Widgets[e]=new Faceted.AlphabeticalWidget(e)}))},jQuery(document).ready((function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeAlphabeticalWidget)}))},117:function(){Faceted.AutocompleteWidget=function(e){var t=this;this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.elements=this.widget.find("option"),this.select=jQuery("#"+this.wid),this.multiple=!!this.widget.data("multiple"),this.placeholder=this.widget.data("placeholder"),this.autocomplete_view=this.widget.data("autocomplete-view"),this.selected=[],this.button=jQuery("input[type=submit]",this.widget),this.select.select2({placeholder:this.placeholder,multiple:this.multiple,allowClear:!0,minimumInputLength:2,ajax:{url:this.autocomplete_view,delay:250,dataType:"json",params:{global:!1},data:function(e){return{term:e,add_terms:!0}},results:function(e){return{results:e}},cache:!1}}),jQuery("form",this.widget).submit((function(){return!1})),this.button.length?this.button.on("click",(function(){t.text_change(t.button)})):(this.select.on("select2-close",(function(e){t.select_change(this,e)})),this.select.on("select2-removed",(function(e){t.select_change(this,e)})));var i=this.select.select2("val");i&&(this.selected=[this.select],this.multiple?Faceted.Query[this.wid]=i:Faceted.Query[this.wid]=[i]),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,(function(){t.synchronize()})),jQuery(Faceted.Events).bind(Faceted.Events.RESET,(function(){t.reset()}))},Faceted.AutocompleteWidget.prototype={select_change:function(e){jQuery(e).val()||(e=null),this.do_query(e)},text_change:function(e){this.do_query(e),jQuery(e).removeClass("submitting")},do_query:function(e){var t=this.select.select2("val");if(t&&!Array.isArray(t)&&(t=[t]),!e)return this.selected=[],Faceted.Form.do_query(this.wid,[]);this.selected=[this.select];var i=jQuery("input[type=radio]:checked",this.widget);if("all"==(i=1==i.length?i.val():"all"))return Faceted.Form.do_query(this.wid,t);var r=Faceted.Query[this.wid]||[];return jQuery.each(t,(function(e,t){r.includes(t)||r.push(t)})),Faceted.Form.do_query(this.wid,r)},reset:function(){this.selected=[],this.widget.removeClass("faceted-widget-active"),this.select.select2("val",null)},synchronize:function(){var e=this,t=Faceted.Query[this.wid];if(!t)return this.reset();Array.isArray(t)||(t=[t]);var i=[];jQuery.each(t,(function(t,r){var a={id:r,text:r};e.multiple?i.push(a):i=a})),this.select.select2("data",i),this.selected=[this.select],this.widget.addClass("faceted-widget-active")},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){if(!this.selected.length)return"";var e=jQuery('<a href="#" class="faceted-remove">remove</a>');e.attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters");var t=this;e.click((function(){return t.criteria_remove(),!1}));var i=jQuery("<dt>");return i.attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i},criteria_body:function(){if(!this.selected.length)return"";var e=this,t=jQuery("<dd>"),i=Faceted.Query[this.wid];return i=i||[],jQuery.each(i,(function(){var i=this.toString();if(i.length>0){var r=jQuery('<span class="faceted-autocomplete-criterion">'),a=jQuery('<a href="#" class="faceted-remove">remove</a>');a.attr("id","criteria_"+e.wid+"_"+i),a.attr("title","Remove "+i+" filter"),a.click((function(){return e.criteria_remove(i),!1})),r.append(a),jQuery("<span>").text(i).appendTo(r),t.append(r)}})),t},criteria_remove:function(e){if(!e)return this.reset(),this.do_query();var t=Faceted.Query[this.wid]||[];Faceted.Query[this.wid]=t.filter((function(t){return t!=e})),this.synchronize(),this.do_query(this.select)}},Faceted.initializeAutocompleteWidget=function(){jQuery("div.faceted-autocomplete-widget").each((function(){var e=jQuery(this).attr("id");e=e.split("_")[0],Faceted.Widgets[e]=new Faceted.AutocompleteWidget(e)}))},jQuery(document).ready((function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeAutocompleteWidget)}))},185:function(){Faceted.CheckboxesWidget=function(e){var t=this;this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.fieldset=jQuery(".widget-fieldset",this.widget),this.title=jQuery("legend",this.widget).html(),this.elements=jQuery("form input[type=checkbox]",this.widget),this.maxitems=parseInt(jQuery("span",this.widget).text(),10),this.operatorElem=this.widget.find(".faceted-operator a"),this.operatorVisible=!!this.operatorElem.length,this.operatorVisible?(this.operator=this.operatorElem.data("value"),this.operatorElem.click((function(e){e.preventDefault(),t.operator_click(this,e)})),this.operatorElem.text(this.operatorElem.data(this.operator))):this.operator=this.widget.data("operator"),this.selected=[],this.version="";var i=jQuery("#faceted-version");i&&(this.version=i.text()),jQuery("form",this.widget).submit((function(){return!1})),this.elements.click((function(e){t.checkbox_click(this,e)}));var r=this.widget.find("form input[type=checkbox]:checked");if(r.length&&(this.selected=r,Faceted.Query[this.wid]=[],r.each((function(){Faceted.Query[t.wid].push(jQuery(this).val())}))),this.operatorVisible&&(Faceted.Query[t.wid+"-operator"]=t.operator),this.maxitems&&this.fieldset.collapsible({maxitems:this.maxitems,elements:"li:not(.faceted-checkbox-item-zerocount)",more:this.widget.data("more"),less:this.widget.data("less")}),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,(function(){t.synchronize()})),jQuery(Faceted.Events).bind(Faceted.Events.RESET,(function(){t.reset()})),this.widget.hasClass("faceted-count")){var a=this.widget.hasClass("faceted-sortcountable");jQuery(Faceted.Events).bind(Faceted.Events.QUERY_INITIALIZED,(function(){t.count(a)})),jQuery(Faceted.Events).bind(Faceted.Events.FORM_DO_QUERY,(function(e,i){("and"==t.operator||i.wid!=t.wid&&"b_start"!=i.wid)&&t.count(a)}))}},Faceted.CheckboxesWidget.prototype={checkbox_click:function(e){this.do_query(e)},operator_click:function(){var e=this;"or"===e.operator?(e.operator="and",e.operatorElem.text(e.operatorElem.data("and"))):(e.operator="or",e.operatorElem.text(e.operatorElem.data("or"))),Faceted.Form.do_query(this.wid+"-operator",e.operator)},operator_label:function(){if(!this.operatorVisible)return"";var e=this.widget.find(".faceted-operator label");return e=e.length?e.text():"","("+(e+=" "+this.operatorElem.data(this.operator))+")"},do_query:function(){this.selected=jQuery("form input[type=checkbox]:checked",this.widget);var e=[];this.selected.each((function(){e.push(jQuery(this).val())})),Faceted.Form.do_query(this.wid,e)},reset:function(){this.selected=[],this.widget.removeClass("faceted-widget-active"),jQuery(this.elements).attr("checked",!1)},synchronize:function(){this.elements.attr("checked",!1);var e=Faceted.Query[this.wid];e&&(jQuery("form input[type=checkbox]",this.widget).val(e),this.selected=jQuery("form input[type=checkbox]:checked",this.widget),this.widget.addClass("faceted-widget-active"));var t=Faceted.Query[this.wid+"-operator"];this.operatorVisible&&t&&(t=t[0],this.operator=t,this.operatorElem.data("value",t),this.operatorElem.text(this.operatorElem.data(this.operator)))},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){if(!this.selected.length)return"";var e=jQuery('<a href="#" class="faceted-remove">remove</a>');e.attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters");var t=this;e.on("click",(function(){return t.criteria_remove(),!1}));var i=jQuery("<dt>");return i.attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+" "+this.operator_label()+"</span>"),i},criteria_body:function(){if(!this.selected.length)return"";var e=this,t=jQuery("<dd>");return t.attr("id","criteria_"+this.wid+"_entries"),e.selected.each((function(){var i=jQuery('<span class="faceted-checkbox-criterion">'),r=jQuery(this),a=r.attr("id"),s=r.val(),n=jQuery("label[for="+a+"]",e.widget),d=n.attr("title"),c=n.children("span").text(),u=jQuery('<a href="#" class="faceted-remove">remove</a>');u.attr("id","criteria_"+a),u.attr("title","Remove "+d+" filter"),u.click((function(){return e.criteria_remove(s,r),!1})),i.append(u),jQuery('<span class="title">').text(d).appendTo(i),jQuery('<span class="count">').text(c).appendTo(i),t.append(i)})),t},criteria_remove:function(e,t){e?(t.attr("checked",!1),this.do_query()):(this.elements.attr("checked",!1),this.do_query())},count:function(e){var t=Faceted.SortedQuery();t.cid=this.wid,this.version&&(t.version=this.version),this.operator&&!t[this.wid+"-operator"]&&(t[this.wid+"-operator"]=this.operator);var i=this;jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_START,{wid:i.wid}),jQuery.getJSON(Faceted.BASEURL+"@@faceted_counter",t,(function(t){i.count_update(t,e),jQuery(Faceted.Events).trigger(Faceted.Events.DO_UPDATE),jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_STOP,{wid:i.wid})}))},count_update:function(e,t){var i=this,r=jQuery("li",i.widget);jQuery(r).each((function(){var r=jQuery(this);r.removeClass("faceted-checkbox-item-disabled"),r.removeClass("faceted-checkbox-item-zerocount");var a=jQuery("input",r);a.unbind();var s=a.val(),n=jQuery("span",r);if(!n.length){var d=jQuery("label",r);d.append(" "),d.append(jQuery("<span>")),n=jQuery("span",r)}var c=e[s];c=c||0,n.text("("+e[s]+")"),t&&r.data("count",c),c?(a.attr("disabled",!1),a.click((function(e){i.checkbox_click(this,e)}))):(r.addClass("faceted-checkbox-item-disabled"),i.widget.hasClass("faceted-zero-count-hidden")&&r.addClass("faceted-checkbox-item-zerocount"),a.attr("disabled","disabled"))})),t&&r.detach().sort((function(e,t){var i=jQuery(e).data("count");return jQuery(t).data("count")-i})),jQuery("ul",i.widget).append(r),i.fieldset.trigger("widget-refresh")}},Faceted.initializeCheckboxesWidget=function(){jQuery("div.faceted-checkboxes-widget").each((function(){var e=jQuery(this).attr("id");e=e.split("_")[0],Faceted.Widgets[e]=new Faceted.CheckboxesWidget(e)}))},jQuery(document).ready((function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeCheckboxesWidget)}))},593:function(){Faceted.CriteriaWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.title=jQuery("legend",this.widget).html(),this.area=jQuery("#"+e),this.reset_button=jQuery("#"+e+"_reset"),this.toggle_button=jQuery(".faceted-criteria-hide-show",this.widget),this.toggle_button_count=jQuery(".faceted-criteria-count",this.toggle_button);var t=this;this.reset_button.click((function(e){return t.reset_click(this,e),!1})),jQuery("a",this.toggle_button).click((function(e){return t.toggle_button_click(this,e),!1})),t.initialize_syndication(),jQuery(Faceted.Events).on(Faceted.Events.AJAX_QUERY_START,(function(){return t.update()})),jQuery(Faceted.Events).on(Faceted.Events.DO_UPDATE,(function(){return t.update()})),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,(function(){return t.update_syndication()}))},Faceted.CriteriaWidget.prototype={reset_click:function(){jQuery(Faceted.Events).trigger(Faceted.Events.RESET),this.do_query()},toggle_button_click:function(){this.area.toggle("blind"),jQuery("a",this.toggle_button).toggle(),this.toggle_button_count.toggle()},do_query:function(e,t){Faceted.Form.do_query(e,t)},update:function(){var e=this,t=!0;e.widget.fadeOut("fast",(function(){e.area.empty(),jQuery.each(Faceted.Query,(function(i){var r=Faceted.Widgets[i];if(r){var a=r.criteria();jQuery.each(a,(function(){e.area.append(this),t=!1}))}}));var i=jQuery("dd span",e.area).length;e.toggle_button_count.text("("+i+")"),t||e.widget.fadeIn("fast")}))},criteria:function(){return[]},initialize_syndication:function(){this.rss=null,this.rss_href="";var e=null,t=jQuery("#document-action-rss, #document-action-rss2").find("a");t.length&&(t=jQuery(t[0]).clone(),(e=jQuery("img",t)).attr("id",e.attr("id")+"-"+this.wid),t.addClass("faceted-criteria-syndication-rss"),t.attr("id",this.wid+"syndication-rss"),jQuery(".faceted-criteria-reset",this.widget).prepend(t),this.rss=jQuery("#"+this.wid+"syndication-rss",this.widget),this.rss_href=t.attr("href"))},update_syndication:function(){var e="ajax=True&";e+=Faceted.URLHandler.document_hash(),this.rss&&this.rss.attr("href",this.rss_href+"?"+e)}},Faceted.initializeCriteriaWidget=function(){jQuery("div.faceted-criteria-widget").each((function(){var e=jQuery(this).attr("id");e=e.split("_")[0],Faceted.Widgets[e]=new Faceted.CriteriaWidget(e)}))},jQuery(document).ready((function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeCriteriaWidget)}))},411:function(){Faceted.DateWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.select_from=jQuery("select[name=from]",this.widget),this.select_to=jQuery("select[name=to]",this.widget),this.select_from.hide(),this.select_to.hide();var t=this;this.slider=jQuery("select",this.widget).selectToUISlider({labels:2,labelSrc:"text",sliderOptions:{change:function(){t.change()}}}),jQuery("span.ui-slider-label",this.widget).each((function(e){11===e&&jQuery(this).addClass("ui-slider-label-show")})),this.selected=[];var i=this.select_from.val(),r=this.select_to.val();"now-past"===i&&"now_future"===r||(this.selected=[this.select_from,this.select_to],Faceted.Query[this.wid]=[i,r]),jQuery("form",this.widget).submit((function(){return!1})),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,(function(){t.synchronize()})),jQuery(Faceted.Events).bind(Faceted.Events.RESET,(function(){t.reset_ui()}))},Faceted.DateWidget.prototype={change:function(){var e=this.select_from.val(),t=this.select_to.val();"now-past"===e&&"now_future"===t?(this.reset(),Faceted.Form.do_query(this.wid,[])):this.do_query()},do_query:function(){var e=[this.select_from.val(),this.select_to.val()];this.selected=[this.select_from,this.select_to],Faceted.Form.do_query(this.wid,e)},reset:function(){this.selected=[],this.select_from.val("now-past"),this.select_to.val("now_future"),this.widget.removeClass("faceted-widget-active")},reset_ui:function(){this.reset(),this.select_from.trigger("change"),this.select_to.trigger("change")},synchronize:function(){var e=Faceted.Query[this.wid];e&&e.length?e.length<2?this.reset_ui():(this.select_from.val(e[0]).trigger("change"),this.select_to.val(e[1]).trigger("change"),this.widget.addClass("faceted-widget-active")):this.reset_ui()},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){if(!this.selected.length)return"";var e=jQuery('<a href="#" class="faceted-remove">remove</a>');e.attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters");var t=this;e.click((function(){return t.criteria_remove(),!1}));var i=jQuery("<dt>");return i.attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i},criteria_body:function(){if(!this.selected.length)return"";var e=jQuery("option:selected",this.select_from).text()+" - "+jQuery("option:selected",this.select_to).text(),t=this,i=jQuery("<dd>");i.attr("id","criteria_"+this.wid+"_entries");var r=jQuery('<span class="faceted-date-criterion">'),a=jQuery('<a href="#" class="faceted-remove">remove</a>');return a.attr("id","criteria_"+this.wid+"_"),a.attr("title","Remove "+e+" filter"),a.click((function(){return t.criteria_remove(),!1})),r.append(a),jQuery("<span>").text(e).appendTo(r),i.append(r),i},criteria_remove:function(){return this.reset_ui(),Faceted.Form.do_query(this.wid,[])}},Faceted.initializeDateWidget=function(){jQuery("div.faceted-date-widget").each((function(){var e=jQuery(this).attr("id");e=e.split("_")[0],Faceted.Widgets[e]=new Faceted.DateWidget(e)}))},jQuery(document).ready((function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeDateWidget)}))},56:function(){Faceted.DateRangeWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.start=jQuery("input[name=start]",this.widget),this.yearRange=jQuery("input[name=calYearRange]",this.widget).val(),this.end=jQuery("input[name=end]",this.widget),this.selected=[],this.usePloneFormat=jQuery("input[name=usePloneFormat]",this.widget).val(),this.usePloneFormat="True"==this.usePloneFormat,this.dateFormat=jQuery("input[name=dateFormat]",this.widget).val(),this.language=jQuery("input[name=language]",this.widget).val()||"en";var t=this.start.val(),i=this.end.val();t&&i&&(this.selected=[this.start,this.end],Faceted.Query[this.wid]=[t,i]);var r=this;this.start.datepicker({changeMonth:!0,changeYear:!0,dateFormat:this.dateFormat,yearRange:this.yearRange,onSelect:function(){r.force_start_range(),r.select_change(r.start)}}),this.end.datepicker({changeMonth:!0,changeYear:!0,yearRange:this.yearRange,dateFormat:this.dateFormat,onSelect:function(){r.force_end_range(),r.select_change(r.end)}}),t&&r.force_start_range(),i&&r.force_end_range(),this.start.change((function(){var e=r.start.val(),t=r.end.val();e||t||(r.reset(),Faceted.Form.do_query(r.wid,[]))})),this.end.change((function(){var e=r.start.val(),t=r.end.val();e||t||(r.reset(),Faceted.Form.do_query(r.wid,[]))})),jQuery("form",this.widget).submit((function(){return!1})),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,(function(){r.synchronize()})),jQuery(Faceted.Events).bind(Faceted.Events.RESET,(function(){r.reset()}))},Faceted.DateRangeErrorMsg="Invalid date range",Faceted.DateRangeWidget.prototype={select_change:function(e){this.do_query(e)},force_start_range:function(){var e=this.start.datepicker("getDate");e&&this.end.datepicker("option","minDate",e)},force_end_range:function(){var e=this.end.datepicker("getDate");e&&this.start.datepicker("option","maxDate",e)},do_query:function(){var e=this.start.val(),t=this.end.val();if(e||t||(this.reset(),Faceted.Form.do_query(this.wid,[])),!e||!t)return this.selected=[],!1;var i,r,a=[e,t];this.usePloneFormat?(i=jQuery.datepicker.parseDate(this.dateFormat,e),r=jQuery.datepicker.parseDate(this.dateFormat,t)):(i=new Date(e.replace(/-/g,"/")),r=new Date(t.replace(/-/g,"/"))),r<i?Faceted.Form.raise_error(Faceted.DateRangeErrorMsg,this.wid+"_errors",[]):(this.selected=[this.start,this.end],Faceted.Form.clear_errors(this.wid+"_errors",[]),Faceted.Form.do_query(this.wid,a))},reset:function(){this.selected=[],this.start.val(""),this.end.val(""),this.widget.removeClass("faceted-widget-active"),this.start.datepicker("option","maxDate",null),this.end.datepicker("option","minDate",null)},synchronize:function(){var e=Faceted.Query[this.wid];if(!e)return this.reset(),!1;if(!e.length)return this.reset(),!1;if(e.length<2)return this.reset(),!1;var t,i,r=e[0],a=e[1];return this.usePloneFormat?(t=jQuery.datepicker.parseDate(this.dateFormat,r),i=jQuery.datepicker.parseDate(this.dateFormat,a)):(t=new Date(r.replace(/-/g,"/")),i=new Date(a.replace(/-/g,"/"))),t.getFullYear()&&i.getFullYear()?(this.start.val(r),this.end.val(a),this.selected=[this.start,this.end],void this.widget.addClass("faceted-widget-active")):(this.reset(),!1)},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){if(!this.selected.length)return"";var e=jQuery('<a href="#" class="faceted-remove">remove</a>');e.attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters");var t=this;e.click((function(){return t.criteria_remove(),!1}));var i=jQuery("<dt>");return i.attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i},criteria_body:function(){if(!this.selected.length)return"";var e=this,t=jQuery("<dd>");t.attr("id","criteria_"+this.wid+"_entries");var i,r,a=this.start.val(),s=this.end.val();this.usePloneFormat?(i=jQuery.datepicker.parseDate(this.dateFormat,a),r=jQuery.datepicker.parseDate(this.dateFormat,s)):(i=new Date(a.replace(/-/g,"/")),r=new Date(s.replace(/-/g,"/")));var n=this.criteria_label(i,r),d=jQuery('<a href="#" class="faceted-remove">remove</a>');d.attr("id","criteria_"+this.wid+"_"),d.attr("title","Remove "+n+" filter"),d.click((function(){return e.criteria_remove(),!1}));var c=jQuery('<span class="faceted-daterange-criterion">');return c.append(d),jQuery("<span>").text(n).appendTo(c),t.append(c),t},criteria_label:function(e,t){if(this.usePloneFormat){var i={weekday:"short",year:"numeric",month:"short",day:"numeric"};return e.toLocaleDateString(this.language,i)+" - "+t.toLocaleDateString(this.language,i)}return e.toDateString()+" - "+t.toDateString()},criteria_remove:function(){return this.reset(),Faceted.Form.do_query(this.wid,[])}},Faceted.initializeDateRangeWidget=function(){jQuery("div.faceted-daterange-widget").each((function(){var e=jQuery(this).attr("id");e=e.split("_")[0],Faceted.Widgets[e]=new Faceted.DateRangeWidget(e)}))},jQuery(document).ready((function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeDateRangeWidget)}))},81:function(){Faceted.DebugWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.query_area=jQuery("dd.debug-query pre",this.widget),this.after_area=jQuery("dd.debug-after pre",this.widget),this.config_area=jQuery("dd.debug-config pre",this.widget),this.count_area=jQuery("dd.debug-count pre",this.widget),jQuery("dd",this.widget).hide(),jQuery("dt",this.widget).each((function(){var e=jQuery(this),t=e.attr("class"),i=e.parent("dl"),r=jQuery("<span>").addClass("ui-icon ui-icon-plus").css("float","left");r.click((function(){var e=jQuery(this);jQuery("dd."+t,i).toggle(),e.hasClass("ui-icon-minus")?(e.removeClass("ui-icon-minus"),e.addClass("ui-icon-plus")):(e.removeClass("ui-icon-plus"),e.addClass("ui-icon-minus"))})),e.prepend(r)}));var t=this;jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,(function(){t.synchronize()}))},Faceted.DebugWidget.prototype={synchronize:function(){var e=this,t=jQuery.extend({},Faceted.Query);t.debugger=this.wid,jQuery.get(Faceted.BASEURL+"@@faceted.widget.debug.query",t,(function(t){"[]"==t?jQuery(".debug-query",e.widget).hide():jQuery("dt.debug-query",e.widget).show(),e.query_area.text(t)})),jQuery.get(Faceted.BASEURL+"@@faceted.widget.debug.after",t,(function(t){"[]"==t?jQuery(".debug-after",e.widget).hide():jQuery("dt.debug-after",e.widget).show(),e.after_area.text(t)})),jQuery.get(Faceted.BASEURL+"@@faceted.widget.debug.criteria",t,(function(t){"[]"==t?jQuery(".debug-config",e.widget).hide():jQuery("dt.debug-config",e.widget).show(),e.config_area.text(t)})),jQuery.get(Faceted.BASEURL+"@@faceted.widget.debug.counters",t,(function(t){"[]"==t?jQuery(".debug-count",e.widget).hide():jQuery("dt.debug-count",e.widget).show(),e.count_area.text(t)}))},criteria:function(){return[]}},Faceted.initializeDebugWidget=function(){jQuery("div.faceted-debug-widget").each((function(){var e=jQuery(this).attr("id");e=e.split("_")[0],Faceted.Widgets[e]=new Faceted.DebugWidget(e)}))},jQuery(document).ready((function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeDebugWidget)}))},489:function(){Faceted.MultiSelectWidget=function(e){var t=this;this.wid=e,this.widget=jQuery("#"+this.wid+"_widget"),this.widget.show(),this.title=this.widget.find("legend").html(),this.elements=this.widget.find("option"),this.select=jQuery("#"+this.wid),this.multiple=!!this.select.attr("multiple"),this.placeholder=this.widget.data("placeholder"),this.closeOnSelect=this.widget.data("closeonselect"),this.selected=[],this.select.select2({placeholder:this.placeholder,closeOnSelect:this.closeOnSelect,allowClear:!0}),this.operatorElem=this.widget.find(".faceted-operator a"),this.operatorVisible=!!this.operatorElem.length,this.operatorVisible?(this.operator=this.operatorElem.data("value"),this.operatorElem.click((function(e){e.preventDefault(),t.operator_click(this,e)})),this.operatorElem.text(this.operatorElem.data(this.operator))):this.operator=this.widget.data("operator"),this.version="";var i=jQuery("#faceted-version");i&&(this.version=i.text()),jQuery("form",this.widget).submit((function(){return!1})),this.select.on("select2-close",(function(e){t.select_change(this,e)})),this.select.on("select2-removed",(function(e){t.select_change(this,e)}));var r=this.select.val();if(r&&(this.selected=t.widget.find("option:selected"),this.multiple?Faceted.Query[this.wid]=r:Faceted.Query[this.wid]=[r]),this.operatorVisible&&(Faceted.Query[t.wid+"-operator"]=t.operator),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,(function(){t.synchronize()})),jQuery(Faceted.Events).bind(Faceted.Events.RESET,(function(){t.reset()})),this.widget.hasClass("faceted-count")){var a=this.widget.hasClass("faceted-sortcountable");jQuery(Faceted.Events).bind(Faceted.Events.QUERY_INITIALIZED,(function(){t.count(a)})),jQuery(Faceted.Events).bind(Faceted.Events.FORM_DO_QUERY,(function(e,i){("and"==t.operator||i.wid!=t.wid&&"b_start"!=i.wid)&&t.count(a)}))}},Faceted.MultiSelectWidget.prototype={select_change:function(e){jQuery(e).val()||(e=null),this.do_query(e)},operator_click:function(){var e=this;"or"===e.operator?(e.operator="and",e.operatorElem.text(e.operatorElem.data("and"))):(e.operator="or",e.operatorElem.text(e.operatorElem.data("or"))),Faceted.Form.do_query(this.wid+"-operator",e.operator)},operator_label:function(){if(!this.operatorVisible)return"";var e=this.widget.find(".faceted-operator label");return e=e.length?e.text():"","("+(e+=" "+this.operatorElem.data(this.operator))+")"},do_query:function(e){if(e){var t=jQuery(e).val();return this.selected=this.widget.find("option:selected"),Faceted.Form.do_query(this.wid,t)}return this.selected=[],Faceted.Form.do_query(this.wid,[])},reset:function(){this.select.val(null).trigger("change.select2"),this.selected=[],this.widget.removeClass("faceted-widget-active")},synchronize:function(){var e=Faceted.Query[this.wid];e?(this.select.val(e).trigger("change.select2"),this.selected=this.widget.find("option:selected"),this.widget.addClass("faceted-widget-active")):this.reset();var t=Faceted.Query[this.wid+"-operator"];this.operatorVisible&&t&&(t=t[0],this.operator=t,this.operatorElem.data("value",t),this.operatorElem.text(this.operatorElem.data(this.operator)))},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){if(!this.selected.length)return"";var e=jQuery('<a href="#" class="faceted-remove">remove</a>');e.attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters");var t=this;e.click((function(){return t.criteria_remove(),!1}));var i=jQuery("<dt>");return i.attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i},criteria_body:function(){if(!this.selected.length)return"";var e=this,t=jQuery("<dd>");return t.attr("id","criteria_"+this.wid+"_entries"),e.selected.each((function(){var i=jQuery('<span class="faceted-multiselect-criterion">'),r=jQuery(this),a=r.attr("id"),s=r.val(),n=r.attr("title"),d=jQuery('<a href="#" class="faceted-remove">remove</a>');d.attr("id","criteria_"+a),d.attr("title","Remove "+n+" filter"),d.click((function(){return e.criteria_remove(s,r),!1})),i.append(d),jQuery("<span>").text(n).appendTo(i),t.append(i)})),t},criteria_remove:function(e,t){e?(t.attr("selected",!1),this.select.trigger("change.select2"),this.do_query(this.select)):(this.select.val(null).trigger("change.select2"),this.do_query())},count:function(e){var t=Faceted.SortedQuery();t.cid=this.wid,this.version&&(t.version=this.version),this.operator&&!t[this.wid+"-operator"]&&(t[this.wid+"-operator"]=this.operator);var i=this;jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_START,{wid:i.wid}),jQuery.getJSON(Faceted.BASEURL+"@@faceted_counter",t,(function(t){i.count_update(t,e),jQuery(Faceted.Events).trigger(Faceted.Events.DO_UPDATE),jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_STOP,{wid:i.wid})}))},count_update:function(e,t){var i=jQuery("select",this.widget),r=jQuery("option",this.widget),a=i.val();jQuery(r).each((function(){var i=jQuery(this);if(i.attr("title")){i.removeClass("faceted-select-item-disabled"),i.attr("disabled",!1);var r=i.val(),a=e[r];a=a||0;var s=i.attr("title");s+=" ("+a+")",i.html(s),t&&i.data("count",a),a||(i.attr("disabled","disabled"),i.addClass("faceted-select-item-disabled"))}})),t&&(r.detach().sort((function(e,t){var i=jQuery(e).data("count");return jQuery(t).data("count")-i})),i.append(r),i.val(a))}},Faceted.initializeMultiSelectWidget=function(){jQuery("div.faceted-multiselect-widget").each((function(){var e=jQuery(this).attr("id");e=e.split("_")[0],Faceted.Widgets[e]=new Faceted.MultiSelectWidget(e)}))},jQuery(document).ready((function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeMultiSelectWidget)}))},256:function(){var e=window.FacetedTree={version:"15.0"};e.Events={},e.Events.CHANGED="FACETEDTREE-CHANGED",e.Events.AJAX_START="FACETEDTREE-AJAX-START",e.Events.AJAX_STOP="FACETEDTREE-AJAX-STOP",e.JsTree=function(e,t,i){var r=this;r.BASEURL="",window.FacetedEdit?r.BASEURL=FacetedEdit.BASEURL:window.Faceted&&(r.BASEURL=Faceted.BASEURL),r.wid=e,r.mode=i||"view",r.input=jQuery(t).find(`#${e}`),r.input.attr("readonly","readonly"),r.area=jQuery("<div>").attr("id",`${e}-tree`).addClass("tree").text("Loading...").width(r.input.width()).hide(),r.input.after(r.area),r.input.click((function(){r.show()})),jQuery(document).on("click",(function(e){var t=jQuery(e.target);t.is(`#${r.input.attr("id")}`)||t.parents(`#${r.area.attr("id")}`).length||r.hide()})),jQuery(document).on("keydown",(function(e){27==e.keyCode&&r.hide()})),r.initialize()},e.JsTree.prototype={initialize:function(){var e=this;e.area.jstree({plugins:["wholerow"],core:{themes:{name:"proton",responsive:!0,variant:"large"},data:{url:function(t){return"#"===t.id?`${e.BASEURL}@@faceted.path.tree.json?cid=${e.wid}&mode=${e.mode}`:`${e.BASEURL}@@faceted.path.tree.json?cid=${e.wid}&mode=${e.mode}&path=${t.data.path}`},dataType:"json"}}}).on("changed.jstree",(function(t,i){e.change(i.node)}))},show:function(){this.area.show()},hide:function(){this.area.hide()},change:function(t){this.hide();var i=t.data.path;this.input.val()==i&&(i=""),this.input.val(i),jQuery(e.Events).trigger(e.Events.CHANGED,{path:i})}}},763:function(){Faceted.PathWidget=function(e){var t=this;t.wid=e,t.widget=jQuery(`#${e}_widget`),t.widget.show(),t.title=jQuery("legend",t.widget).html(),t.input=jQuery("input",t.widget),t.breadcrumbs=jQuery("<dd>"),t.selected=[];var i=t.input.val();i&&(t.selected=t.input,Faceted.Query[t.wid]=[i]),t.tree=new FacetedTree.JsTree(t.wid,t.widget),jQuery("form",t.widget).on("submit",(function(){return!1})),jQuery(FacetedTree.Events).on(FacetedTree.Events.CHANGED,(function(){t.text_change(t.input)})),jQuery(Faceted.Events).on(Faceted.Events.QUERY_CHANGED,(function(){t.synchronize()})),jQuery(Faceted.Events).on(Faceted.Events.RESET,(function(){t.reset()}))},Faceted.PathWidget.prototype={text_change:function(e){this.do_query(e)},do_query:function(e){var t=this.input.val();return t=t?[t]:[],e?(this.selected=[this.input],Faceted.Form.do_query(this.wid,t)):(this.selected=[],Faceted.Form.do_query(this.wid,[]))},reset:function(){this.selected=[],this.widget.removeClass("faceted-widget-active"),this.input.val("")},synchronize:function(){var e=Faceted.Query[this.wid];e?(this.input.val(e),this.selected=[this.input],this.widget.addClass("faceted-widget-active")):this.reset()},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){if(!this.selected.length)return"";var e=jQuery('<a href="#" class="faceted-remove">remove</a>');e.attr("id",`criteria_${this.wid}`),e.attr("title",`Remove ${this.title} filters`);var t=this;e.on("click",(function(){return t.criteria_remove(),!1}));var i=jQuery("<dt>");return i.attr("id",`criteria_${this.wid}_label`),i.append(e),i.append(`<span>${this.title}</span>`),i},criteria_body:function(){if(!this.selected.length)return"";var e=this;e.breadcrumbs.text("Loading...");var t={};return t.path=e.input.val(),t.cid=e.wid,jQuery.getJSON(`${Faceted.BASEURL}@@faceted.path.breadcrumbs.json`,t,(function(t){e.breadcrumbs.empty(),jQuery.each(t,(function(){e.breadcrumbs.append(jQuery("<span>").html("&raquo;"));var t=jQuery("<a>").attr("href",this.url).attr("title",this.title).text(this.title).on("click",(function(){var t=jQuery(this).attr("href");return e.input.val(t),jQuery(FacetedTree.Events).trigger(FacetedTree.Events.CHANGED,{path:t}),!1}));e.breadcrumbs.append(t)}))})),e.breadcrumbs},criteria_remove:function(){this.selected=[],this.input.val(""),this.do_query()}},Faceted.initializePathWidget=function(){jQuery("div.faceted-path-widget").each((function(){var e=jQuery(this).attr("id");e=e.split("_")[0],Faceted.Widgets[e]=new Faceted.PathWidget(e)}))},jQuery((function(){jQuery(Faceted.Events).on(Faceted.Events.INITIALIZE,Faceted.initializePathWidget)}))},305:function(){Faceted.PortletWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),jQuery("legend",this.widget).hide(),jQuery("fieldset",this.widget).css("border","none"),jQuery("form",this.widget).submit((function(){return!0}))},Faceted.initializePortletWidget=function(){jQuery("div.faceted-portlet-widget").each((function(){var e=jQuery(this).attr("id");e=e.split("_")[0],Faceted.Widgets[e]=new Faceted.PortletWidget(e)}))},jQuery(document).ready((function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializePortletWidget)}))},886:function(){Faceted.RadioWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.fieldset=jQuery(".widget-fieldset",this.widget),this.title=jQuery("legend",this.widget).html(),this.elements=jQuery("input[type=radio]",this.widget),this.maxitems=parseInt(jQuery("span",this.widget).text(),10),this.selected=[],this.version="";var t=jQuery("#faceted-version");t&&(this.version=t.text()),jQuery("form",this.widget).submit((function(){return!1}));var i=this;this.elements.click((function(e){i.radio_click(this,e)}));var r=jQuery("input[type=radio]:checked",this.widget);if(r.length&&(this.selected=r,Faceted.Query[this.wid]=[this.selected.val()]),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,(function(){i.synchronize()})),jQuery(Faceted.Events).bind(Faceted.Events.RESET,(function(){i.reset()})),this.widget.hasClass("faceted-count")){var a=this.widget.hasClass("faceted-sortcountable");jQuery(Faceted.Events).bind(Faceted.Events.QUERY_INITIALIZED,(function(){i.count(a)})),jQuery(Faceted.Events).bind(Faceted.Events.FORM_DO_QUERY,(function(e,t){t.wid!=i.wid&&"b_start"!=t.wid&&i.count(a)}))}this.maxitems&&this.fieldset.collapsible({maxitems:this.maxitems,elements:"li:not(.faceted-radio-item-zerocount)",more:this.widget.data("more"),less:this.widget.data("less")})},Faceted.RadioWidget.prototype={radio_click:function(e){jQuery(e).val()||(e=null),this.do_query(e)},do_query:function(e){if(e){this.selected=[e];var t=jQuery(this.selected[0]).val();return Faceted.Form.do_query(this.wid,t)}return this.selected=[],Faceted.Form.do_query(this.wid,[])},reset:function(){jQuery(this.elements[0]).prop("checked",!0),this.selected=[],this.widget.removeClass("faceted-widget-active")},synchronize:function(){var e=Faceted.Query[this.wid];if(e){var t=this;"object"!=typeof e&&(e=[e]),jQuery.each(e,(function(){var e=jQuery("#"+t.wid+'_widget input[type=radio][value="'+this+'"]');e.length?(t.selected=e,t.selected.prop("checked",!0),t.widget.addClass("faceted-widget-active")):t.reset()}))}else this.reset()},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){if(!this.selected.length)return"";var e=jQuery('<a href="#" class="faceted-remove">remove</a>');e.attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters");var t=this;e.click((function(){return t.criteria_remove(),!1}));var i=jQuery("<dt>");return i.attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i},criteria_body:function(){if(!this.selected.length)return"";var e=this,t=jQuery("<dd>");t.attr("id","criteria_"+this.wid+"_entries");var i=jQuery(this.selected).attr("id"),r=jQuery("label[for="+i+"]",e.widget),a=r.attr("title");r=r.text();var s=jQuery('<a href="#" class="faceted-remove">remove</a>'),n=jQuery('<span class="faceted-radio-criterion">');return s.attr("id","criteria_"+i),s.attr("title","Remove "+a+" filter"),s.click((function(){return e.criteria_remove(),!1})),n.append(s),jQuery("<span>").text(r).appendTo(n),t.append(n),t},criteria_remove:function(){jQuery(this.elements[0]).prop("checked",!0),this.do_query()},count:function(e){var t=Faceted.SortedQuery();t.cid=this.wid,this.version&&(t.version=this.version);var i=this;jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_START,{wid:i.wid}),jQuery.getJSON(Faceted.BASEURL+"@@faceted_counter",t,(function(t){i.count_update(t,e),jQuery(Faceted.Events).trigger(Faceted.Events.DO_UPDATE),jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_STOP,{wid:i.wid})}))},count_update:function(e,t){var i=this,r=jQuery("li",i.widget);jQuery(r).each((function(){var r=jQuery(this);r.removeClass("faceted-radio-item-disabled"),r.removeClass("faceted-radio-item-zerocount");var a=jQuery("input",r);a.unbind();var s=a.val(),n=jQuery("span",r);if(!n.length){var d=jQuery("label",r);d.append(" "),d.append(jQuery("<span>")),n=jQuery("span",r)}var c=e[s];c=c||0,n.text("("+c+")"),t&&r.data("count",c),c?(a.prop("disabled",!1),a.click((function(e){i.radio_click(this,e)}))):(r.addClass("faceted-radio-item-disabled"),i.widget.hasClass("faceted-zero-count-hidden")&&r.addClass("faceted-radio-item-zerocount"),a.prop("disabled","disabled"))})),t&&r.detach().sort((function(e,t){var i=jQuery(e).data("count");return jQuery(t).data("count")-i})),jQuery("ul",i.widget).append(r),i.fieldset.trigger("widget-refresh")}},Faceted.initializeRadioWidget=function(){jQuery("div.faceted-radio-widget").each((function(){var e=jQuery(this).attr("id");e=e.split("_")[0],Faceted.Widgets[e]=new Faceted.RadioWidget(e)}))},jQuery(document).ready((function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeRadioWidget)}))},143:function(){Faceted.RangeWidget=function(e){var t=this;this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.start=jQuery("input[name=start]",this.widget),this.end=jQuery("input[name=end]",this.widget),this.selected=[],this.invalidRangeMsg=this.widget.data("invalid-range-msg");var i=this.start.val(),r=this.end.val();i&&r&&(this.selected=[this.start,this.end],Faceted.Query[this.wid]=[i,r]),jQuery("form",this.widget).submit((function(){return!1}));var a=function(e){t.select_change(this,e)};this.start.change(a),this.end.change(a),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,(function(){t.synchronize()})),jQuery(Faceted.Events).bind(Faceted.Events.RESET,(function(){t.reset()}))},Faceted.RangeWidget.prototype={select_change:function(e){this.do_query(e)},do_query:function(){var e=this.start.val();e=parseFloat(e)||e;var t=this.end.val();if(t=parseFloat(t)||t,!e||!t)return this.selected=[],!1;var i=[this.start.val(),this.end.val()];t<e?Faceted.Form.raise_error(this.invalidRangeMsg,this.wid+"_errors",[]):(this.selected=[this.start,this.end],Faceted.Form.clear_errors(this.wid+"_errors",[]),Faceted.Form.do_query(this.wid,i))},reset:function(){this.selected=[],this.widget.removeClass("faceted-widget-active"),this.start.val(""),this.end.val("")},synchronize:function(){var e=Faceted.Query[this.wid];if(!e)return this.reset(),!1;if(!e.length)return this.reset(),!1;if(e.length<2)return this.reset(),!1;var t=e[0],i=e[1];this.start.val(t),this.end.val(i),this.selected=[this.start,this.end],this.widget.addClass("faceted-widget-active")},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){if(!this.selected.length)return"";var e=jQuery('<a href="#" class="faceted-remove">remove</a>');e.attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters");var t=this;e.on("click",(function(){return t.criteria_remove(),!1}));var i=jQuery("<dt>");return i.append(e),i.append("<span>"+this.title+"</span>"),i},criteria_body:function(){if(!this.selected.length)return"";var e=this,t=jQuery("<dd>"),i=jQuery('<span class="faceted-range-criterion">'),r=this.start.val()+" - "+this.end.val(),a=jQuery('<a href="#" class="faceted-remove">remove</a>');return a.attr("id","criteria_"+this.wid+"_"),a.attr("title","Remove "+r+" filter"),a.on("click",(function(){return e.criteria_remove(),!1})),i.append(a),jQuery("<span>").text(r).appendTo(i),t.append(i),t},criteria_remove:function(){return this.reset(),Faceted.Form.do_query(this.wid,[])}},Faceted.initializeRangeWidget=function(){jQuery("div.faceted-range-widget").each((function(){var e=jQuery(this).attr("id");e=e.split("_")[0],Faceted.Widgets[e]=new Faceted.RangeWidget(e)}))},jQuery(document).ready((function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeRangeWidget)}))},710:function(){Faceted.ResultsPerPageWidget=function(e){this.wid=e,this.widget=jQuery("#"+this.wid+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.elements=jQuery("option",this.widget),this.select=jQuery("#"+this.wid),this.selected=[],jQuery("form",this.widget).submit((function(){return!1}));var t=this;this.select.change((function(e){t.select_change(this,e)}));var i=this.select.val();i&&(this.selected=this.widget.find("option:selected"),Faceted.Query[this.wid]=[i]),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,(function(){t.synchronize()})),jQuery(Faceted.Events).bind(Faceted.Events.RESET,(function(){t.reset()}))},Faceted.ResultsPerPageWidget.prototype={select_change:function(e){jQuery(e).val()||(e=null),this.do_query(e)},do_query:function(e){if(e){var t=jQuery(e).val();return this.selected=this.widget.find("option:selected"),Faceted.Form.do_query(this.wid,t)}return this.selected=[],Faceted.Form.do_query(this.wid,[])},reset:function(){this.select.val(""),this.selected=[],this.widget.removeClass("faceted-widget-active")},synchronize:function(){var e=Faceted.Query[this.wid];if(e){var t=this;jQuery.each(e,(function(){var i=t.widget.find("option:selected");i.length?(t.selected=i,t.select.val(e),t.widget.addClass("faceted-widget-active")):t.reset()}))}else this.reset()},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){if(!this.selected.length)return"";var e=jQuery('<a href="#" class="faceted-remove">remove</a>');e.attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters");var t=this;e.click((function(){return t.criteria_remove(),!1}));var i=jQuery("<dt>");return i.attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i},criteria_body:function(){if(!this.selected.length)return"";var e=this,t=jQuery("<dd>"),i=jQuery('<span class="faceted-resultsperpage-criterion">');t.attr("id","criteria_"+this.wid+"_entries");var r=jQuery(this.selected),a=r.val(),s=r.html(),n=jQuery('<a href="#" class="faceted-remove">remove</a>');return n.attr("id","criteria_"+this.wid+"_"+a),n.attr("title","Remove "+s+" filter"),n.click((function(){return e.criteria_remove(),!1})),i.append(n),jQuery("<span>").text(s).appendTo(i),t.append(i),t},criteria_remove:function(){this.select.val(""),this.do_query()}},Faceted.initializeResultsPerPageWidget=function(){jQuery("div.faceted-resultsperpage-widget").each((function(){var e=jQuery(this).attr("id");e=e.split("_")[0],Faceted.Widgets[e]=new Faceted.ResultsPerPageWidget(e)}))},jQuery(document).ready((function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeResultsPerPageWidget)}))},958:function(){Faceted.SelectWidget=function(e){this.wid=e,this.widget=jQuery("#"+this.wid+"_widget"),this.widget.show(),this.title=this.widget.find("legend").html(),this.elements=this.widget.find("option"),this.select=jQuery("#"+this.wid),this.selected=[],this.version="";var t=jQuery("#faceted-version");t&&(this.version=t.text()),jQuery("form",this.widget).submit((function(){return!1}));var i=this;this.select.change((function(e){i.select_change(this,e)}));var r=this.select.val();if(r&&(this.selected=i.widget.find("option:selected"),Faceted.Query[this.wid]=[r]),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,(function(){i.synchronize()})),jQuery(Faceted.Events).bind(Faceted.Events.RESET,(function(){i.reset()})),this.widget.hasClass("faceted-count")){var a=this.widget.hasClass("faceted-sortcountable");jQuery(Faceted.Events).bind(Faceted.Events.QUERY_INITIALIZED,(function(){i.count(a)})),jQuery(Faceted.Events).bind(Faceted.Events.FORM_DO_QUERY,(function(e,t){t.wid!=i.wid&&"b_start"!=t.wid&&i.count(a)}))}},Faceted.SelectWidget.prototype={select_change:function(e){jQuery(e).val()||(e=null),this.do_query(e)},do_query:function(e){if(e){var t=jQuery(e).val();return this.selected=this.widget.find("option:selected"),Faceted.Form.do_query(this.wid,t)}return this.selected=[],Faceted.Form.do_query(this.wid,[])},reset:function(){if(this.widget.hasClass("hide-all-option")){var e=this.select.find("option:first").val();this.select.val(e),this.selected=[e],this.select_change(this.select)}else this.select.val(""),this.selected=[];this.widget.removeClass("faceted-widget-active")},synchronize:function(){var e=Faceted.Query[this.wid];if(e){var t=this;jQuery.each(e,(function(){var i=t.widget.find('option[value="'+this+'"]');i.length?(t.selected=i,t.select.val(e),t.widget.addClass("faceted-widget-active")):t.reset()}))}else this.reset()},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){if(!this.selected.length)return"";var e=jQuery('<a href="#" class="faceted-remove">remove</a>');e.attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters");var t=this;e.click((function(){return t.criteria_remove(),!1}));var i=jQuery("<dt>");return i.attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i},criteria_body:function(){if(!this.selected.length)return"";var e=this,t=jQuery("<dd>"),i=jQuery('<span class="faceted-select-criterion">');t.attr("id","criteria_"+this.wid+"_entries");var r=jQuery(this.selected),a=r.val(),s=r.attr("title"),n=jQuery('<a href="#" class="faceted-remove">remove</a>');return n.attr("id","criteria_"+this.wid+"_"+a),n.attr("title","Remove "+s+" filter"),n.click((function(){return e.criteria_remove(),!1})),i.append(n),jQuery("<span>").text(s).appendTo(i),t.append(i),t},criteria_remove:function(){this.select.val(""),this.do_query()},count:function(e){var t=Faceted.SortedQuery();t.cid=this.wid,this.version&&(t.version=this.version);var i=this;jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_START,{wid:i.wid}),jQuery.getJSON(Faceted.BASEURL+"@@faceted_counter",t,(function(t){i.count_update(t,e),jQuery(Faceted.Events).trigger(Faceted.Events.DO_UPDATE),jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_STOP,{wid:i.wid})}))},count_update:function(e,t){var i=jQuery("select",this.widget),r=jQuery("option",this.widget),a=i.val();jQuery(r).each((function(){var i=jQuery(this);i.removeClass("faceted-select-item-disabled"),i.attr("disabled",!1);var r=i.val(),a=e[r];a=a||0;var s=i.attr("title");s+=" ("+a+")",i.html(s),t&&i.data("count",a),a||(i.attr("disabled","disabled"),i.addClass("faceted-select-item-disabled"))})),t&&(r.detach().sort((function(e,t){var i=jQuery(e).data("count");return jQuery(t).data("count")-i})),i.append(r),i.val(a))}},Faceted.initializeSelectWidget=function(){jQuery("div.faceted-select-widget").each((function(){var e=jQuery(this).attr("id");e=e.split("_")[0],Faceted.Widgets[e]=new Faceted.SelectWidget(e)}))},jQuery(document).ready((function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeSelectWidget)}))},350:function(){Faceted.SortingWidget=function(e){this.wid=e,this.widget=jQuery("#"+this.wid+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.reverse=jQuery("#"+this.wid+"_reversed"),this.elements=jQuery("option",this.widget),this.selected=[],this.select=jQuery("#"+this.wid);var t=jQuery(".faceted-widget:has(div.faceted-sorting-errors)");if(t.length)return t.remove(),void jQuery(Faceted.Events).trigger(Faceted.Events.REDRAW);jQuery("form",this.widget).submit((function(){return!1}));var i=this;this.select.change((function(e){i.select_change(this,e)})),this.reverse.click((function(e){i.reverse_change(this,e)}));var r=this.select.val();r&&(this.selected=this.widget.find("option:selected"),Faceted.Query[this.wid]=[r],this.reverse.prop("checked")&&(Faceted.Query.reversed="on")),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,(function(){i.synchronize()})),jQuery(Faceted.Events).bind(Faceted.Events.RESET,(function(){i.reset()}))},Faceted.SortingWidget.prototype={select_change:function(e){this.do_query(e)},reverse_change:function(e){this.do_query(e)},do_query:function(e){if(!e)return this.selected=[],void Faceted.Form.do_query(this.wid,[]);var t=null;return"checkbox"==jQuery(e).attr("type")?(t=e.checked?"on":[],this.selected.length?void Faceted.Form.do_query("reversed",t):void(Faceted.Query.reversed=t)):((t=jQuery(e).val())?this.selected=this.widget.find("option:selected"):(this.selected=[],t=[]),void Faceted.Form.do_query(this.wid,t))},reset:function(e){e=!!e,this.select.val(""),this.reverse.attr("checked",e),this.selected=[],this.widget.removeClass("faceted-widget-active")},synchronize:function(){var e=Faceted.Query[this.wid],t=Faceted.Query.reversed;if(t=!(!t||1==t.length&&!t[0]),e){var i=this;jQuery.each(e,(function(){var r=i.widget.find("option:selected");r.length?(i.selected=r,i.select.val(e),i.reverse.attr("checked",t),i.widget.addClass("faceted-widget-active")):i.reset(t)}))}else this.reset(t)},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){if(!this.selected.length)return"";var e=jQuery('<a href="#" class="faceted-remove">remove</a>');e.attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters");var t=this;e.click((function(){return t.criteria_remove(),!1}));var i=jQuery("<dt>");return i.attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i},criteria_body:function(){if(!this.selected.length)return"";var e=this,t=jQuery("<dd>"),i=jQuery('<span class="faceted-sorting-criterion">');t.attr("id","criteria_"+this.wid+"_entries");var r=jQuery(this.selected),a=r.val(),s=r.html(),n=jQuery('<a href="#" class="faceted-remove">remove</a>');if(n.attr("id","criteria_"+this.wid+"_"+a),n.attr("title","Remove "+s+" filter"),n.click((function(){return e.criteria_remove(),!1})),i.append(n),jQuery("<span>").text(s).appendTo(i),t.append(i),this.reverse.prop("checked")){var d=this.reverse.attr("id"),c=jQuery("label[for="+d+"]").html();t.append("<span>("+c+")</span>")}return t},criteria_remove:function(){this.select.val(""),this.reverse.attr("checked",!1),this.do_query()}},Faceted.initializeSortingWidget=function(){jQuery("div.faceted-sorting-widget").each((function(){var e=jQuery(this).attr("id");e=e.split("_")[0],Faceted.Widgets[e]=new Faceted.SortingWidget(e)}))},jQuery(document).ready((function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeSortingWidget)}))},897:function(){Faceted.TagsCloudWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.tags=jQuery("li",this.widget),this.faceted_count=this.widget.hasClass("faceted-count"),this.selected=[],this.version="";var t=jQuery("#faceted-version");t&&(this.version=t.text()),this.config={},this.initialize();var i=jQuery(".faceted-tag-selected",this.widget);if(i.length){var r=i.attr("id").replace(this.wid,"");r=r.replace(/_-_/g," ").replace(/_--_/g,"/"),Faceted.Query[this.wid]=[r],this.synchronize()}var a=this;this.tags.click((function(e){a.tag_click(this,e)})),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,(function(){a.synchronize()})),jQuery(Faceted.Events).bind(Faceted.Events.RESET,(function(){a.reset()})),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_INITIALIZED,(function(){a.count()})),jQuery(Faceted.Events).bind(Faceted.Events.FORM_DO_QUERY,(function(e,t){t.wid!=a.wid&&"b_start"!=t.wid&&a.count()})),jQuery(Faceted.Events).bind(Faceted.Events.WINDOW_WIDTH_CHANGED,(function(){var e=a.widget.width();jQuery("ul",a.widget).width(e-30),a.update()}))},Faceted.TagsCloudWidget.prototype={initialize:function(){var e=jQuery("#"+this.wid+"-cloud",this.widget).text();e=e||"list";var t=jQuery("#"+this.wid+"-sizemin",this.widget).text();t=(t=parseInt(t,10))||10;var i=jQuery("#"+this.wid+"-sizemax",this.widget).text();i=(i=parseInt(i,10))||20;var r=jQuery("#"+this.wid+"-colormin",this.widget).text(),a=jQuery("#"+this.wid+"-colormax",this.widget).text(),s=jQuery("#"+this.wid+"-height",this.widget).text();s=(s=parseInt(s,10))||200,s="list"==e?"auto":s,this.config={type:e,sizemin:t,sizemax:i,height:s,colormin:r,colormax:a},this.update()},update:function(){jQuery("#"+this.wid,this.widget).tagcloud(this.config)},tag_click:function(e){this.do_query(e)},unselect:function(e){jQuery(e).removeClass("faceted-tag-selected"),this.selected=[],this.widget.removeClass("faceted-widget-active")},select:function(e){this.unselect(this.tags),jQuery(e).addClass("faceted-tag-selected"),"all"!=jQuery(e).attr("id").replace(this.wid,"")?(this.selected=[e],this.widget.addClass("faceted-widget-active")):this.widget.removeClass("faceted-widget-active")},do_query:function(e){var t=jQuery(e).attr("id").replace(this.wid,"");t=t.replace(/_-_/g," ").replace(/_--_/g,"/");var i="";this.selected.length&&(i=(i=jQuery(this.selected[0]).attr("id").replace(this.wid,"")).replace(/_-_/g," ").replace(/_--_/g,"/")),t==i?(this.select(jQuery("#"+this.wid+"all",this.widget)),t=[]):this.select(e),Faceted.Form.do_query(this.wid,t)},reset:function(){this.select(jQuery("#"+this.wid+"all",this.widget))},synchronize:function(){var e=Faceted.Query[this.wid];if(e){e=e[0].replace(/\s/g,"_-_").replace(/\//g,"_--_");var t=jQuery("#"+this.wid+e,this.widget);t.length&&this.select(t[0])}else this.reset()},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){if(!this.selected.length)return"";var e=jQuery('<a href="#" class="faceted-remove">remove</a>');e.attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters");var t=this;e.click((function(e){return t.criteria_remove(this,e),!1}));var i=jQuery("<dt>");return i.attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i},criteria_body:function(){if(!this.selected.length)return"";var e=jQuery(this.selected[0]).attr("id"),t=jQuery(this.selected[0]).attr("title"),i=jQuery('<a href="#" class="faceted-remove">remove</a>');i.attr("id","criteria_"+e),i.attr("title","Remove "+t+" filter");var r=this;i.click((function(e){return r.criteria_remove(this,e),!1}));var a=jQuery("<dd>"),s=jQuery('<span class="faceted-tagscloud-criterion">');return a.attr("id","criteria_"+this.wid+"_entries"),s.append(i),jQuery("<span>").text(t).appendTo(s),a.append(s),a},criteria_remove:function(){this.do_query(this.selected[0])},count:function(){var e=Faceted.SortedQuery();e.cid=this.wid,this.version&&(e.version=this.version);var t=this;jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_START,{wid:t.wid}),jQuery.get(Faceted.BASEURL+"@@tagscloud_counter",e,(function(e){t.count_update(e),jQuery(Faceted.Events).trigger(Faceted.Events.DO_UPDATE),jQuery(Faceted.Events).trigger(Faceted.Events.AJAX_STOP,{wid:t.wid})}))},count_update:function(e){var t=this,i=t.wid+"all",r=jQuery("fieldset",jQuery(e));t.widget.html(r);var a=1e4;jQuery("li",t.widget).each((function(){var e=jQuery(this).attr("value");(e=parseInt(e,10))<a&&e>0&&(a=e)}));var s=jQuery("#"+i,t.widget),n=s.attr("value");s.attr("value",a),t.tags=jQuery("li",this.widget),t.tags.click((function(e){t.tag_click(this,e)})),t.faceted_count?(t.tags.each((function(){var e=jQuery(this),r=e.text(),a=parseInt(e.attr("value"),10);e.attr("id")==i?a=n:a-=1,r=r.replace(/\s\(\d+\)/,""),r+=" ("+a+")",e.html(r),e.unbind(),1===e.attr("value")&&e.attr("id")!=i?e.addClass("faceted-tag-disabled"):(e.removeClass("faceted-tag-disabled"),e.click((function(e){t.tag_click(this,e)})))})),t.update()):t.update()}},Faceted.initializeTagsCloudWidget=function(){jQuery("div.faceted-tagscloud-widget").each((function(){var e=jQuery(this).attr("id");e=e.split("_")[0],Faceted.Widgets[e]=new Faceted.TagsCloudWidget(e)}))},jQuery(document).ready((function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeTagsCloudWidget)}))},478:function(){Faceted.TextWidget=function(e){this.wid=e,this.widget=jQuery("#"+e+"_widget"),this.widget.show(),this.title=jQuery("legend",this.widget).html(),this.selected=[],this.button=jQuery("input[type=submit]",this.widget),this.input=jQuery("#"+this.wid),this.value="";var t=this,i=this.widget.find("form");i.submit((function(){return t.text_change(t.button),!1})),this.input.change((function(){i.submit()}));var r=this.input.val();r&&(this.selected=[this.input],this.value=r,Faceted.Query[this.wid]=[r]),jQuery(Faceted.Events).bind(Faceted.Events.QUERY_CHANGED,(function(){t.synchronize()})),jQuery(Faceted.Events).bind(Faceted.Events.RESET,(function(){t.reset()}))},Faceted.TextWidget.prototype={text_change:function(e){this.value!==this.input.val()&&(this.do_query(e),jQuery(e).removeClass("submitting"))},do_query:function(e){var t=this.input.val();if(t=t?[t]:[],!e)return this.selected=[],this.value="",Faceted.Form.do_query(this.wid,[]);this.selected=[this.input],this.value=this.input.val();var i=jQuery("input[type=radio]:checked",this.widget);if("all"==(i=1==i.length?i.val():"all"))return Faceted.Form.do_query(this.wid,t);var r=Faceted.Query[this.wid];return r=r||[],t.length&&!(t[0]in r)&&r.push(t[0]),Faceted.Form.do_query(this.wid,r)},reset:function(){this.selected=[],this.value="",jQuery("#"+this.wid).val(""),this.widget.removeClass("faceted-widget-active")},synchronize:function(){var e=Faceted.Query[this.wid];e?(this.input.val(e),this.selected=[this.input],this.value=this.input.val(),this.widget.addClass("faceted-widget-active")):this.reset()},criteria:function(){var e=[],t=this.criteria_title(),i=this.criteria_body();return t&&e.push(t),i&&e.push(i),e},criteria_title:function(){if(!this.selected.length)return"";var e=jQuery('<a href="#" class="faceted-remove">remove</a>');e.attr("id","criteria_"+this.wid),e.attr("title","Remove "+this.title+" filters");var t=this;e.click((function(){return t.criteria_remove(),!1}));var i=jQuery("<dt>");return i.attr("id","criteria_"+this.wid+"_label"),i.append(e),i.append("<span>"+this.title+"</span>"),i},criteria_body:function(){if(!this.selected.length)return"";var e=this,t=jQuery("<dd>"),i=Faceted.Query[this.wid];return i=i||[],jQuery.each(i,(function(){var i=this.toString();if(i.length>0){var r=jQuery('<span class="faceted-text-criterion">'),a=jQuery('<a href="#" class="faceted-remove">remove</a>');a.attr("id","criteria_"+e.wid+"_"+i),a.attr("title","Remove "+i+" filter"),a.click((function(){return e.criteria_remove(i),!1})),r.append(a),jQuery("<span>").text(i).appendTo(r),t.append(r)}})),t},criteria_remove:function(e){if(this.input.val(""),!e)return this.selected=[],this.value="",void this.do_query();jQuery("#"+this.wid+"_place_current",this.widget).attr("checked",!0);var t=jQuery("input[type=text]",this.widget),i=Faceted.Query[this.wid],r=jQuery.inArray(e,i);-1!=r&&(i.splice(r,1),Faceted.Query[this.wid]=i,this.do_query(t))}},Faceted.initializeTextWidget=function(){jQuery("div.faceted-text-widget").each((function(){var e=jQuery(this).attr("id");e=e.split("_")[0],Faceted.Widgets[e]=new Faceted.TextWidget(e)}))},jQuery(document).ready((function(){jQuery(Faceted.Events).bind(Faceted.Events.INITIALIZE,Faceted.initializeTextWidget)}))}},t={};function i(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,i),s.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";i(739),i(603),i(293),i(383),i(117),i(185),i(593),i(411),i(56),i(81),i(489),i(256),i(763),i(305),i(886),i(143),i(710),i(958),i(350),i(897),i(478)}()}();